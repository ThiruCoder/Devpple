(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1521],{55041:function(e,t,r){var a=r(5035),s=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(s,""):e}},5035:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},70972:function(e,t,r){var a=r(68829);e.exports=function(e){return a(e,4)}},64798:function(e,t,r){var a=r(28302),s=r(11121),i=r(6660),n=Math.max,o=Math.min;e.exports=function(e,t,r){var l,c,d,u,h,m,p=0,f=!1,g=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var r=l,a=c;return l=c=void 0,p=t,u=e.apply(a,r)}function b(e){var r=e-m,a=e-p;return void 0===m||r>=t||r<0||g&&a>=d}function S(){var e,r,a,i=s();if(b(i))return N(i);h=setTimeout(S,(e=i-m,r=i-p,a=t-e,g?o(a,d-r):a))}function N(e){return(h=void 0,v&&l)?x(e):(l=c=void 0,u)}function E(){var e,r=s(),a=b(r);if(l=arguments,c=this,m=r,a){if(void 0===h)return p=e=m,h=setTimeout(S,t),f?x(e):u;if(g)return clearTimeout(h),h=setTimeout(S,t),x(m)}return void 0===h&&(h=setTimeout(S,t)),u}return t=i(t)||0,a(r)&&(f=!!r.leading,d=(g="maxWait"in r)?n(i(r.maxWait)||0,t):d,v="trailing"in r?!!r.trailing:v),E.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=m=c=h=void 0},E.flush=function(){return void 0===h?u:N(s())},E}},11121:function(e,t,r){var a=r(74288);e.exports=function(){return a.Date.now()}},6660:function(e,t,r){var a=r(55041),s=r(28302),i=r(78371),n=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return n;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var r=l.test(e);return r||c.test(e)?d(e.slice(2),r?2:8):o.test(e)?n:+e}},78385:function(e,t,r){"use strict";r.d(t,{y:function(){return d},default:function(){return e$}});var a,s,i,n,o,l,c,d,u=r(57437),h=r(2265),m=r(99376),p=r(21652),f=r.n(p),g=r(93213),v=r(65667),x=r(38452),b=r(38088),S=r(7709),N=r(9200),E=r(80777),y=r(15351);async function R(e,t,r,a,s){let i=new S.Y({level:e.getProperty("logging.level.client")}),{storeSlug:n,marketSlug:o,nearby:l}=a,c=new E.IG(e,new y.iI(e,{redirect:null==s?void 0:s.redirect}),{redirect:null==s?void 0:s.redirect}),d=(0,b.s)(a),u=null,h=(0,v.O)(t,r),m={stageRootPath:t,...n&&{storeLocation:n},...o&&{storeLocation:"area",marketSlug:o}},p={...l&&n&&{nearby:l}};try{let t=new N.U(e,e.getApiBase(),i);u=await t.getPageData(m,{...n&&"string"==typeof l&&{nearby:l}},d&&!h?r:void 0)}catch(a){let r=(0,x.Vf)(e.getPageRoute(g.q.DISCOVER),n?{storeLocation:n,[E.kv.STAGE_ROOT_PATH]:t||""}:{[E.kv.STAGE_ROOT_PATH]:t||""});c.applyFallbackStrategy({error:a,request:{routeParams:m,queryParams:p},page:g.q.GROUP_BOOKING,url:r,logger:i})}return u}async function k(e,t,r,a,s){let i=new S.Y({level:e.getProperty("logging.level.client")}),{storeSlug:n,marketSlug:o,nearby:l}=r,c=null;try{let r=new N.U(e,e.getApiBase(),i);c=await r.getGroupBookingSessionInfo({stageRootPath:t.stageRootPath,courseId:a,...n&&{storeLocation:n},...o&&{storeLocation:"area",marketSlug:o}},{...n&&"string"==typeof l&&{nearby:l}},s)}catch(e){i.error("Group Booking: sessionInfo error")}return c}var _=r(98689),j=r(18285),T=r(8435),w=r(15574),C=r(72679),I=r(82099),O=r(50432),A=r(24809),D=r(31966),V=r(686),P=r(78194),F=r(69476),L=r(47965),B=r(92453),U=r(17346),M=r(12877),G=r(90061),q=r(2731),W=r(10357),H=r(13171),Z=r(85075),K=r(73440),z=r(50209);let Y=e=>{let{onFieldChange:t,isTouched:r,showForm:a,initialData:s={}}=e,{firstName:i,lastName:n,email:o,phone:l}=s,c=(0,U.Z)();return(0,u.jsx)("section",{className:"section group-booking-contact-information",children:(0,u.jsx)("div",{className:"column large-7 medium-12",children:(0,u.jsxs)("fieldset",{className:"contact-information",children:[(0,u.jsx)("legend",{className:"group-booking-form-legend",children:(0,u.jsx)("h3",{className:"group-booking-form-legend-title typography-intro-elevated",children:c.value("group-booking-form.form-contact-title")})}),(0,u.jsxs)("div",{className:"group-booking-contact-information-fields row",children:[(0,u.jsx)(K.Wi,{className:"firstName column large-6 small-12",id:"firstName",name:"firstName",initialValue:i,flyout:c.value("group-booking-form.form-contact-name-first-label"),errorMessage:c.value("group-booking-form.form-contact-name-first-error-required"),onChange:t,isTouched:r,showForm:a,pattern:z.ig,maxLength:100}),(0,u.jsx)(K.Wi,{className:"lastName column large-6 small-12",id:"lastName",name:"lastName",initialValue:n,flyout:c.value("group-booking-form.form-contact-name-last-label"),errorMessage:c.value("group-booking-form.form-contact-name-last-error-required"),onChange:t,isTouched:r,showForm:a,pattern:z.ig,maxLength:100}),(0,u.jsx)(K.Wi,{className:"email column large-6 small-12",id:"email",name:"email",initialValue:o,flyout:c.value("group-booking-form.form-contact-email-label"),errorMessage:c.value("group-booking-form.form-contact-email-error-required"),onChange:t,isTouched:r,showForm:a,pattern:z.Qs,maxLength:100}),(0,u.jsx)(K.Wi,{className:"phone column large-6 small-12",id:"phone",name:"phone",type:g.EI.TEL,initialValue:l,flyout:c.value("group-booking-form.form-contact-phone-label"),errorMessage:c.value("group-booking-form.form-contact-phone-error-required"),onChange:t,isTouched:r,showForm:a,pattern:z.iw,maxLength:16})]})]})})})};var J=r(49647);let X=e=>{var t;let{onFieldChange:r,isTouched:a,numberOfAttendees:s,multiLang:i,showForm:n,initialData:o={}}=e,[l,c]=(0,h.useState)(0),[m,p]=(0,h.useState)(0),[f,g]=(0,h.useState)(o.maxAttendee||""),[v,x]=(0,h.useState)([]),[b,S]=(0,h.useState)({fieldName:_.r.MAX_ATTENDEE,fieldValue:o.maxAttendee||""}),{analyticsService:N}=(0,V.Z)(),E=(0,U.Z)(),y={"data-analytics-title":"visit apple privacy policy"},R=!!(null==i?void 0:i.secondary),k=[{label:E.value("language.".concat(i.primary)),value:"".concat(i.primary,"_").concat(i.countryCode),id:"primary"}],T=[{value:!0,label:E.value("group-booking-form.form-group-age-option-youth"),id:"youth"},{value:!1,label:E.value("group-booking-form.form-group-age-option-adults"),id:"adults"}];R&&(k.push({label:E.value("language.".concat(i.secondary)),value:"".concat(i.secondary,"_").concat(i.countryCode),id:"secondary"}),k.sort((e,t)=>e.label.toUpperCase().localeCompare(t.label.toUpperCase(),i.primary)));let w=(0,h.useCallback)(()=>{if(s){let e=[];if(l&&m){for(let t=l;t<=m;t++)e.push({value:t,label:t});x(e)}}},[s,l,m]);return(0,h.useEffect)(()=>{w()},[l,m,w]),(0,h.useEffect)(()=>{if(s){let{min:e,max:t}=s;e&&t&&(e!==l||t!==m)&&(c(e),p(t))}},[m,l,s]),(0,h.useEffect)(()=>{n===d.HIDE?(g(""),S({fieldName:_.r.MAX_ATTENDEE,fieldValue:""})):(g(o.maxAttendee||""),S({fieldName:_.r.MAX_ATTENDEE,fieldValue:o.maxAttendee||""}))},[o.maxAttendee,n]),(0,u.jsx)("section",{className:"section group-booking-group-information",children:(0,u.jsx)("div",{className:"column large-7 medium-12",children:(0,u.jsxs)("fieldset",{className:"location-time",children:[(0,u.jsx)("legend",{className:"group-booking-form-legend",children:(0,u.jsx)("h3",{className:"group-booking-form-legend-title typography-intro-elevated",children:E.value("group-booking-form.form-group-title")})}),(0,u.jsxs)("div",{className:"row guests",children:[(0,u.jsx)("div",{className:"column large-6 small-12",children:(0,u.jsx)(K.Dt,{id:"guests",name:"maxAttendee",defaultValue:E.value("group-booking-form.form-group-guest-count-label"),flyout:E.value("group-booking-form.form-group-guest-count-error-required"),errorMessage:E.value("group-booking-form.form-group-guest-count-error-required"),options:v,isTouched:a,onChange:e=>{let t=e.currentTarget.value.toString();g(t),S({fieldName:_.r.MAX_ATTENDEE,fieldValue:t}),r(e)},showForm:n,initialValue:f.toString(),resetPlaceholder:b})}),(0,u.jsx)("div",{className:"column large-6 small-12",children:""!==f&&s&&s.intermediate&&parseInt(f.toString())>s.intermediate&&(0,u.jsx)("div",{className:"form-alert",children:(0,u.jsx)("p",{children:E.value("group-booking-form.form-group-guest-count-disclaimer")})})})]}),R&&(0,u.jsx)("div",{className:"preferred-language",children:(0,u.jsx)(K.HH,{onChange:r,dataGroup:"preferredLanguage",id:"form-radio-group-language",groupLabel:E.value("group-booking-form.form-group-language-label"),data:k,i18n:E,isTouched:a,listItemClasses:"large-6 small-12",errorMessage:E.value("group-booking-form.form-group-language-error-required"),showForm:n,initialValue:o.locale,dataGroupName:"locale"})}),(0,u.jsx)("div",{className:"primary-age-group",children:(0,u.jsx)(K.HH,{onChange:r,dataGroup:"primaryAgeGroup",id:"form-radio-group-age",groupLabel:E.value("group-booking-form.form-group-age-label"),data:T,i18n:E,isTouched:a,listItemClasses:"large-6 small-12",errorMessage:E.value("group-booking-form.form-group-age-error-required"),showForm:n,initialValue:null===(t=o.isYouth)||void 0===t?void 0:t.toString(),dataGroupName:"isYouth"})}),(0,u.jsx)("div",{className:"asl-support",children:(0,u.jsx)("div",{className:"pattern-checkbox",children:(0,u.jsx)(K.h3,{name:"isASL",label:E.value("group-booking-form.form-group-asl-label"),onChange:r,showForm:n,checked:o.isASL})})}),(0,u.jsx)("div",{className:"contact-me",children:(0,u.jsx)("div",{className:"pattern-checkbox",children:(0,u.jsx)(K.h3,{name:"contactUs",label:E.value("group-booking-form.form-group-apple-contact-label"),onChange:r,showForm:n,checked:o.contactUs})})}),(0,u.jsxs)("div",{className:"signin-info",children:[(0,u.jsx)("p",{className:"typography-caption",children:E.value("group-booking-form.legal-disclaimer-1")}),(0,u.jsx)("p",{className:"typography-caption",children:(0,u.jsx)(J.r,{copy:E.value("group-booking-form.legal-disclaimer-2"),linkCopy:E.value("group-booking-form.legal-disclaimer-link"),href:"/privacy/",newTab:!0,analyticsEvent:()=>{let e=(0,j.Vx)(y["data-analytics-title"]).trackers;null==N||N.trackEvent(e)},tagProps:y})})]})]})})})},$=e=>{let{selectedSessionStoreList:t,onFieldChange:r,isTouched:a,showForm:s,initialData:i={}}=e,n=(0,U.Z)(),[o,l]=(0,h.useState)(""),[c,m]=(0,h.useState)(""),[p,f]=(0,h.useState)(""),[g,v]=(0,h.useState)([]),[x,b]=(0,h.useState)([]),[S,N]=(0,h.useState)([]),[E,y]=(0,h.useState)([]),[R,k]=(0,h.useState)([]),[j,T]=(0,h.useState)([]),w="default",[C,I]=(0,h.useState)({fieldName:_.r.STORE_NUMBER,fieldValue:w}),[O,A]=(0,h.useState)({fieldName:_.r.DATE,fieldValue:w}),[D,V]=(0,h.useState)({fieldName:_.r.START_TIME,fieldValue:w}),P=e=>{let t=e.filter(e=>e&&e.dates&&e.dates.length).map(e=>({value:e.number,label:"".concat(e.city,", ").concat(e.name)}));return Array.from(new Set(t.map(e=>e.value))).map(e=>t.find(t=>t.value===e))},F=(0,h.useCallback)(()=>{E.length&&o?b(g.filter(e=>e.number===o).map(e=>e.dates)[0]):b([])},[g,E.length,o]),L=(0,h.useCallback)(()=>{(null==x?void 0:x.length)?k(x.map(e=>({value:e.date,label:e.date}))):k([])},[x]),B=(0,h.useCallback)(()=>{R.length&&c?N(x.filter(e=>e.date===c).map(e=>e.times)[0]):N([])},[x,R.length,c]),M=(0,h.useCallback)(()=>{S.length&&T(S.map(e=>({value:e.startTime,label:e.time})))},[S]),G=e=>{let{currentTarget:{name:t,value:a}}=e,s=""===a?w:a;switch(t){case _.r.STORE_NUMBER:l(a),I({fieldName:_.r.STORE_NUMBER,fieldValue:s});break;case _.r.DATE:m(a),A({fieldName:_.r.DATE,fieldValue:s});break;case _.r.START_TIME:f(a),V({fieldName:_.r.START_TIME,fieldValue:s})}r(e)},q=(0,h.useCallback)(()=>{F(),m(""),A({fieldName:_.r.DATE,fieldValue:w})},[F]),W=(0,h.useCallback)(()=>{B(),f(""),V({fieldName:_.r.START_TIME,fieldValue:w})},[B]),H=(0,h.useCallback)(()=>{l(""),I({fieldName:_.r.STORE_NUMBER,fieldValue:""}),m(""),A({fieldName:_.r.DATE,fieldValue:w}),f(""),V({fieldName:_.r.START_TIME,fieldValue:w})},[]);return(0,h.useEffect)(()=>{s===d.HIDE&&(l(""),I({fieldName:_.r.STORE_NUMBER,fieldValue:w}))},[s]),(0,h.useEffect)(()=>{t&&t.length?(H(),v(t)):v([])},[t,H]),(0,h.useEffect)(()=>{g.length?y(P(t)):y([])},[g,t]),(0,h.useEffect)(()=>{E.length&&i.storeNumber&&g.find(e=>e.number===i.storeNumber)&&(l(i.storeNumber),I({fieldName:_.r.STORE_NUMBER,fieldValue:i.storeNumber}))},[E,i.storeNumber,g]),(0,h.useEffect)(()=>{q()},[o,q]),(0,h.useEffect)(()=>{L()},[x,L]),(0,h.useEffect)(()=>{R.length&&i.date&&x.find(e=>e.date===i.date)&&(m(i.date),A({fieldName:_.r.DATE,fieldValue:i.date}))},[R,i.date,x]),(0,h.useEffect)(()=>{W()},[c,W]),(0,h.useEffect)(()=>{M()},[S,M]),(0,h.useEffect)(()=>{j.length&&i.startTime&&S.find(e=>{var t;return e.startTime.toString()===(null===(t=i.startTime)||void 0===t?void 0:t.toString())})&&G({currentTarget:{name:_.r.START_TIME,value:i.startTime}})},[j,i.startTime,S]),(0,u.jsx)("section",{className:"section group-booking-location-time",children:(0,u.jsx)("div",{className:"column large-7 medium-12",children:(0,u.jsxs)("fieldset",{className:"location-time",children:[(0,u.jsx)("legend",{className:"group-booking-form-legend",children:(0,u.jsx)("h3",{className:"group-booking-form-legend-title typography-intro-elevated",children:n.value("group-booking-form.form-location-datetime-title")})}),(0,u.jsx)(K.Dt,{id:"location",className:"location",name:"storeNumber",defaultValue:n.value("group-booking-form.form-location-datetime-location-label"),flyout:n.value("group-booking-form.form-location-datetime-location-error-required"),errorMessage:n.value("group-booking-form.form-location-datetime-location-error-required"),options:E,isTouched:a,onChange:G,showForm:s,initialValue:o,resetPlaceholder:C}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"column large-6 small-12",children:(0,u.jsx)(K.Dt,{id:"date",className:"date",name:"date",defaultValue:n.value("group-booking-form.form-location-datetime-date-label"),flyout:n.value("group-booking-form.form-location-datetime-date-error-required"),errorMessage:n.value("group-booking-form.form-location-datetime-date-error-required"),options:R,isTouched:a,onChange:G,disabled:!o,resetPlaceholder:O,showForm:s,initialValue:c})}),(0,u.jsx)("div",{className:"column large-6 small-12",children:(0,u.jsx)(K.Dt,{id:"time",className:"time",name:"startTime",defaultValue:n.value("group-booking-form.form-location-datetime-time-label"),flyout:n.value("group-booking-form.form-location-datetime-time-error-required"),errorMessage:n.value("group-booking-form.form-location-datetime-time-error-required"),options:j,isTouched:a,onChange:G,disabled:!c,resetPlaceholder:D,showForm:s,initialValue:p.toString()})})]})]})})})};var Q=r(70972),ee=r.n(Q);r(59692);var et=r(76956),er=r(7663);let ea={STORE_NUMBER:"storeNumber",DATE:"date",START_TIME:"startTime",IS_YOUTH:"isYouth"},es={TEXT:"text",RADIO:"radio"},ei={storeNumber:"",date:"",startTime:"",firstName:"",lastName:"",email:"",phone:"",maxAttendee:"",locale:"",isYouth:"",isASL:!1,contactUs:!1,legalConsentAccepted:!1},en=(0,h.forwardRef)((e,t)=>{let{submit:r,selectedSessionId:a,selectedSessionStoreList:s,numberOfAttendees:i,showForm:n,initialFormState:o,legal:l,multiLang:c}=e,m=(0,U.Z)(),p=(0,L.Z)(),{analyticsService:f}=(0,V.Z)(),{currentLocale:g}=(0,A.Z)(),v=(0,h.useRef)(null),[x,b]=(0,h.useState)(!1),[S,N]=(0,h.useState)({sessionId:a,isTouched:!1,isValid:!1,wasSubmitError:!1,formData:{...ei,...o}}),E=(0,h.useCallback)(e=>{let t={...S.formData,...e};N(e=>({...e,formData:t}))},[S.formData]),y=(0,h.useCallback)(()=>{p.saveGroupBookingForm({firstName:S.formData.firstName,lastName:S.formData.lastName,email:S.formData.email,phone:S.formData.phone})},[p,S.formData.email,S.formData.firstName,S.formData.lastName,S.formData.phone]);(0,h.useImperativeHandle)(t,()=>({clearTargetFormValues:E,persistFormData:y}),[E,y]);let R=e=>{let{currentTarget:{name:t,type:r,checked:a,value:s},currentTarget:i}=e,n="checkbox"===r?a:"".concat(s).trim(),o=t;n||r!==es.TEXT||(n=""),r===es.RADIO&&i.dataset&&i.dataset.groupName&&(o=i.dataset.groupName),t===ea.IS_YOUTH&&"string"==typeof n&&(n=/^true/i.test(n));let l={...S.formData,locale:(null==c?void 0:c.secondary)&&!S.formData.locale?"":S.formData.locale||g.id,[o]:n};t===ea.STORE_NUMBER&&(l[ea.DATE]="",l[ea.START_TIME]=""),t===ea.DATE&&(l[ea.START_TIME]=""),!1===(0,z.Bq)(t,n)&&(l[t]="");let d=Object.keys(l).every(e=>{let t=l[e];return""!==t&&null!==t});N(e=>({...e,formData:l,isValid:d}))},k=()=>{let e=v.current,t=Object.keys(S.formData).find(e=>null===S.formData[e]||""===S.formData[e]||0===S.formData[e]),r=null==e?void 0:e.querySelector("[name=".concat(t,"]"));if(!r){let a=null==(r=null==e?void 0:e.querySelector("[data-group-name=".concat(t,"]")))?void 0:r.parentElement;t=null==a?void 0:a.dataset.group}N(e=>({...e,wasSubmitError:!0})),null==r||r.focus();let a=new j.bK().withTitle("Session Form missing one or more required attributes").addPropToTrackers("eVar152",t+" is required");null==f||f.trackEvent(a.trackers)},T=async()=>{S.isTouched||N(e=>({...e,isTouched:!0})),S.isValid&&r?await r(w(S.formData))||b(!1):(b(!1),k())},w=e=>{let t=ee()(e);for(let[e,r]of Object.entries(t))e===_.r.IS_YOUTH&&"string"==typeof r&&(t[e]=/^true/i.test(r)),e===_.r.START_TIME&&(t[e]=parseInt(r,10)),e===_.r.MAX_ATTENDEE&&(t[e]=(null==r?void 0:r.toString())||"");return t};return(0,h.useEffect)(()=>{if(n===d.SHOW&&""===S.sessionId&&N(e=>({...e,formData:{...ei,...S.formData,...o,...p.getGroupBookingForm()},sessionId:a})),n===d.HIDE&&S.wasSubmitError&&N(e=>({...e,isTouched:!1,wasSubmitError:!1})),n===d.HIDE&&""!==S.sessionId){let{firstName:e,lastName:t,email:r,phone:a}=S.formData;p.saveGroupBookingForm({firstName:e,lastName:t,email:r,phone:a}),N(()=>({isTouched:!1,wasSubmitError:!1,sessionId:"",isValid:!1,formData:{...ei,...o,...p.getGroupBookingForm()}}))}},[o,a,p,n,S.formData,S.sessionId,S.wasSubmitError]),(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"column large-12 medium-11 small-12",children:[(0,u.jsxs)("form",{className:"group-session-booking-form",ref:v,id:"group-session-booking-form",children:[(0,u.jsx)("section",{className:"section-registration-form",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("h2",{className:"typography-headline column large-8 medium-12 small-12",children:m.value("group-booking-form.form-title")})})}),(0,u.jsx)($,{onFieldChange:R,isTouched:S.isTouched,selectedSessionStoreList:s,showForm:n,initialData:S.formData}),(0,u.jsx)(Y,{onFieldChange:R,isTouched:S.isTouched,showForm:n,initialData:S.formData}),(0,u.jsx)(X,{onFieldChange:R,isTouched:S.isTouched,numberOfAttendees:i,showForm:n,initialData:S.formData,multiLang:c}),(0,u.jsx)(et.zx,{href:"#",size:et.Ph.large,className:"form-submit",disabled:x||(null==l?void 0:l.showLegal),onClick:e=>{e.preventDefault(),b(!0),T()},children:m.value("global.cta-submit")})]}),l&&(0,u.jsx)(er.C,{legal:l.legalConsentData,showLegal:l.showLegal,updateConsent:l.updateConsent,shouldStandBy:l.shouldStandBy})]})})});en.displayName="GroupBookingForm";var eo=r(19071),el=r(16799),ec=r(50403),ed=r(82092),eu=r(85710);let eh=e=>{let{session:t,pageUrl:r,store:a}=e,s=(0,U.Z)(),{accessibilityText1:i,accessibilityText2:n,duration:o,heroGallery:l,id:c,longDescription:d,moreAbout:{name:h,longDescription:m},prefix:p,talents:f,title:g}=t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eu.sY,{disableLink:!0,hideCta:!0,heroGalleryData:l}),(0,u.jsxs)("div",{className:"session-details",children:[(0,u.jsxs)("section",{className:"session-info large-10 large-offset-1",children:[(0,u.jsxs)("h2",{className:"session-info__title typography-callout",children:[(0,u.jsx)("span",{className:"typography-callout",children:p}),(0,u.jsx)("span",{children:g})]}),o&&(0,u.jsxs)("p",{className:"session-info__duration",children:[s.value("details.session-duration-label")," ",o]}),(0,u.jsx)("p",{className:"session-info__description",children:d}),(0,u.jsx)("p",{className:"session-info__accessibility",children:i}),(0,u.jsx)("p",{className:"session-info__accessibility",children:n})]}),(null==f?void 0:f.length)>0&&(0,u.jsx)(ed.M,{talents:f,schedule:{courseId:t.id||""},course:t,store:a,pageUrl:r}),h&&m&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("hr",{className:"section-separator large-10 large-offset-1","aria-hidden":"true"}),(0,u.jsxs)("section",{className:"more-about large-10 large-offset-1",children:[(0,u.jsx)("h2",{className:"more-about__title typography-tout",children:s.compileValue("details.more-about-title",{name:h})}),(0,u.jsx)("p",{className:"more-about__description typography-body-reduced",children:m})]})]})]})]})};r(88199);let em=e=>{let{session:t,store:r,pageUrl:a="",isSessionModalOpen:s,handleSessionModalClosing:i}=e;return(0,u.jsx)(ec.u_,{modalAttr:{id:"session-details-modal"},type:ec.w8.MIXED,isOpened:s,onClose:i,ariaLabel:"".concat(t.prefix," ").concat(t.title),children:(0,u.jsx)(eh,{session:t,pageUrl:a,store:r})})},ep=e=>{let{elementType:t,className:r,children:a,timeGroupOptions:s}=e,i=(0,D.Z)(),[n,o]=(0,h.useState)(null);return(0,h.useEffect)(()=>()=>{if(n){var e;i.info("Performing cleanup for node",n);let t=null===(e=n._animInfo)||void 0===e?void 0:e.controller;null==t||t.remove(),i.info("Cleanup performed successfully for node",n)}},[n]),(0,u.jsx)(t,{className:r,ref:e=>{e&&(i.info("DOM element exists and ref is set",e),i.info("Adding to group",s),eo.tL.addToTimeGroup(s,{current:e}).then(()=>{i.info("Added to group successfully with node",e)}).catch(e=>{i.error("Error applying animations with node:",e)}),o(e))},children:a})},ef=(0,h.createContext)({handleSessionModalOpen:e=>{}});function eg(e){let{sessionModal:t,children:r}=e;return(0,u.jsx)(ef.Provider,{value:t,children:r})}var ev=r(66638),ex=r(62790),eb=r(31642),eS=r(720);r(65031);let eN="selected-session",eE=e=>{let{id:t,backgroundMedia:r,title:a,prefix:s,duration:i,changeSelectedSession:n}=e,o=(0,h.useRef)(null),l=(0,h.useContext)(ef),[c,d]=(0,h.useState)(!1),m=(0,U.Z)(),p=(0,ex.BI)().GROUP_BOOKING_SESSION_CARD_IMAGE_MAPPINGS,f=new j.bK().withProp3("t@a - change session").build(),g=()=>{let e=document.activeElement;e&&e.id!=="".concat(eN,"-card-link")&&d(!1)};return(0,h.useEffect)(()=>{""!==t&&d(!0)},[t]),(0,h.useEffect)(()=>(window.addEventListener("focusin",g),()=>{window.removeEventListener("focusin",g)}),[]),(0,u.jsx)("div",{className:"".concat(eN),children:(0,u.jsxs)("div",{className:"section-content",children:[(0,u.jsx)("h2",{className:"".concat(eN,"-heading typography-headline large-centered medium-12 small-12"),children:m.value("group-booking-form.selected-session-title")}),(0,u.jsx)("div",{className:"".concat(eN,"-card column large-centered medium-12 small-12"),children:(0,u.jsx)(eb.N,{id:"".concat(eN,"-card-link"),focus:c,onClick:()=>{l.handleSessionModalOpen(t)},className:"".concat(eN,"-card-wrapper-link"),children:(0,u.jsxs)("div",{className:"tile-content-wrapper",children:[(0,u.jsx)("div",{className:"schedule-media",children:r&&(0,u.jsx)(ev.TC,{viewportImageMappings:p,viewportImageOrientationMappings:ex.jf,mediaData:r,ref:o,imageConfig:{imageClasses:"schedule-media-image"},loadImages:!0,forceImage:!0,loadOnDemand:!0})}),(0,u.jsxs)("div",{className:"schedule-caption",children:[(0,u.jsx)("p",{className:"schedule-caption-name typography-tout",children:s}),(0,u.jsx)("p",{className:"schedule-caption-description typography-tout",children:a}),(0,u.jsx)("p",{className:"schedule-caption-duration typography-tout",children:i}),(0,u.jsx)("span",{className:"schedule-caption-link typography-body-reduced",children:m.value("global.cta-see-details")})]})]})})}),(0,u.jsx)(eS.ib,{className:"".concat(eN,"__change-session-link"),isButton:!0,onClick:()=>{d(!1),n&&n("")},analyticsAttr:f,"data-analytics-title":"change session",children:m.value("group-booking-form.selected-session-back-cta")})]})})};(a=o||(o={})).TOPICS="topics",a.DURATIONS="durations",(s=l||(l={})).ADD="add",s.REMOVE="remove",s.RESET="reset",(i=c||(c={})).FIELD_TRIP="fieldtrip",i.TOPICS="topics",i.DURATIONS="durations",i.SESSION="session",i.ERROR="error";var ey=r(49737),eR=r(84772),ek=r.n(eR);r(93437);let e_=e=>{let t="session-filter-button",{active:r,id:a,name:s,buttonHandler:i}=e,n=()=>{let e=r?l.REMOVE:l.ADD;a&&i(e,a)};return(0,u.jsxs)("label",{className:ek()("".concat(t," typography-body-reduced chapternav-link"),{["".concat(t,"--active")]:r}),htmlFor:a,onKeyDown:e=>{e.keyCode===g.aT.SPACE&&(e.preventDefault(),n())},tabIndex:0,children:[(0,u.jsx)("input",{"aria-checked":r,className:"a11y",id:a,onClick:n,tabIndex:-1,type:"checkbox"}),s]})};r(89825);let ej=e=>{let{topics:t=[],durations:r=[],isFiltered:a=!1,resultsCount:s,selectedSession:i="",onFiltersChange:n}=e,c=(0,U.Z)(),[d,m]=(0,h.useState)({[o.DURATIONS]:-1,[o.TOPICS]:-1}),[p,f]=(0,h.useState)(""),g=(0,M.z)(a),v=(0,h.useRef)(null),x=(0,h.useRef)(null),b=(0,h.useRef)(null),S=1!==s?"group-booking-form.filters-results":"group-booking-form.filters-result",N=()=>({topics:t,durations:r}),E=(e,r)=>{let a=t&&t.find(e=>e.collId===r);a&&(a.active=e===l.ADD),n(N())},y=(e,t)=>{let a=t.replace("duration-",""),s=r&&r.find(e=>e.collId===a);s&&(s.active=e===l.ADD),n(N())},R=new j.bK().withProp3("t@a - reset filter").build(),k=e=>(e&&e.forEach(e=>e.active=!1),e),_=e=>{let t=[],r=[];for(let a of e)a.courseIds.length>0?t.push(a):0===a.courseIds.length&&a.active&&r.push(a);return{availableFilters:t,activeEmptyFilters:r}},T=(0,h.useCallback)(e=>{let{availableFilters:t,activeEmptyFilters:r}=_(e),a=t.map(e=>e.active).indexOf(!0),s=!1;return r.length>0&&(s=!0),{availableFilters:t,firstActiveFilterIndex:a,shouldUpdate:s}},[]);return(0,h.useEffect)(()=>{var e;null===(e=x.current)||void 0===e||e.updateElementMetrics()},[t,i]),(0,h.useEffect)(()=>{var e;null===(e=b.current)||void 0===e||e.updateElementMetrics()},[r,i]),(0,h.useEffect)(()=>{let e=T(t),s=T(r);g!==a&&m({[o.TOPICS]:e.firstActiveFilterIndex,[o.DURATIONS]:s.firstActiveFilterIndex})},[t,r,a,T,g]),(0,h.useEffect)(()=>{f(c.compileValue("group-booking-form.a11y-sessions-in-view",{number:s})),setTimeout(()=>{f("")},4e3)},[c,s]),(0,u.jsx)("div",{className:"session-filters row",children:(0,u.jsxs)("div",{className:"column large-12 small-12",children:[(0,u.jsxs)("fieldset",{className:"session-filters-list",children:[(0,u.jsx)("legend",{className:"session-filters-title",children:(0,u.jsx)("h3",{className:"typography-label",children:c.value("group-booking-form.filters-topics-title")})}),(0,u.jsx)(ey.v,{ref:x,centerItemIndex:d[o.TOPICS],children:(0,u.jsxs)("div",{className:"chapternav-wrapper",children:[(0,u.jsx)("div",{className:"hiding-scroll-container",children:(0,u.jsx)("div",{className:"chapternav-items",ref:v,children:t.map(e=>{let{active:t,collId:r="",courseIds:a,name:s}=e;if(a.length>0)return(0,u.jsx)(e_,{active:t||!1,buttonHandler:E,id:r,name:s},r)})})}),(0,u.jsxs)("div",{className:"chapternav-paddles",children:[(0,u.jsx)("button",{className:"chapternav-paddle chapternav-paddle-left","aria-hidden":"true",disabled:!0}),(0,u.jsx)("button",{className:"chapternav-paddle chapternav-paddle-right","aria-hidden":"true",disabled:!0})]})]})})]}),(0,u.jsxs)("fieldset",{className:"session-filters-list",children:[(0,u.jsx)("legend",{className:"session-filters-title",children:(0,u.jsx)("h3",{className:"typography-label",children:c.value("group-booking-form.filters-duration-title")})}),(0,u.jsx)(ey.v,{ref:b,centerItemIndex:d[o.DURATIONS],children:(0,u.jsxs)("div",{className:"chapternav-wrapper",children:[(0,u.jsx)("div",{className:"hiding-scroll-container",children:(0,u.jsx)("div",{className:"chapternav-items",children:r.map(e=>{let{active:t,collId:r,courseIds:a,name:s}=e;if(a.length>0)return(0,u.jsx)(e_,{active:t||!1,buttonHandler:y,id:"duration-".concat(r),name:s},"duration-".concat(r))})})}),(0,u.jsxs)("div",{className:"chapternav-paddles",children:[(0,u.jsx)("button",{className:"chapternav-paddle chapternav-paddle-left","aria-hidden":"true",disabled:!0}),(0,u.jsx)("button",{className:"chapternav-paddle chapternav-paddle-right","aria-hidden":"true",disabled:!0})]})]})})]}),(0,u.jsxs)("h2",{className:"session-filters-footer typography-body-reduced",children:[c.compileValue(S,{count:s}),a&&(0,u.jsx)("button",{name:"reset-button",className:"session-filters-reset",onClick:()=>{let e=v.current&&v.current.querySelectorAll("label")[0];k(t),k(r),n(N()),e&&e.focus()},"data-analytics-click":R,"data-analytics-title":"reset filter",children:c.value("global.cta-reset")})]}),(0,u.jsx)("span",{className:"a11y","aria-live":"polite",children:p})]})})};var eT=r(16796);r(77158),r(12452);let ew=(0,h.forwardRef)((e,t)=>{let{backgroundMedia:r,prefix:a,description:s,id:i,isActive:n,showVideo:o,onSelectedSession:l,focus:c}=e,d=(0,U.Z)(),[m,p]=(0,h.useState)(n?"active":""),f=(0,h.useContext)(ef),g=()=>{f.handleSessionModalOpen(i)},v=()=>{p("active")},x=new j.bK().withProp3("t@a - see session details").withEvar81(a).withEvar82(s).build();return(0,h.useEffect)(()=>{p(n?"active":"")},[n]),(0,u.jsxs)("div",{className:"group-booking-session-card",children:[(0,u.jsx)("h3",{children:(0,u.jsxs)(eb.N,{className:"group-booking-session-card-image-link",ariaLabelledBy:"session-card-title-".concat(i," session-card-paragraph-").concat(i),tagProps:{role:"button"},onClick:g,children:[r&&(0,u.jsx)("div",{className:"image-wrapper",children:(0,u.jsx)(ev.TC,{viewportImageMappings:ev.xY.GROUP_BOOKING_SESSION_CARD_IMAGE_MAPPINGS,viewportInlineVideoMappings:ev.h2.GROUP_BOOKING_SESSION_CARD_VIDEO_MAPPINGS,viewportImageOrientationMappings:ex.HZ,mediaData:r,imageConfig:{imageClasses:"group-booking-session-card-image"},videoConfig:{preload:!0,loop:!0,autoplay:!0,className:"group-booking-session-card-image"},loadImages:!0,loadOnDemand:!0,forceImage:!o})}),(0,u.jsx)("span",{id:"session-card-title-".concat(i),className:"group-booking-session-card-title typography-tout",children:a}),(0,u.jsx)("span",{id:"session-card-paragraph-".concat(i),className:"group-booking-session-card-paragraph typography-tout",children:s})]})}),(0,u.jsx)("div",{className:"select-session",children:(0,u.jsxs)(eb.N,{ariaLabel:"".concat(d.value("global.cta-select")," - ").concat(a," - ").concat(s),className:"button button-base button-secondary ".concat(m),focus:c,isButton:!0,onClick:()=>{l(i),v()},children:[(0,u.jsx)("span",{className:"inactive-text",children:d.value("global.cta-select")}),(0,u.jsxs)("span",{className:"active-text",children:[(0,u.jsx)("i",{className:"icon icon-check"}),d.value("global.cta-selected")]})]})}),(0,u.jsxs)(eS.ib,{isButton:!0,onClick:g,className:"typography-body-reduced details-cta",analyticsAttr:x,children:[d.value("global.cta-see-details"),(0,u.jsx)("span",{className:"a11y",children:d.compileValue("global.cta-see-details-a11y",{detail:a})})]})]})});ew.displayName="SessionCardWithViewportEmitter";let eC=e=>{let t=eA(Object.keys(e)),r=Object.entries(e).filter(e=>{var t;let[r,a]=e;return null===(t=a.backgroundMedia)||void 0===t?void 0:t.ambientVideo}).map(e=>e[0]),a=[];return t.forEach(e=>{let t=eI(eO(e.length),r.filter(t=>e.indexOf(t)>-1));a.push(...t)}),a},eI=(e,t)=>{let r=[],a=0;for(;a<e&&t.length>0;){let e=t.splice(Math.floor(Math.random()*t.length),1)[0];r.push(e),a++}return r},eO=e=>{let t=Math.floor(e/10),r=e-10*t,a=4*t;return r&&r<=3?a+=1:r&&r<=7?a+=2:r&&r<=9&&(a+=4),a},eA=e=>{let t=[],r=0,a=e.length;for(;r<a&&a>0;)r%10==0&&t.push([]),t[t.length-1].push(e[r++]);return t},eD=(e,t,r)=>Object.entries(e).sort((e,a)=>e[0]===r?-1:a[0]===r?1:t.indexOf(e[0])<t.indexOf(a[0])?-1:1),eV=e=>{let{selectedSession:t,sessions:r,sessionOrderList:a,handleSelectedSession:s,shouldFocusSessionCard:i}=e,n=(0,h.useRef)(null),o=Object.keys(r).length,[l,c]=(0,h.useState)(o<=10?o:10),[d,m]=(0,h.useState)(!1),[p,f]=h.useState([]),[g,v]=h.useState(""),x=(0,M.z)(o),b=(0,M.z)(t),S=(0,U.Z)(),N=ek()("group-booking-session-list",l<=0&&"group-booking-session-list-error");(0,h.useEffect)(()=>{d&&l<o&&c(l+10),m(!1),(x||0===x)&&x!==o&&c(o<=10?o:10),eo.tL.initiateAnimSystemForceUpdate()},[l,d,x,o]),(0,h.useEffect)(()=>{f(e=>Array(o).fill(void 0).map((t,r)=>e[r]||(0,h.createRef)()))},[o]),(0,h.useEffect)(()=>{""!==b&&v(null!=b?b:"")},[b,t]);let[E,y]=(0,h.useState)([]);(0,h.useEffect)(()=>{y(eC(r))},[r]);let R=(e,t)=>{let r="session-item-animation-".concat(t);return(0,u.jsx)(eT.ScrollEventTrigger,{config:[{eventName:r,start:"t-100vh+85px",eventType:eo.Jl.INSTANT,callback:()=>{let e=n&&n.current,r=e&&e.children&&e.children[t];r&&!r.classList.contains("active")&&r.classList.add("active")},once:!0}],className:"outer-anim-system-wrapper group-booking-animation-wrapper group-booking-session-card-wrapper",children:e},r)};return(0,u.jsx)(eT.ScrollEventTrigger,{config:{eventName:"session-cards",start:"b-200vh",callback:()=>m(!0),eventType:eo.Jl.INSTANT,anchors:["#group-booking-session-cards"]},children:(0,u.jsxs)("div",{ref:n,id:"group-booking-session-cards",className:N,children:[o>0&&eD(r,a,g).slice(0,l).map((e,r)=>{let[a,n]=e,{backgroundMedia:o,prefix:l="",name:c="",collId:d="",title:h=""}=n,m=E.indexOf(a)>-1,f=(0,u.jsx)(ew,{ref:p[r],backgroundMedia:o,onSelectedSession:s,prefix:l,description:h,id:a,showVideo:m,slug:d,title:c,focus:!!g&&0===r&&i,isActive:t===a});return m?R((0,u.jsx)(eT.ScrollEventTrigger,{config:eT.ScrollEventTrigger.DEFAULTS.PLAY_PAUSE_VIEWPORT,children:f},a),r):R((0,u.jsx)("div",{children:f},a),r)}),o<=0&&(0,u.jsx)("div",{className:"group-booking-session-list--error",children:(0,u.jsx)("p",{children:S.value("group-booking-form.filters-error-no-results")})})]})})},eP={duration:.5,easeFunction:"cubic-bezier(.35,.45,.35,1)",reverseDelay:.1,slideDistance:"50px"},eF="group-booking-page",eL="".concat(eF,"-transition"),eB=eP.duration+eP.reverseDelay,eU={...eP,forward:{start:1e-4,half:.5*eP.duration,end:eP.duration},reverse:{start:eB,half:eB+.5*eP.duration,end:eB+eP.duration}},eM=[{name:eL,keyframes:[{start:eU.reverse.half-.01,end:eU.reverse.half,y:[0,"-".concat(eU.slideDistance)],opacity:[1,0],easeFunction:eU.easeFunction},{start:eU.reverse.half,end:eU.reverse.end,y:["-".concat(eU.slideDistance),0],opacity:[0,1],easeFunction:eU.easeFunction}]}],eG=[{name:eL,keyframes:[{start:0,end:eU.forward.half,opacity:[0,1],easeFunction:eU.easeFunction},{start:eU.forward.half,end:eU.forward.end,opacity:[1,0],easeFunction:eU.easeFunction},{start:eU.reverse.start,end:eU.reverse.half,opacity:[0,1],easeFunction:eU.easeFunction},{start:eU.reverse.half,end:eU.reverse.end,opacity:[1,0],easeFunction:eU.easeFunction}]}],eq=[{name:eL,keyframes:[{start:0,end:eU.forward.half,y:[0,"-".concat(eU.slideDistance)],opacity:[1,0],easeFunction:eU.easeFunction},{start:eU.reverse.half,end:eU.reverse.end,y:["-".concat(eU.slideDistance),0],opacity:[0,1],easeFunction:eU.easeFunction}]}],eW=[{name:eL,keyframes:[{start:eU.forward.half,end:eU.forward.end,y:[eU.slideDistance,0],opacity:[0,1],easeFunction:eU.easeFunction},{start:eU.reverse.start,end:eU.reverse.half,y:[0,eU.slideDistance],opacity:[1,0],easeFunction:eU.easeFunction}]}];r(95731);let eH=e=>{let{title:t,filters:r,selectedSession:a,courseList:s,updateUrlOnFiltersChange:i,updateUrlOnSessionChange:n,shouldFocusSessionCard:o,handleSessionModalOpen:l}=e,c=s.length>0;return(0,u.jsx)(u.Fragment,{children:c&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"row ".concat(eF,"__filter-title"),children:(0,u.jsx)("div",{className:"column large-8 medium-12 small-10 large-centered small-uncentered justify-content-center",children:(0,u.jsx)("h2",{className:"typography-headline",children:t})})}),(0,u.jsx)("div",{className:"".concat(eF,"__filter-container"),children:(0,u.jsx)(ej,{durations:r.durations,isFiltered:r.isFiltered,resultsCount:Object.keys(r.courses||{}).length,topics:r.topics,selectedSession:a,onFiltersChange:i})}),(0,u.jsx)(eg,{sessionModal:{handleSessionModalOpen:l},children:(0,u.jsx)(eV,{selectedSession:a,sessions:r.courses||{},sessionOrderList:s,handleSelectedSession:n,shouldFocusSessionCard:o})})]})})},eZ={REDIRECTED_FROM_DEPRECATED_PAGE:"REDIRECTED_FROM_DEPRECATED_PAGE",GENERIC_ERROR:"GENERIC_ERROR",UNAVAILABLE:"UNAVAILABLE"},eK={[eZ.REDIRECTED_FROM_DEPRECATED_PAGE]:{headline:"group-booking-form.field-trip-redirect-title",description:"group-booking-form.field-trip-redirect-description"},[eZ.GENERIC_ERROR]:{headline:"group-booking-form.form-error-generic-title",description:"group-booking-form.form-error-generic-description"},[eZ.UNAVAILABLE]:{headline:"group-booking-form.form-error-generic-title",description:"group-booking-form.form-error-session-not-available-description"}};r(50056);let ez=e=>{let{isOpened:t,onClose:r,notification:a}=e,s=(0,U.Z)();return(0,u.jsx)(ec.u_,{type:ec.w8.STANDARD,classList:["group-booking-redirect-modal"],isOpened:t,onClose:r,children:t&&a&&(0,u.jsxs)("div",{className:"group-booking-redirect-modal__content",children:[(0,u.jsx)("h2",{className:"typography-headline-reduced",children:s.value(eK[a].headline)}),(0,u.jsx)("p",{className:"typography-body group-booking-redirect-modal__body",children:s.value(eK[a].description)}),(0,u.jsx)("div",{className:"group-booking-redirect-modal__button-bar",children:(0,u.jsx)("button",{className:"pill pill-large",onClick:r,children:s.value("global.cta-ok")})})]})})};var eY=r(75572),eJ=r(93462),eX=r(5647);function e$(e){var t,r;let{searchParams:a,multiLang:s}=e,[i,n]=(0,h.useState)(a),{pageData:l,setPageData:c}=(0,O.Z)(),[d,p]=(0,h.useState)(!1),v=(0,I.Z)(),{currentLocale:S}=(0,A.Z)(),N=(0,D.Z)(),y=(0,U.Z)(),K=(0,q.Z)(),{analyticsService:z}=(0,V.Z)(),{trackUserLocationEvent:Y,trackPageLoad:J}=(0,P.Z)(),X=(0,m.useRouter)(),$=(0,F.Z)(),Q=(0,m.usePathname)(),ee=(0,L.Z)(),et=new URLSearchParams((0,m.useSearchParams)().toString());et.delete(E.kv.STAGE_ROOT_PATH),et.delete(E.kv.STORE_SLUG);let ea=(0,h.useRef)(null),[es,ec]=(0,h.useState)(et.get(_.b.SESSION)||""),[ed,eu]=(0,h.useState)(a.marketSlug),[eh,ef]=(0,h.useState)(a.storeSlug),[ev,ex]=(0,h.useState)(a.nearby),eb=(0,b.s)({storeSlug:eh,marketSlug:ed}),{topics:eN=[],durations:ey=[],coursesPreview:eR={},courseList:ek=[]}=l,e_=l.userLocation,{locationServiceData:ej}=(0,G.Z)(a,e_),[eT,ew]=(0,h.useState)(ej);(0,h.useEffect)(()=>{ej&&ew(ej)},[ej]);let eC=(0,H.Z)(eb,d,l.heroGallery),eI={id:"",title:"",duration:"",legalConsent:{}},[eO,eA]=(0,h.useState)(!1),[eD,eV]=(0,h.useState)(""),[eB,eU]=(0,h.useState)("show"),eK="true"===et.get(_.b.FIELD_TRIP)?eZ.REDIRECTED_FROM_DEPRECATED_PAGE:void 0,[e$,eQ]=(0,h.useState)(eK),e0=(0,M.z)(l),e1=(0,M.z)(e_),e2=(0,M.z)(ek),[e3,e7]=(0,h.useState)(eI),[e5,e8]=(0,h.useState)(!1),[e9,e6]=(0,h.useState)({topics:[],durations:[],courses:{...eR},isFiltered:!1}),[e4,te]=(0,h.useState)([]),[tt,tr]=(0,h.useState)("hide"),[ta,ts]=(0,h.useState)(""),[ti,tn]=(0,h.useState)(!1),[to,tl]=(0,h.useState)(!1),tc=(0,h.useRef)(),td=(0,h.useRef)(),tu=(0,h.useRef)(null),th=eP.duration+eP.reverseDelay,tm={...eP,forward:{start:1e-4,half:.5*eP.duration,end:eP.duration},reverse:{start:th,half:th+.5*eP.duration,end:th+eP.duration}},tp=ek.length>0,[tf,tg]=(0,h.useState)({courseStoreSessionTimes:[],numberOfAttendees:{}}),tv=null===(t=l.coursesPreview)||void 0===t?void 0:t[eD],tx=(null==e_?void 0:e_.storeNum)||"",tb=null===(r=l.stores)||void 0===r?void 0:r[tx],[tS,tN]=(0,h.useState)(ee.getGroupBookingForm()),[tE,ty]=(0,h.useState)(),[tR,tk]=(0,h.useState)(!1),[t_,tj]=(0,h.useState)(!1),tT={[eZ.REDIRECTED_FROM_DEPRECATED_PAGE]:{headline:"group-booking-form.field-trip-redirect-title",description:"group-booking-form.field-trip-redirect-description"},[eZ.GENERIC_ERROR]:{headline:"group-booking-form.form-error-generic-title",description:"group-booking-form.form-error-generic-description"},[eZ.UNAVAILABLE]:{headline:"group-booking-form.form-error-generic-title",description:"group-booking-form.form-error-session-not-available-description"}},tw=(0,B.Z)(S),tC=new T.p(v,S,N,z),tI=new w.V6(tC,N),tO=(0,Z.Z)(g.q.GROUP_BOOKING,{updatePageData:async e=>{var t;let{routeParams:r,queryParams:a,location:s,refreshPage:i}=e;if(i)return;let{stageRootPath:n="",storeLocation:o}=r,{nearby:l}=a;if(s){ef(""),ex(""),eu(""),ew({userLocation:s}),p(!0);return}let d=await R(v,n,s||(null!==(t=null==eT?void 0:eT.userLocation)&&void 0!==t?t:{}),{storeSlug:o,nearby:l},{redirect:e=>{X.push(e)}});d&&(c(d),ef(o),ex(l),eu(""))},locationUpdateStrategy:el.IY}),tA=(0,h.useCallback)(()=>{let e=[];return Object.values(tf.courseStoreSessionTimes).forEach(t=>{e.push(t)}),e},[tf.courseStoreSessionTimes]),tD=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(tE&&e){let t=await tE(e);return tk(t),t}return tk(!1),tj(t),!1},tV=async function(e){var t;let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(eb&&!d)return;let a=null!==(t=null==eT?void 0:eT.userLocation)&&void 0!==t?t:ee.getUserLocation();if(ec(e),""!==e){let t=await k(v,S,{storeSlug:eh,nearby:ev,marketSlug:ed},e,a);if(t){let{courseStoreSessionTimes:a,numberOfAttendees:s}=t;tg({courseStoreSessionTimes:a||[],numberOfAttendees:s||{}}),e7({...eR[e],id:e}),r&&tq()}else tz(""),eQ(eZ.UNAVAILABLE)}else te([]),r&&tq()},tP=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(async r=>{let a=""!==e3.id&&e3.id||l.queryParamSessionId,s=l.coursesPreview[a],i=await tI.getUserInformation(),n=i&&i.isSuccess,o=(0,er.J)(s.legalConsent)&&!t,d=new j.bK().withTitle("Submit Group Session Form").withProp3("t@a - submit reg").withEvar47(n?j.S6.IDMS:j.S6.GUEST).withEvar80(e.storeNumber).withEvar81(s&&s.prefix).withEvar82(s&&s.name).withEvar83(new Date(e.startTime).toUTCString());if(n){if(o)ty(()=>async t=>await tP(e,t)),tk(!0),r(!1);else{let{prsId:n}=i;null==z||z.trackEvent(d.trackers),delete e[_.r.DATE];let{reservation:o}=await tI.createReservation({templateId:a,dsId:n,payload:{...e,legalConsentAccepted:t}});if((null==o?void 0:o.status)&&o.status===g.Jr.RSVP){c(e=>({...e,reservation:o}));let e=(0,x.Vf)(v.getPageRoute(g.q.GROUP_BOOKING_EVENT),{stageRootPath:S.urlStageRootPath,courseSlug:s.collId,scheduleId:o.id}),t="sn=".concat(o.storeNumber);X.push("".concat(e,"?").concat(t)),r(!0)}else if(null==o?void 0:o.status){eQ(eZ[o.status]||eZ.GENERIC_ERROR);let{storeNum:e}=e_,t=(tT[eZ[o.status]]||tT[eZ.GENERIC_ERROR]).headline,r=new j.bK().withTitle(y.value(t)).withProp3("t@a - notification modal").withEvar80(e).withEvar81(s&&s.prefix).withEvar82(s&&s.name);null==z||z.trackEvent(r.trackers)}ee.removeGroupBookingForm(),r(!1)}}else ee.saveGroupBookingForm(e),tw.redirectToIDMS("",!0),r(!0)})},tF=(e,t)=>{let r=e.getBoundingClientRect().top;$.windowScrollToY(r,{withAnimation:!0,duration:t,offset:0})},tL=()=>{var e,t,r,a,s,i,n,o,l,c,d,u,h;tc.current||(tc.current=eo.tL.timeGroups.get(eL));let m=document.querySelector(".".concat(eF,"__sessions")),p=document.querySelector(".".concat(eF,"__intro")),f={};null===(e=tc.current)||void 0===e||e.addKeyframe(f,{start:tm.forward.start,event:"forward:start"}),null===(t=tc.current)||void 0===t||t.addKeyframe(f,{start:tm.forward.half,event:"forward:half"}),null===(r=tc.current)||void 0===r||r.addKeyframe(f,{start:tm.forward.end,event:"forward:end"}),null===(a=tc.current)||void 0===a||a.addKeyframe(f,{start:tm.reverse.start,event:"reverse:start"}),null===(s=tc.current)||void 0===s||s.addKeyframe(f,{start:tm.reverse.half,event:"reverse:half"}),null===(i=tc.current)||void 0===i||i.addKeyframe(f,{start:tm.reverse.end,event:"reverse:end"}),td.current=null===(n=tc.current)||void 0===n?void 0:n.getControllerForTarget(f),null===(o=td.current)||void 0===o||o.on("forward:start",()=>tU()),null===(l=td.current)||void 0===l||l.on("forward:half",()=>tM(m)),null===(c=td.current)||void 0===c||c.on("forward:end",()=>tG()),null===(d=td.current)||void 0===d||d.on("reverse:start",()=>tU()),null===(u=td.current)||void 0===u||u.on("reverse:half",()=>tM(p,!0)),null===(h=td.current)||void 0===h||h.on("reverse:end",()=>tG(!0))},tB=()=>{var e,t;null===(e=tc.current)||void 0===e||e.progress(0),null===(t=td.current)||void 0===t||t.remove(),eU("show"),tr("hide")},tU=()=>{tn(!0),ts("show")},tM=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=tc.current)||void 0===t||t.paused(!0),r?(e7(eI),eU("show"),tr("hide")):(eU("hide"),tr("show")),tF(e,0),e8(!0)},tG=function(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];tn(!1),ts("hide"),null===(e=tc.current)||void 0===e||e.paused(!0),r&&(null===(t=tc.current)||void 0===t||t.progress(0)),tl(!0)},tq=()=>{var e;tc.current||(tc.current=eo.tL.timeGroups.get(eL)),null===(e=tc.current)||void 0===e||e.play()},tW=()=>{let[e,t]=document.location.href.split("?"),r=new URLSearchParams(t),a=r.get(_.b.SESSION)||"",s=a!==(e3&&e3.id);if(r.get(_.b.ERROR)){eQ(eZ.UNAVAILABLE),r.delete(x.az.ERROR);let t=r.toString();window.history.replaceState({},"","".concat(e).concat(t?"?"+t:""))}tH(),s&&tV(a)},tH=()=>{let e;let t=(e,t)=>{let r=et.get(t),a=r?new Set(r.split(",")):new Set,s=new Set,i=a.size>0,n=[];return e.forEach(e=>{let t=a.has(e.collId);n.push({...e,active:t}),t&&e.courseIds.forEach(e=>s.add(e))}),{currentFilters:n,coursesSelectedByFilter:s,hasSelected:i}},r=t(eN,o.TOPICS),a=t(ey,o.DURATIONS),s={...eR},i=()=>{e&&Object.keys(s).forEach(t=>{e.has(t)||delete s[t]})};r.hasSelected&&a.hasSelected?(e=new Set,Array.from(r.coursesSelectedByFilter.values()).forEach(t=>{a.coursesSelectedByFilter.has(t)&&e.add(t)}),i()):(r.hasSelected||a.hasSelected)&&(e=new Set([...r.coursesSelectedByFilter.values(),...a.coursesSelectedByFilter.values()]),i());let n=!!Object.values(r.currentFilters).find(e=>e.active)||!!Object.values(a.currentFilters).find(e=>e.active);e6({topics:r.currentFilters,durations:a.currentFilters,courses:s,isFiltered:n})},tZ=(0,h.useCallback)(()=>{if(eh&&(0,x.c1)(eh)){var e;let t="true"===(0,x.ce)(x.az.NEAR_BY),r=K.getStoreByStoreSlug(S.stageRootPath,eh);!t&&r&&(null===(e=r.store)||void 0===e?void 0:e.storeNum)&&tN({...ee.getGroupBookingForm(),storeNumber:r.store.storeNum})}},[K,S.stageRootPath,ee,eh]),tK=e=>{eV(e),eA(!0)},tz=e=>{if(""!==e){var t;et.set(_.b.SESSION,e);let r=e9&&e9.courses&&e9.courses[e],a={...ei,...ee.getGroupBookingForm()},s=new j.bK().withTitle("Select Session with filters").withProp3("t@a - select group session").withEvar80(tx).withEvar81(r&&r.prefix).withEvar82(r&&r.name);null==z||z.trackEvent(s.trackers),null===(t=tu.current)||void 0===t||t.clearTargetFormValues(a)}else et.delete("session");window.history.pushState({},"","".concat(Q,"?").concat(et.toString())),tW()},tY=()=>{var e,t,r,s,i,o;let l=new URLSearchParams(document.location.search);n({...a,...Object.fromEntries(l),session:null!==(s=null===(e=l.get(_.b.SESSION))||void 0===e?void 0:e.toString())&&void 0!==s?s:"",topics:null!==(i=null===(t=l.get(_.b.TOPICS))||void 0===t?void 0:t.toString())&&void 0!==i?i:"",durations:null!==(o=null===(r=l.get(_.b.DURATIONS))||void 0===r?void 0:r.toString())&&void 0!==o?o:""})};(0,h.useEffect)(()=>{te(tA())},[tf.courseStoreSessionTimes,te,tA]);let tJ=(0,W.Z)(eb,d);(0,h.useEffect)(()=>{let e=""===es&&"show"===tt,t=""!==es&&"hide"===tt;to&&(e||t)&&tV(es),to&&!ti&&(tw&&tw.validateReservationRedirect("",et.get(C.cf.AUTH_TOKEN)||"")&&(tN(ee.getGroupBookingForm()),ee.removeGroupBookingForm(),tP(tS)),tl(!1))},[to]),(0,h.useEffect)(()=>{if(tc.current||(tc.current=eo.tL.timeGroups.get(eL)),ti&&eB!==tt){var e;null===(e=tc.current)||void 0===e||e.play()}}),(0,h.useEffect)(()=>{i.session!==es&&tW()},[i]),(0,h.useEffect)(()=>{let e=!1;return eb&&(null==eT?void 0:eT.userLocation)&&async function(t){let r=await R(v,S.stageRootPath,t,{},{redirect:e=>{X.push(e)}});!e&&r&&(c(r),p(!0))}(eT.userLocation),()=>{e=!0}},[v,X,S,null==eT?void 0:eT.userLocation,c,eb]),(0,h.useEffect)(()=>(tL(),window.onpopstate=()=>setTimeout(()=>{tY()},0),()=>{window.onpopstate=null,tB()}),[]),(0,h.useEffect)(()=>{(!eb||eb&&d)&&(Y(l.userLocation),J("today - groups"))},[l.userLocation,d,eb,J,Y]),(0,h.useEffect)(()=>{if((0,x.c1)(eh)){let e=K.getStoreByStoreSlug(S.stageRootPath,eh);(0,x.W9)(Object({...e.store}),N)}else(0,x.py)(N)},[K,S.stageRootPath,N,eh]),(0,h.useEffect)(()=>{var e,t;if(f()(e0,l))return;let r=new URLSearchParams(document.location.search).get(_.b.SESSION)||"";if(!r)return;let a={...ei,...ee.getGroupBookingForm()};(null==l?void 0:null===(e=l.reservation)||void 0===e?void 0:e.status)===g.Jr.RSVP||null===(t=tu.current)||void 0===t||t.clearTargetFormValues(a),ec(r),tV(r,"hide"===tt)},[l,tt]),(0,h.useEffect)(()=>{let e=(null==e1?void 0:e1.storeNum)!==e_.storeNum,t=e2&&!f()(e2,ek);(e||t)&&tH()},[e_,ek]),(0,h.useEffect)(()=>{tZ()},[e3,tZ]),(0,h.useEffect)(()=>{e5&&e8(!1)},[e5]),(0,h.useEffect)(()=>{"hide"===tt&&""!==es&&tN(ee.getGroupBookingForm())},[es,tt,ee]);let tX=(0,eX.N)(eY.i);return(0,u.jsxs)(u.Fragment,{children:[l.heroGallery&&eC?(0,u.jsx)(eS.e7,{heroGalleryData:l.heroGallery,disableLink:!0,useHeroTag:!0}):(0,u.jsx)("div",{className:"hero__gallery loading","aria-hidden":"true"}),(0,u.jsx)(eo.tL,{children:(0,u.jsxs)("div",{className:"".concat(eF,"__content"),children:[(0,u.jsx)(ep,{className:"".concat(eF,"__intro"),elementType:"div",timeGroupOptions:eM,children:(0,u.jsx)("div",{className:"section-content",children:(0,u.jsxs)("div",{className:"row page-title__header",children:[(0,u.jsxs)("div",{className:"column large-8 small-10 large-centered",children:[(0,u.jsx)("h1",{className:"typography-headline-elevated",children:l.longDescription}),(0,u.jsx)("p",{className:"typography-headline-description page-title__header-description",children:l.mediumDescription})]}),tJ&&(0,u.jsx)("div",{className:"page-title__location-modal column large-8 small-10 large-centered typography-eyebrow-elevated",children:(0,u.jsx)(tX,{resetAccessibilityFocusTargetId:"#current-location-button",resetFocusTabIndexToZero:!0,userLocation:e_,locationUpdateStrategy:tO,shouldConcreteStoreBeSelected:(0,x.c1)(eh),ref:ea})})]})})}),!tp&&(0,u.jsx)(eJ.N,{headlineI18nKey:"error.no-sessions-here-try-store",onChangeLocationClick:()=>{var e;return null===(e=ea.current)||void 0===e?void 0:e.showModal()},displayLink:tJ,page:g.q.GROUP_BOOKING}),(0,u.jsx)(ep,{elementType:"div",className:"smokescreen ".concat(ta),timeGroupOptions:eG}),(0,u.jsxs)("div",{className:"".concat(eF,"__sessions"),children:[(0,u.jsx)(ep,{elementType:"section",className:"".concat(eF,"__sessions__list-container ").concat(eB),timeGroupOptions:eq,children:(0,u.jsxs)("div",{className:"section-content",children:[(0,u.jsx)(eH,{title:y.value("group-booking-form.filters-title"),filters:e9,selectedSession:e3.id,courseList:ek,updateUrlOnFiltersChange:e=>{let t=(e,t)=>{let r=e.filter(e=>e.active).map(e=>e.collId).join(",");r?et.set(t,r):et.delete(t)};t(e.topics||[],_.b.TOPICS),t(e.durations||[],_.b.DURATIONS),tH();let r="".concat(Q).concat(et.toString().length>0?"?":"").concat(et.toString());window.history.pushState({},"","".concat(r))},updateUrlOnSessionChange:tz,shouldFocusSessionCard:e5,handleSessionModalOpen:tK}),tv&&tb&&(0,u.jsx)(em,{isSessionModalOpen:eO,handleSessionModalClosing:()=>eA(!1),session:tv,store:tb})]})}),(0,u.jsxs)(ep,{elementType:"section",className:"".concat(eF,"__sessions__selected-container ").concat(tt),timeGroupOptions:eW,children:[e3&&(0,u.jsx)("section",{className:"".concat(eF,"__selected-session"),children:(0,u.jsx)(eg,{sessionModal:{handleSessionModalOpen:tK},children:(0,u.jsx)(eE,{backgroundMedia:e3.backgroundMedia,id:e3.id,prefix:e3.prefix,title:e3.title,duration:e3.duration,changeSelectedSession:tz})})}),(0,u.jsx)("section",{className:"".concat(eF,"__form-container"),children:(0,u.jsx)("div",{className:"section-content",children:e3&&(0,u.jsx)(en,{initialFormState:tS,selectedSessionId:e3.id,selectedSessionStoreList:e4,submit:tP,showForm:tt,multiLang:s,ref:tu,numberOfAttendees:tf.numberOfAttendees,legal:e3.legalConsent&&{legalConsentData:e3.legalConsent,showLegal:tR,updateConsent:tD,shouldStandBy:t_}})})})]})]})]})}),(0,u.jsx)(ez,{isOpened:!!e$,onClose:()=>{eQ(void 0),e$===eZ.UNAVAILABLE&&tz("")},notification:e$})]})}(n=d||(d={})).SHOW="show",n.HIDE="hide"},49737:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var a=r(57437),s=r(2265),i=r(88632);r(8345);let n=(0,s.forwardRef)((e,t)=>{let{itemsSelector:r=".chapternav-items",itemSelector:n=".chapternav-link",centerItemIndex:o,children:l}=e,c=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(null);function h(){d.current&&d.current._wrapper&&d.current._updateElementMetrics()}function m(){return u.current?{wrapperWidth:u.current.offsetWidth,contentWidth:u.current.scrollWidth}:null}return(0,s.useImperativeHandle)(t,()=>({updateElementMetrics:h,getChapterNavDimensions:m}),[]),(0,s.useEffect)(()=>{let e=i.G.getChapternavModule();return d.current=new e(c.current,{itemsSelector:r,itemSelector:n}),r&&c.current&&(u.current=c.current.querySelector(r)),()=>{d.current&&d.current.destroy()}},[]),(0,s.useEffect)(()=>{if(o&&o>-1&&c.current&&d.current){let e=c.current.querySelectorAll("".concat(d.current._options.itemsSelector," ").concat(d.current._options.itemSelector))[o];d.current.centerItem(e,!1)}},[o]),(0,a.jsx)("div",{className:"chapternav",ref:c,children:l})});n.displayName="ChapterNav"},64551:function(e,t,r){"use strict";r.r(t),r.d(t,{Breadcrumb:function(){return i}});var a=r(2265),s=r(13947);let i=e=>{let{title:t,params:r}=e,{setTitle:i,setParams:n}=(0,s.Z)();return(0,a.useEffect)(()=>(i(t),()=>{i(null)}),[]),(0,a.useEffect)(()=>(n(r),()=>{n(void 0)}),[r]),null}},66806:function(e,t,r){"use strict";r.d(t,{H:function(){return d}});var a=r(33509),s=r(57437),i=r(84772),n=r.n(i),o=r(2265),l=r(35088);r(9805);let c={isValid:!0};class d extends o.Component{render(){let{isValid:e,selectedValue:t}=this.state,{className:r,errorMessage:a,flyout:i,id:o,name:l,required:c,options:d}=this.props,u=n()("form-element","dropdown-field","form-dropdown",r,{"is-error":!e}),h=n()("form-dropdown-select",{"form-dropdown-selectnone":null==t}),m="".concat(o,"_label"),p="".concat(o,"_error");return(0,s.jsxs)("div",{className:u,children:[(0,s.jsx)("select",{"aria-describedby":!e&&p||"","aria-labelledby":m,"aria-required":c,className:h,name:l,onChange:this.handleChange,onMouseDown:this.handleClick,ref:this.selectRef,required:c,value:t,children:d.map(e=>(0,s.jsx)("option",{disabled:!!e.disabled||void 0,value:e.value,children:e.label||e.value},e.disabled?"".concat(e.value,"-disabled"):e.value))}),(0,s.jsx)("span",{"aria-hidden":!0,className:"form-dropdown-chevron"}),(0,s.jsx)("span",{"aria-hidden":!0,className:"form-dropdown-label",id:m,children:i}),(0,s.jsx)("div",{className:"form-message-wrapper",id:p,children:(0,s.jsx)("span",{className:"form-message",children:a})})]})}get isValid(){return this.state.isValid}set isValid(e){this.setState({isValid:e})}get isValidationRequired(){return!1}set isValidationRequired(e){}get name(){return this.props.name}get sortNumber(){var e;return null!==(e=this.props.sortNumber)&&void 0!==e?e:0}get value(){return this.state.selectedValue}set value(e){this.setState({selectedValue:e})}focus(e){this.selectRef.current&&(this.selectRef.current.focus({preventScroll:!0}),e&&e())}reset(){this.setState({...c,selectedValue:this.props.defaultValue})}validate(){return Promise.resolve(this)}handleChange(e){let{onChange:t}=this.props,{value:r}=e.currentTarget;this.setState({selectedValue:r,isValid:!0},()=>null==t?void 0:t(r))}handleClick(){this.state.isValid||this.setState({isValid:!0},this.props.onClick)}constructor(e){super(e),this.selectRef=(0,o.createRef)(),this.state={...c,selectedValue:this.props.defaultValue}}}d.defaultProps={onChange:()=>void 0,onClick:()=>void 0,required:!1},(0,a.__decorate)([l.m],d.prototype,"handleChange",null),(0,a.__decorate)([l.m],d.prototype,"handleClick",null)},51361:function(e,t,r){"use strict";r.d(t,{L:function(){return u}});var a=r(33509),s=r(57437),i=r(84772),n=r.n(i),o=r(2265),l=r(93213),c=r(35088),d=r(95209);r(33772);class u extends o.Component{render(){let{className:e,i18n:t,getErrorClientHeight:r}=this.props,a=n()("flow-text-field","form-textbox-with-righticon",e),i=t.value("registration-form.validate"),o=t.value("registration-form.verified");return(0,s.jsx)(d.n,{...this.props,className:a,ref:this.textFieldRef,onChange:this.handleChange,onKeyPress:this.handleKeyPress,getErrorClientHeight:r,children:(0,s.jsx)("button",{"aria-label":this.isValidationRequired||!this.isValid?i:o,className:"form-textbox-button form-textbox-righticon",disabled:this.showCheckMark(),onClick:this.handleClick,type:"button",children:(0,s.jsx)("i",{"aria-hidden":!0,className:this.iconClasses()})})})}get isValid(){return!!this.textFieldRef.current&&this.textFieldRef.current.isValid}set isValid(e){this.textFieldRef.current&&(this.textFieldRef.current.isValid=e,this.forceUpdate())}get name(){var e;return null!==(e=this.textFieldRef.current&&this.textFieldRef.current.name)&&void 0!==e?e:""}reset(){this.textFieldRef.current&&this.textFieldRef.current.reset()}async validate(){let e=this.textFieldRef.current;return e&&await e.validate(()=>{e.isValid&&this.setState({isValidationRequired:!1}),this.forceUpdate()}),Promise.resolve(this)}focus(e){this.textFieldRef.current&&this.textFieldRef.current.focus(e)}get isValidationRequired(){return!!this.textFieldRef.current&&this.textFieldRef.current.isValidationRequired}set isValidationRequired(e){this.textFieldRef.current&&(this.textFieldRef.current.isValidationRequired=e,this.forceUpdate())}get value(){var e;return null!==(e=this.textFieldRef.current&&this.textFieldRef.current.value)&&void 0!==e?e:""}set value(e){this.textFieldRef.current&&(this.textFieldRef.current.value=e,this.forceUpdate())}get sortNumber(){var e;return null!==(e=this.textFieldRef.current&&this.textFieldRef.current.sortNumber)&&void 0!==e?e:0}iconClasses(){return n()("icon",{"icon-downloadcircle":this.isValidationRequired||!this.isValid,"icon-checkcircle":this.showCheckMark()})}handleClick(){this.validate()}handleKeyPress(e){let{validateOnEnter:t}=this.props;t&&e.charCode===l.aT.ENTER&&(e.preventDefault(),this.validate())}handleChange(){this.forceUpdate()}showCheckMark(){return!this.isValidationRequired&&this.isValid}constructor(...e){super(...e),this.textFieldRef=(0,o.createRef)()}}(0,a.__decorate)([c.m],u.prototype,"validate",null),(0,a.__decorate)([c.m],u.prototype,"iconClasses",null),(0,a.__decorate)([c.m],u.prototype,"handleClick",null),(0,a.__decorate)([c.m],u.prototype,"handleKeyPress",null),(0,a.__decorate)([c.m],u.prototype,"handleChange",null),(0,a.__decorate)([c.m],u.prototype,"showCheckMark",null)},95209:function(e,t,r){"use strict";r.d(t,{n:function(){return u}});var a=r(33509),s=r(57437),i=r(84772),n=r.n(i),o=r(2265),l=r(93213),c=r(35088);r(84086);let d={isValid:!1,isValidationRequired:!0,value:"",activeError:!1,errorClientHeight:0};class u extends o.Component{render(){let{isValidationRequired:e,isValid:t,value:r}=this.state,a=!e&&!t,{children:i,className:o,errorMessage:l,flyout:c,id:d,inputMode:u,name:h,onKeyPress:m,required:p,type:f}=this.props,g="".concat(d,"_label"),v="".concat(d,"_error"),x=n()("form-element","form-textbox",o,{"is-error":a}),b=n()("form-textbox-input","form-textbox-text",{"form-textbox-entered":!!r});return(0,s.jsxs)("div",{className:x,children:[(0,s.jsx)("span",{className:"a11y",children:"\xa0"}),(0,s.jsx)("input",{"aria-describedby":v,"aria-invalid":a,"aria-labelledby":g,"aria-required":p,className:b,inputMode:u,name:h,onChange:this.handleChange,onBlur:this.handleBlur,onKeyPress:m,ref:this.inputRef,required:p,type:f,value:r}),(0,s.jsx)("span",{"aria-hidden":"true",className:"form-textbox-label form-label-flyout",id:g,children:c}),(0,s.jsx)("div",{ref:this.errorRef,className:"form-message-wrapper",id:v,children:(0,s.jsx)("span",{className:"form-message",children:a?l:""})}),i]})}componentDidUpdate(){let{isValidationRequired:e,isValid:t,activeError:r,errorClientHeight:a}=this.state,{getErrorClientHeight:s}=this.props,i=!e&&!t;if("function"==typeof s&&i!==r){let e;this.errorRef.current&&(e=this.errorRef.current.clientHeight?this.errorRef.current.clientHeight:a*Math.sign(-1)),s(i,null!=e?e:0),this.setState({activeError:!r,errorClientHeight:null!=e?e:0})}}reset(){this.setState(d)}validate(e){let{value:t}=this.state,{onValidate:r,pattern:a,required:s}=this.props,i=new RegExp(null!=a?a:"").test(t);return i&&s&&(i=!!t.trim()),new Promise(a=>{this.setState({isValid:i,isValidationRequired:!1},()=>{e&&e(),null==r||r(this.name,t,i),a(this)})})}focus(e){this.inputRef.current&&(this.inputRef.current.focus({preventScroll:!0}),e&&e())}get isValidationRequired(){return this.state.isValidationRequired}set isValidationRequired(e){this.setState({isValidationRequired:e})}get isValid(){return this.state.isValid}set isValid(e){var t,r;this.setState({isValid:e}),null===(t=(r=this.props).onValidate)||void 0===t||t.call(r,this.name,this.state.value,e)}get name(){return this.props.name}get value(){return this.state.value}set value(e){this.setState({value:e})}get sortNumber(){var e;return null!==(e=this.props.sortNumber)&&void 0!==e?e:0}handleBlur(e){var t,r;null===(t=(r=this.props).onBlur)||void 0===t||t.call(r,e)}handleChange(e){var t,r;let{selectionEnd:a,selectionStart:s,value:i}=e.currentTarget;this.setState({isValidationRequired:!0,value:i},()=>{let e=this.inputRef.current;e&&(e.selectionStart=s,e.selectionEnd=a)}),null===(t=(r=this.props).onChange)||void 0===t||t.call(r,e)}constructor(...e){super(...e),this.state=d,this.inputRef=(0,o.createRef)(),this.errorRef=(0,o.createRef)()}}u.defaultProps={onBlur:()=>void 0,onChange:()=>void 0,onKeyPress:()=>void 0,onValidate:()=>void 0,required:!1,type:l.EI.TEXT},(0,a.__decorate)([c.m],u.prototype,"handleBlur",null),(0,a.__decorate)([c.m],u.prototype,"handleChange",null)},73440:function(e,t,r){"use strict";r.d(t,{h3:function(){return b},Dt:function(){return g},Wi:function(){return p},HH:function(){return x},Ki:function(){return u},nv:function(){return a.n}}),r(51361),r(66806);var a=r(95209),s=r(33509),i=r(57437),n=r(2265),o=r(35088),l=r(84772),c=r.n(l);r(35803);let d={value:0};class u extends n.Component{render(){let{value:e}=this.state,{ariaLabelledBy:t,ariaLiveStatus:r,className:a,decreaseButtonAriaLabel:s,increaseButtonAriaLabel:n,maxValue:o,minValue:l,name:d,required:u}=this.props,h=this.isDecreaseButtonDisabled(),m=this.isIncreaseButtonDisabled(),p=c()("form-element","number-field",a),f=c()("number-field__button",{"number-field__button--disabled":h}),g=c()("number-field__button",{"number-field__button--disabled":m});return(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)("button",{"aria-label":s,className:f,disabled:h,onClick:this.handleDecreaseClick,onBlur:this.handleBlur,type:"button",children:(0,i.jsx)("i",{"aria-hidden":!0,className:"icon-minuscircle icon icon-before"})}),(0,i.jsx)("input",{"aria-labelledby":t,"aria-disabled":!0,"aria-required":u,className:"number-field__input typography-body",disabled:!0,max:o,maxLength:2,min:l,minLength:1,name:d,ref:this.inputRef,required:u,value:e}),(0,i.jsx)("button",{"aria-label":n,className:g,disabled:m,onClick:this.handleIncreaseClick,onBlur:this.handleBlur,type:"button",children:(0,i.jsx)("i",{"aria-hidden":!0,className:"icon-pluscircle icon icon-before"})}),(0,i.jsx)("span",{"aria-live":"polite",className:"a11y",role:"status",children:r})]})}focus(e){this.inputRef.current&&(this.inputRef.current.focus({preventScroll:!0}),e&&e())}get isValid(){return!0}set isValid(e){}get isValidationRequired(){return!1}set isValidationRequired(e){}get name(){return this.props.name}reset(e){this.setState(d,e)}get value(){return this.state.value}set value(e){this.setState({value:e})}get sortNumber(){var e;return null!==(e=this.props.sortNumber)&&void 0!==e?e:0}validate(){return Promise.resolve(this)}handleBlur(){let{value:e}=this.state,{onChange:t=()=>void 0}=this.props;t(e)}handleDecreaseClick(){let{value:e}=this.state,{onChange:t=()=>void 0}=this.props,r=e-1;this.setState({value:r},()=>t(r))}handleIncreaseClick(){let{value:e}=this.state,{onChange:t=()=>void 0}=this.props,r=e+1;this.setState({value:r},()=>t(r))}isDecreaseButtonDisabled(){let{value:e}=this.state,{maxValue:t=10,minValue:r=0}=this.props;return t===r&&t===e||e<=r}isIncreaseButtonDisabled(){let{value:e}=this.state,{maxValue:t=10,minValue:r=0}=this.props;return t===r||e>=t}constructor(...e){super(...e),this.state=d,this.inputRef=(0,n.createRef)()}}u.defaultProps={maxValue:10,minValue:0,required:!1,onChange:()=>void 0},(0,s.__decorate)([o.m],u.prototype,"handleBlur",null),(0,s.__decorate)([o.m],u.prototype,"handleDecreaseClick",null),(0,s.__decorate)([o.m],u.prototype,"handleIncreaseClick",null),(0,s.__decorate)([o.m],u.prototype,"isDecreaseButtonDisabled",null),(0,s.__decorate)([o.m],u.prototype,"isIncreaseButtonDisabled",null);var h=r(78385),m=r(93213);r(84481);class p extends n.Component{shouldComponentUpdate(e){return e&&e.showForm===h.y.HIDE&&this.state.didBlur&&this.setState({isTouched:!1,didBlur:!1,isValid:!!e.initialValue&&this.validateValue(e.initialValue),value:e.initialValue||""}),!0}render(){let{errorMessage:e,flyout:t,id:r,name:a,autoCapitalize:s,inputMode:n,required:o,type:l,className:d,isTouched:u,maxLength:h}=this.props,m=(u||this.state.didBlur)&&!this.state.isValid,p=c()(d),f=c()("form-cell","form-element","form-textbox",{"is-error":m}),g=c()("form-textbox-input","form-textbox-text",{"form-textbox-entered":!!this.state.value}),v="".concat(r,"_label");return(0,i.jsx)("div",{className:p,children:(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)("input",{"aria-describedby":m?"".concat(r,"_error"):"","aria-required":o,"aria-invalid":!this.state.isValid,"aria-labelledby":v,autoCapitalize:s,autoCorrect:"off",className:g,id:r,inputMode:n,name:a,required:o,type:l,value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur,maxLength:h}),(0,i.jsx)("span",{id:v,"aria-hidden":"true",className:"form-textbox-label form-label-flyout",children:t}),(0,i.jsx)("div",{className:"form-message-wrapper",id:"".concat(r,"_error"),children:(0,i.jsx)("span",{className:"form-message",children:e})})]})})}handleBlur(){this.setState({didBlur:!0})}handleChange(e){let{onChange:t}=this.props;this.state.isTouched||this.setState({isTouched:!0});let{value:r}=e.currentTarget,a=this.validateValue(r);this.setState({value:r,isValid:a}),t(e)}validateValue(e){let{pattern:t}=this.props;if(t){let r=new RegExp(t);return!!e.trim()&&r.test(e)}return!0}constructor(e){super(e),e.initialValue?this.state={isTouched:!0,isValid:this.validateValue(e.initialValue),value:e.initialValue,didBlur:!1}:this.state={isTouched:!1,isValid:!1,value:"",didBlur:!1}}}p.defaultProps={required:!1,type:m.EI.TEXT,initialValue:"",pattern:""},(0,s.__decorate)([o.m],p.prototype,"handleBlur",null),(0,s.__decorate)([o.m],p.prototype,"handleChange",null),r(15393);let f="default";class g extends n.Component{UNSAFE_componentWillReceiveProps(e){let{initialValue:t,name:r}=this.props,{value:a}=this.state;if(t&&(!a||a===f)&&this.setState({isTouched:!0,isValid:!0,value:t,didBlur:!1,optionSelected:!0}),e){if(e.resetPlaceholder){let{resetPlaceholder:t}=e,s=t.fieldValue,i=t.fieldName;a!==s&&(i!==r||s&&s!==f?this.setState({value:s,optionSelected:!0,isValid:!0,didBlur:!1}):this.setState({value:f,optionSelected:!1,isValid:!1,didBlur:!1}))}e.showForm===h.y.HIDE&&this.state.didBlur&&this.setState({isTouched:!1,didBlur:!1,isValid:!1,value:f,optionSelected:!1}),e&&null===e.initialValue&&this.setState({value:f,optionSelected:!1,isValid:!1,didBlur:!1})}}render(){let{value:e}=this.state,{defaultValue:t,disabled:r,className:a,isTouched:s,id:n,required:o,name:l,errorMessage:d}=this.props,u=(s||this.state.didBlur)&&!this.state.isValid,h="".concat(n,"_label"),m="".concat(n,"_error"),p=c()("form-dropdown-field",a),f=c()("form-dropdown",{"is-error":u}),g=c()("form-dropdown-select",{"form-dropdown-selectnone":!this.state.optionSelected});return(0,i.jsx)("div",{className:p,children:(0,i.jsxs)("div",{className:f,children:[(0,i.jsxs)("select",{className:g,name:l,required:o,"aria-describedby":u&&m||"","aria-labelledby":h,"aria-required":o,onBlur:this.handleBlur,onChange:this.handleChange,disabled:r,value:e,children:[(0,i.jsx)("option",{value:"default",disabled:!0,children:t}),this.renderOptions()]}),(0,i.jsx)("span",{"aria-hidden":!0,className:"form-dropdown-chevron"}),(0,i.jsx)("span",{"aria-hidden":!0,className:"form-dropdown-label",id:h,children:t}),(0,i.jsxs)("div",{className:"form-message-wrapper",id:m,children:[(0,i.jsx)("span",{className:"visuallyhidden",children:"Error:"}),(0,i.jsx)("span",{className:"form-message",children:d})]})]})})}renderOptions(){let{options:e}=this.props;return e.map(e=>{let{value:t,label:r}=e;return(0,i.jsx)("option",{value:t,children:r||t},t)})}handleBlur(){this.setState({didBlur:!0})}handleChange(e){let{onChange:t}=this.props;this.state.isTouched||this.setState({isTouched:!0});let{value:r}=e.currentTarget,a=!!r.trim();this.setState({value:r,isValid:a,optionSelected:!0}),t(e)}constructor(e){super(e),this.state={isTouched:!1,isValid:!1,value:f,didBlur:!1,optionSelected:!1}}}(0,s.__decorate)([o.m],g.prototype,"handleBlur",null),(0,s.__decorate)([o.m],g.prototype,"handleChange",null),r(98793);class v extends n.Component{UNSAFE_componentWillReceiveProps(e){e&&(e.showForm===h.y.HIDE&&this.state.didBlur?this.setState({isTouched:!1,didBlur:!1,checked:!1}):this.setState({didBlur:!0,isTouched:!0,checked:e.checked||!1}))}render(){let{className:e,dataGroup:t,dataGroupName:r,id:a,label:s,value:n}=this.props,{checked:o}=this.state,l="".concat(a,"_label");return(0,i.jsxs)("div",{"data-group":t,className:"form-selector-threeline column form-selector ".concat(e),children:[(0,i.jsx)("input",{"aria-checked":o,"aria-labelledby":l,checked:o,className:"form-selector-input","data-group-name":r,id:a,name:r,onBlur:this.onBlur,onChange:this.onSelect,type:"radio",value:n}),(0,i.jsx)("label",{"aria-hidden":"true",className:"form-selector-label",htmlFor:a,id:l,children:(0,i.jsx)("span",{className:"form-label-small",children:s})})]})}onBlur(e){let{onBlur:t}=this.props;this.state.didBlur||this.setState({didBlur:!0}),t&&t(e)}onSelect(e){let{onSelectChange:t}=this.props;this.state.isTouched||this.setState({isTouched:!0}),t(e)}constructor(e){super(e),this.state={isTouched:e.checked||!1,didBlur:!1,checked:e.checked||!1}}}(0,s.__decorate)([o.m],v.prototype,"onBlur",null),(0,s.__decorate)([o.m],v.prototype,"onSelect",null);class x extends n.Component{UNSAFE_componentWillReceiveProps(e){e&&((e.showForm===h.y.HIDE&&this.state.isError||e.showForm===h.y.HIDE&&this.state.isValid)&&(this.setState({isError:!1}),this.clearSelection()),e.initialValue&&""!==e.initialValue||this.setState({value:"",isValid:!1}))}render(){let{groupLabel:e,errorMessage:t,id:r,isTouched:a}=this.props,{isError:s,isValid:n}=this.state,o=s||a&&!n,l=c()("selector-section",{"is-error":o}),d="".concat(r,"_label"),u="".concat(r,"_error");return(0,i.jsx)("div",{className:"pattern-selectors",children:(0,i.jsxs)("div",{"aria-describedby":o?u:"","aria-invalid":o,"aria-labelledby":d,className:l,id:r,role:"radiogroup",children:[(0,i.jsx)("label",{"aria-hidden":"true",className:"form-group-label typography-body",htmlFor:r,id:d,children:e}),(0,i.jsx)("div",{className:"row form-selector-group",ref:this.list,children:this.renderRadioItems()}),(0,i.jsx)("div",{className:"form-message-wrapper",children:(0,i.jsx)("span",{"aria-hidden":"true",className:"form-message",id:u,children:t})})]})})}renderRadioItems(){let{data:e,dataGroup:t,dataGroupName:r,listItemClasses:a,showForm:s}=this.props;return e.map(e=>{let n="".concat(e.value);return(0,i.jsx)(v,{checked:n===this.state.value,className:a,dataGroup:t,dataGroupName:r,id:e.id,label:e.label,onSelectChange:this.handleSelect,showForm:s,value:n},e.id)})}componentDidUpdate(e,t){null===t.value&&!0===t.isValid&&this.setState({isValid:!1})}handleSelect(e){let{onChange:t}=this.props;e.persist();let{value:r}=e.target,a=!!r.trim();this.state.isError&&a&&this.setState({isError:!1}),a&&this.setState({isValid:!0}),r&&this.setState({value:r,isValid:!0}),t(e)}clearSelection(){var e;((null===(e=this.list.current)||void 0===e?void 0:e.querySelectorAll("input"))||[]).forEach(e=>{e.classList.remove("focused")})}constructor(e){super(e),this.list=(0,n.createRef)();let{initialValue:t}=this.props;this.state={isError:!1,isValid:""!==t,value:t?"".concat(e.initialValue):""}}}(0,s.__decorate)([o.m],x.prototype,"handleSelect",null);let b=e=>{let{name:t,label:r,checked:a,onChange:s}=e,n="".concat(t,"_label");return(0,i.jsxs)("div",{className:"form-checkbox",children:[(0,i.jsx)("input",{type:"checkbox",name:t,id:n,checked:a,className:"form-checkbox-input",onChange:e=>{s(e)}}),(0,i.jsxs)("label",{className:"form-label",htmlFor:n,children:[(0,i.jsx)("span",{className:"form-checkbox-indicator",children:"\xa0"}),r]})]})}},7663:function(e,t,r){"use strict";r.d(t,{C:function(){return g},J:function(){return m}});var a=r(57437),s=r(2265),i=r(50403),n=r(17346),o=r(686),l=r(12877),c=r(18285),d=r(83543),u=r(40125),h=r(76956);r(34307);let m=e=>{if(!e)return!1;let t=["enabled","paragraph1","paragraph2","title","url","urlCta"].filter(t=>!e[t]);return e.enabled&&t.length<=0},p=new i.pU,f={REGULAR:"legal-modal-content-title",EXIT:"legal-modal-exit-content-title"},g=e=>{let{analyticsData:t,legal:r,showLegal:m,shouldStandBy:g,updateConsent:v}=e,x="",{analyticsService:b}=(0,o.Z)(),S=(0,n.Z)(),N=(0,s.useRef)(null),E=(0,s.useRef)(null),y="legal-modal",[R,k]=(0,s.useState)(!1),[_,j]=(0,s.useState)(!1),[T,w]=(0,s.useState)(!1),C=(0,l.z)(R||!1),I=(0,s.useRef)(null),[O,A]=(0,s.useState)(!1),D="click - agree to privacy terms",V={"data-analytics-title":"click - close privacy modal"},P={id:"legal-modal","data-analytics-activitymap-region-id":"modal"},F=()=>{null==b||b.trackEvent((0,c.Vx)("click - close privacy modal",t).trackers),k(!0)},L=async()=>{A(!0),null==b||b.trackEvent((0,c.Vx)("click - agree to privacy terms",t).trackers),void 0!==g&&A(await v(!0,g))},B=()=>{null==b||b.trackEvent((0,c.Vx)("click - cancel legal modal confirmation",t).trackers),j(!0),w(!1),v(!1,!1)},U=()=>{null==b||b.trackEvent((0,c.Vx)("click - go back to legal modal",t).trackers),k(!1)},M=()=>null==b?void 0:b.trackEvent((0,c.Vx)("click - view apple privacy policy",t).trackers);return(0,s.useEffect)(()=>{k(!1),m&&j(!1)},[m]),(0,s.useEffect)(()=>{let e=void 0!==C&&!_&&C!==R;e&&R&&E.current&&N.current?(p.animate(E.current,N.current,()=>{I.current&&I.current.setFocus&&setTimeout(()=>{var e;null===(e=I.current)||void 0===e||e.setFocus()},i.Jz)}),w(!0)):e&&!R&&N.current&&E.current?p.animate(N.current,E.current,()=>{p.reset(),w(!1),I.current&&I.current.setFocus&&setTimeout(()=>{var e;null===(e=I.current)||void 0===e||e.setFocus()},i.Jz)}):_&&p.reset()},[_,C,R]),m&&!R?x=f.REGULAR:m&&R&&(x=f.EXIT),(0,a.jsx)(i.tC.Consumer,{children:e=>{let{standBy:t,setModalContext:n}=e,o={...t,shouldEnable:!_&&g};if(void 0!==r)return(0,a.jsxs)(i.u_,{type:i.w8.STANDARD,isOpened:m,overlayClickHandler:B,closeButtonOverrideHandler:F,hideCloseButton:T,standBy:o,setModalContext:n,ariaLabelledBy:x,ref:I,escapeHandler:B,classList:[y],closeButtonAttr:V,modalAttr:P,children:[(0,a.jsxs)("div",{id:"legal-content","aria-hidden":R,ref:E,className:"".concat(y,"-content"),children:[(0,a.jsx)("h2",{id:f.REGULAR,className:"".concat(y,"-content__title title typography-headline-reduced"),"aria-live":"polite",children:r&&r.title}),(0,a.jsx)(d.p,{classNames:"".concat(y,"-content__paragraph"),data:r.paragraph1,inject:{content:(0,a.jsx)(s.Fragment,{children:(0,a.jsx)("a",{href:r.url,onClick:M,target:"_blank","data-analytics-title":"click - view apple privacy policy",children:" ".concat(r.urlCta)})}),nth:d.f.LAST}}),(0,a.jsx)("p",{className:"".concat(y,"-content__paragraph"),children:r.paragraph2}),(0,a.jsx)(u.zx,{className:"".concat(y,"-content__button"),disabled:O,onClick:L,tagProps:{"data-analytics-title":D},size:h.Ph.large,children:S.value("global.cta-agree")})]}),(0,a.jsx)("div",{"aria-hidden":!R,ref:N,className:"".concat(y,"-exit-content"),children:(0,a.jsxs)("div",{className:"content-section alignment-wrapper",children:[(0,a.jsx)("h2",{id:f.EXIT,className:"".concat(y,"-exit-content__title typography-headline-reduced"),"aria-live":"polite",children:S.value("details.cancel-modal-title")}),(0,a.jsx)("p",{className:"".concat(y,"-exit-content__description"),children:S.value("details.cancel-privacy-modal-description")}),(0,a.jsx)(u.zx,{className:"".concat(y,"-exit-content__button"),onClick:B,tagProps:{"data-analytics-title":"click - cancel legal modal confirmation"},size:h.Ph.large,children:S.value("details.cancel-modal-confirm-cta")}),(0,a.jsx)("br",{}),(0,a.jsx)(u.zx,{style:h.AK.link,onClick:U,tagProps:{"data-analytics-title":D},children:S.value("details.cancel-modal-continue-cta")})]})})]})}})}},57390:function(e,t,r){"use strict";r.d(t,{j:function(){return d},B:function(){return c}});var a=r(57437),s=r(2265),i=r(38452);r(47089);var n=r(17346),o=r(84772),l=r.n(o);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link-with-icon";return{externalWarningId:"external-".concat(e),linkId:e}}let d=e=>{let{children:t,className:r,linkId:o="link-with-icon",linkText:d,externalWarningText:u,...h}=e,{href:m}=h,p=(0,n.Z)(),f=(0,s.useMemo)(()=>m&&(0,i.ni)(m),[m]),{externalWarningId:g,linkId:v}=c(o),x=e["aria-labelledby"]||"".concat(v||""," ").concat(g);return(0,a.jsxs)("a",{"aria-labelledby":x,className:l()(r,"link-with-icon icon",{more:f,"icon-external":!f}),...!f&&{"data-analytics-exit-link":"true"},...h,children:[d?(0,a.jsx)("span",{className:"link-with-icon-text",id:v,children:d}):t,(0,a.jsx)("span",{id:g,className:"external-link-warning","aria-hidden":"true",children:u||p.value("global.external-link-warning")})]})}},93462:function(e,t,r){"use strict";r.d(t,{N:function(){return l}});var a=r(57437),s=r(18285),i=r(720),n=r(17346);r(84107);let o=new s.bK,l=e=>{let t=(0,n.Z)(),{headlineI18nKey:r="error.no-results-for-location",displayLink:s=!0,onChangeLocationClick:l,page:c}=e;return(0,a.jsx)("section",{className:c?"no-session-section ".concat(c):"no-session-section",children:(0,a.jsxs)("div",{className:"section-content",children:[(0,a.jsx)("hr",{className:"hr","aria-hidden":"true"}),(0,a.jsx)("div",{className:"row no-session-section__content",children:(0,a.jsxs)("div",{className:"column large-centered large-5 small-12 text-centered",children:[(0,a.jsx)("div",{className:"typography-intro",children:t.value(r)}),s&&(0,a.jsx)("p",{className:"no-session-section__link-wrapper",children:(0,a.jsx)(i.ib,{onClick:l,analyticsAttr:o.withProp3("t@a - change location").build(),tagProps:{role:"button"},children:t.value("global.cta-change-location")})})]})})]})})}},32997:function(e,t,r){"use strict";r.d(t,{U:function(){return n}});var a=r(44521),s=r(93213),i=r(38452);class n{getSocialUrls(){let{course:e={},schedule:t,store:r,pageUrl:a}=this.props,{backgroundMedia:s,name:i}=e,{storeNum:n,displayDate:o}=t||{},l=o&&o.length?o[0].date:void 0,c=this.getEventStageRootPath();return{eventLink:n&&a&&encodeURIComponent(this.getEventLink(n,a,c)),eventConfirmationLink:encodeURIComponent(this.getEventConfirmationLink(c)),eventName:i&&encodeURI(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/&/g,"%26"),eventImageUrl:s&&encodeURIComponent(this.getEventImageURL(s)),name:null==r?void 0:r.name,date:l}}getEventStageRootPath(){let{schedule:e,allLocalesService:t,deliveryLangSharing:r}=this.props;if(!e||!r)return"";let a=t.getLocaleBy({isoLanguageCode:e.lang,isoCountryCode:t.currentLocale.isoCountryCode});return a?a.urlStageRootPath:""}getEventLink(e,t,r){if((0,a.j)()){let{pageName:t,configManager:a}=this.props,n=t===s.q.GROUP_BOOKING_EVENT?a.getPageRoute(s.q.GROUP_BOOKING_EVENT):a.getPageRoute(s.q.EVENT),o=this.getRouteUrl(n,r);return"".concat(o,"?").concat(i.az.STORE_NUMBER,"=").concat(e)}return t}getEventConfirmationLink(e){if((0,a.j)()){let{pageName:t,configManager:r}=this.props,a=t===s.q.GROUP_BOOKING_EVENT?r.getPageRoute(s.q.GROUP_BOOKING_EVENT_CONFIRMATION):r.getPageRoute(s.q.CONFIRMATION);return this.getRouteUrl(a,e)}return""}getEventImageURL(e){let{images:t}=e;return t&&t.length>0?t[0].landscape.source:""}getRouteUrl(e,t){let{allLocalesService:{currentLocale:{urlStageRootPath:r}},course:a,schedule:s}=this.props,n=window.location.protocol,o=window.location.host,l=(0,i.Vf)(e,{stageRootPath:t||r,courseSlug:a&&a.urlTitle,scheduleId:s&&s.id});return"".concat(n,"//").concat(o).concat(l)}constructor(e){this.props=e}}},67512:function(e,t,r){"use strict";r.d(t,{I:function(){return E}});var a=r(57437),s=r(2265),i=r(99376),n=r(84772),o=r.n(n),l=r(93213),c=r(31642),d=r(17346),u=r(27485),h=r(82099),m=r(12115),p=r(24809),f=r(686),g=r(32997),v=r(92520),x=r(47965),b=r(31966),S=r(11716);r(4493);let N="social-link",E=e=>{let[t,r]=(0,s.useState)(!1),{name:n,url:E,isMailto:y,autoFocus:R,index:k,idPrefix:_,schedule:j,store:T,course:w,deliveryLangSharing:C,pageName:I}=e,O=(0,h.Z)(),A=(0,d.Z)(),{allLocalesService:D}=(0,p.Z)(),{analyticsService:V}=(0,f.Z)(),P=(0,x.Z)(),F=(0,i.useParams)(),L=(0,b.Z)(),B=n===l.sG.LINK,U=o()(N,"".concat(N,"--").concat(n),"".concat(t&&"is-copied")),M=async e=>{let t=new m.s(O,O.getApiBase(),L),a=n===l.sG.LINK,s=a?"t@a - copy link":"t@a - invite others ".concat(n);if(null==V||V.trackEvent({title:"social share",prop3:s,events:"event252"}),y&&C){var i,o;e.preventDefault();let r=D.getLocaleByLanguage((null==j?void 0:j.lang)||""),{scheduleId:a}=F,s=await t.getPageData({scheduleId:a[0],stageRootPath:null==r?void 0:r.stageRootPath},{},P.getUserLocation()),n=null==s?void 0:null===(o=s.socialLinks)||void 0===o?void 0:null===(i=o.groupBooking)||void 0===i?void 0:i.find(e=>"email"===e.name);if(n){let e=(0,u.kM)(n.url,new g.U({configManager:O,allLocalesService:D,schedule:j,deliveryLangSharing:C,pageUrl:E,pageName:I,store:T,course:w}).getSocialUrls()),t=document.createElement("a");t.href=(0,u.ko)(e,"%5Cn","%0A"),t.click()}}if(a){e.preventDefault();let t=v.G.getClipboard();r(!!t&&!!E&&t.copy(decodeURIComponent(E))),setTimeout(()=>{r(!1)},2e3)}},G=S.e[n];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.N,{id:(()=>{if(_)return _+"--"+n})(),href:(0,u.ko)(E,"%5Cn","%0A"),className:U,tagProps:{target:y||B?"_self":"_blank"},onClick:M,ariaLabel:(()=>{let e=A.value("global.".concat(n))||n,t=n===l.sG.LINK,r=A.value("details.share-sessions-via-provider"),a=(0,u.kM)(r,{provider:e});return t?"".concat(a," - ").concat(A.value("global.copy-clipboard")):"".concat(a," - ").concat(A.value("global.external-link-warning"))})(),focus:R&&0===k,children:[G&&(0,a.jsx)(G,{className:"".concat(N,"__icon")}),B&&(0,a.jsx)("span",{className:"".concat(N,"-alert typography-body-reduced"),role:"alert",children:A.value("global.copy-clipboard-success")})]}),(0,a.jsx)("span",{"aria-live":"polite",className:"a11y",id:"".concat(N,"-").concat(n,"-live-region"),children:t&&A.value("global.copy-clipboard-success")})]})}},11828:function(e,t,r){"use strict";r.d(t,{S:function(){return u}});var a=r(57437),s=r(2265),i=r(17346),n=r(27485),o=r(32997),l=r(82099),c=r(24809),d=r(67512);r(70753);let u=e=>{let{social:t,course:r,store:u,idPrefix:h,autoFocus:m,reservation:p,deliveryLangSharing:f,...g}=e,v=(0,i.Z)(),x=(0,l.Z)(),{allLocalesService:b}=(0,c.Z)(),S=new o.U({...e,configManager:x,allLocalesService:b}).getSocialUrls();return t.length&&r&&u?(0,a.jsx)("div",{className:"social-links-set","aria-label":v.value("details.cta-social-share"),children:t.map((e,t)=>{let{name:a,url:i}=e,o=i.substring(0,7).includes("mailto:");return(0,s.createElement)(d.I,{...g,idPrefix:h,name:a,url:(0,n.kM)(i,S),key:a,isMailto:o,autoFocus:m,index:t,reservation:p,store:u,course:r,deliveryLangSharing:f})})}):null}},82092:function(e,t,r){"use strict";r.d(t,{M:function(){return m}});var a=r(57437),s=r(47885),i=r(17346),n=r(686),o=r(18285),l=r(57390);let c=e=>{let{name:t,websiteUrl:r,ariaLabelIds:s}=e,c=(0,i.Z)(),{analyticsService:d}=(0,n.Z)(),u=t&&"performer website - ".concat(t),h="".concat(s.name," ").concat(s.title," ").concat(s.linkId," ").concat(s.externalWarningId);return r&&(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"column large-10 large-offset-1",children:(0,a.jsx)(l.j,{"aria-labelledby":h,className:"performer__link","data-analytics-title":u,href:r,onClick:()=>{let e=new o.bK().withTitle(u).withProp3(u);null==d||d.trackEvent(e.trackers)},target:"_blank",linkId:s.linkId,linkText:c.value("details.cta-performer-website")})})})};var d=r(11828);let u=e=>{let{talent:t,schedule:r,course:s,store:n,pageUrl:o}=e,{socialLinks:l}=t,c=(0,i.Z)();return l&&l.length?(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"column large-8 large-offset-1 medium-9 medium-offset-1",children:[(0,a.jsx)("p",{className:"typography-body",children:c.compileValue("details.cta-talent-social-share",t)}),(0,a.jsx)("div",{className:"icon-set",children:(0,a.jsx)(d.S,{social:l,schedule:r,course:s,store:n,pageUrl:o})})]})}):null},h=e=>{let{talent:t,id:r,schedule:i,course:n,store:o,pageUrl:d}=e,{title:h,name:m,backgroundImage:p,description:f,websiteUrl:g}=t,{externalWarningId:v,linkId:x}=(0,l.B)(g&&"performer-link-".concat(r)),b={externalWarningId:v,linkId:x,name:"performer-name-".concat(r),title:h?"performer-title-".concat(r):void 0};return(0,a.jsxs)("div",{className:"row section-performer__row",children:[(0,a.jsx)("div",{className:"column large-10 large-offset-1 small-10 border-top"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"column large-8 large-offset-1 medium-9 medium-offset-1 small-10",children:(0,a.jsxs)("div",{className:"performer-info",children:[p&&(0,a.jsx)("figure",{style:{backgroundImage:"url('".concat((0,s.P)(p,250),"')")},className:"performer-image"}),(0,a.jsxs)("h2",{className:"typography-label",children:[(0,a.jsx)("span",{className:"performer-name",id:b.name,children:m}),h&&(0,a.jsx)("span",{className:"performer-title",id:b.title,children:h})]}),(0,a.jsx)("p",{className:"typography-body",children:f})]})}),(0,a.jsx)(u,{talent:t,schedule:i,course:n,store:o,pageUrl:d}),(0,a.jsx)(c,{name:m,websiteUrl:g,ariaLabelIds:b})]})]})};r(29595);let m=e=>{let{talents:t,schedule:r,course:s,store:i,pageUrl:n}=e;return(0,a.jsx)("section",{className:"section section-performer",children:(0,a.jsx)("div",{className:"section-content",children:t.map((e,t)=>(0,a.jsx)(h,{id:"talent-".concat(t),talent:e,schedule:r,course:s,store:i,pageUrl:n},"talent-".concat(t)))})})}},49647:function(e,t,r){"use strict";r.d(t,{r:function(){return c}});var a=r(57437),s=r(2265),i=r(27485),n=r(38452),o=r(24809),l=r(82099);let c=e=>{let{copy:t,linkCopy:r,href:c="/",classNames:d,newTab:u=!1,ariaLabel:h,tagProps:m,analyticsEvent:p}=e,{currentLocale:f}=(0,o.Z)(),g=(0,l.Z)(),v=(0,i.H_)(t),x=(0,n.ai)(f.isoCountryCode,g,g.getMainSiteUrl(f.stageRootPath)),b=f.stageRootPath,S=(0,s.useRef)(null),N=null!==v&&v.length>0,E=(0,s.useCallback)(()=>{let e="/cn"===b?"":b;return"".concat(x).concat(e).concat(c)},[x,b,c]);return(0,a.jsx)(a.Fragment,{children:N&&(null==v?void 0:v.map((e,t)=>1===t?(0,a.jsx)("a",{ref:S,className:d,"aria-label":h,target:u?"_blank":void 0,href:E(),onClick:p&&p,...m,children:r},t):e))})}},83543:function(e,t,r){"use strict";r.d(t,{f:function(){return s},p:function(){return n}});var a,s,i=r(57437);(a=s||(s={})).FIRST="FIRST",a.LAST="LAST";let n=e=>{let{data:t,classNames:r,separator:a="\n\n",inject:n}=e,o=n&&void 0!==n.nth&&n.content,l=t?t.split(a).length:0,c=()=>{let{FIRST:e,LAST:t}=s;switch(null==n?void 0:n.nth){case e:return 0;case t:return l-1;default:return null==n?void 0:n.nth}},d=t?t.split(a).map((e,t)=>o&&c()===t?(0,i.jsxs)("p",{className:r,children:[e,n.content]},"text-to-paragraph-".concat(Math.random()).concat(t)):(0,i.jsx)("p",{className:r,children:e},"text-to-paragraph-".concat(Math.random()).concat(t))):null;return(0,i.jsx)(i.Fragment,{children:d})}},91259:function(e,t,r){"use strict";r.d(t,{BreadcrumbContext:function(){return i},Provider:function(){return n}});var a=r(57437),s=r(2265);let i=(0,s.createContext)({title:null,setTitle:e=>null,rootTitle:void 0,params:void 0,setParams:e=>void 0});function n(e){let{children:t,rootTitle:r}=e,[n,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(void 0);return(0,a.jsx)(i.Provider,{value:{title:n,setTitle:o,rootTitle:r,params:l,setParams:c},children:t})}},92453:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(2265),s=r(70174),i=r(82099),n=r(47965);function o(e){let t=(0,i.Z)(),r=(0,n.Z)();return(0,a.useMemo)(()=>new s.$h(r,t,e),[])}},13947:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2265),s=r(91259);function i(){return(0,a.useContext)(s.BreadcrumbContext)}},13171:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265);function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],[s,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{r.length&&(e&&t||!e)&&i(!0)},[e,t,r]),s}},12115:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var a=r(83321),s=r(38452),i=r(89),n=r(93213);class o extends a.f{getPageData(e,t,r){return this._getPageData(e,t,r)}_getPageData(e,t,r){let a=this.getDeepLinkingParams(e,t,r),o=(0,s._V)((null==e?void 0:e.stageRootPath)||""),{scheduleId:l}=e,c={...a,stageRootPath:o,sessionId:l||""},d=this.getTypifiedApiUrl(i.vf)(n.q.GROUP_BOOKING_EVENT,e,t);return this.getData(d,c,"GroupBookingEventPageResponse",i.VP,n.q.GROUP_BOOKING_EVENT,(null==e?void 0:e.sn)?{storeNumber:e.sn}:void 0)}}},8435:function(e,t,r){"use strict";r.d(t,{p:function(){return d}});var a=r(13192),s=r(3956),i=r(87769),n=r(38452),o=r(91664),l=r(70174),c=r(39114);class d extends l.Bn{async lockSession(e){let{schedule:t,course:r,storeInfo:a}=e,i=t.status===s.N.RSVP?this.config.WSA_RESERVATION_HOLD:this.config.WSA_WAITLIST_HOLD,{data:n}=await this.wsaTransport.post("/sessions/".concat(t.id).concat(i),null,{params:{templateType:r.type},headers:{storeNumber:a.storeNum},withCredentials:!0});return n.lockId&&n.expiration&&n||{}}async getReservationsHistory(e){let{data:t}=await this.wsaTransport.get("".concat(this.config.WSA_WORKSHOPS_ROOT).concat(this.config.WSA_FETCH_RESERVATIONS),{params:{locale:e},withCredentials:!0});return t&&t.reservations||[]}async getWorkshopStatus(e){let{schedule:t,course:r,localeId:a,storeInfo:s}=e,{data:i}=await this.wsaTransport.get("".concat(this.config.WSA_WORKSHOPS_ROOT,"/").concat(t.id).concat(this.config.WSA_WORKSHOP_STATUS),{params:{locale:a,workshopType:r.type,storeNumber:s.storeNum},withCredentials:!0});if(!i)return{};let{numberOfPlusOnesAvailable:n,...o}=i,l=null==n?n:parseInt(n,10);return{...o,numberOfPlusOnesAvailable:l}}async getUserInformation(){let{data:e}=await this.bffTransport.post("".concat(this.config.BFF_VALIDATION),this.serializeAsForm({func:"prsId;firstName;lastName;emailAddress;phoneMobile",countryCode:this.countryCode}),{withCredentials:!0});return e}async createReservation(e){let{userLocation:{timezone:{name:t=""}={}}={},numberOfPlusOnes:r,storeInfo:i,localeId:n=a.Z.en_US,schedule:o,course:l,legalConsentAccepted:c,payload:d={}}=e,u=null;if(o.displayDate){let{dayNumber:e="",monthLong:a="",timeStart:h="",timeStartWithTimeZone:m="",timeEnd:p="",timeZone:f="",dateLongDay:g="",weekdayLong:{lower:v="",upper:x=""}={}}=o.displayDate[0],b={numberOfPlusOnes:r,workshopId:o.id,courseId:o.courseId,locale:n,workshopType:l.type,storeNumber:i.storeNum,sessionTimeInCustomerTimezone:{dayNumber:e,monthLong:a,timeStart:h,timeEnd:p,timeZone:f,timeZoneId:t,weekdayLong:v,weekdayLongLower:v,weekdayLongUpper:x,formattedDate:g,formattedTime:m},legalConsentAccepted:c};Object.getOwnPropertyNames(d).forEach(e=>{b[e]=d[e]});let{data:S}=await this.wsaTransport.post("".concat(this.config.WSA_WORKSHOPS_ROOT,"/").concat(o.id).concat(this.config.WSA_CREATE_RESERVATION),b,{withCredentials:!0});if(u=S&&S.reservations&&S.reservations[0]){let e={title:"Sign up confirmation",events:"event148",eVar80:o.storeNum||"",eVar81:l.prefix||"",eVar82:l.name||"",eVar83:new Date(o.startTime).toUTCString()};o.status===s.N.WAITLIST&&(e.title="Wailist confirmation",e.events="event257"),this.analyticsService.trackEvent(e)}}return u}async updateReservation(e){let{countryCode:t,phone:r,reservationId:a,workshopId:s}=e,{data:i}=await this.wsaTransport.put("".concat(this.config.WSA_WORKSHOPS_ROOT,"/").concat(s).concat(this.config.WSA_UPDATE_RESERVATION),{countryCode:t,phone:r,reservationId:a,smsOptIn:!0},{withCredentials:!0});return i&&i.reservations&&i.reservations[0]||null}async createGroupBookingSession(e){let{templateId:t,dsId:r,payload:a}=e,s={templateId:t,dsId:r,...a},{data:i}=await this.wsaTransport.post("".concat(this.config.WSA_CREATE_GROUP_BOOKING_SESSION),s,{withCredentials:!0});return i||null}serializeAsForm(e){let t=[];for(let r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}getValuesFromConfig(){let{appId:e,baseUrl:t,requestTimeout:r,headers:a,workshopsRoot:s,endpoints:{reservations:i,workshopStatus:n,createReservation:o,updateReservation:l,reservationHold:c,waitlistHold:d,createGroupBookingSession:u}}=this.configManager.getRegistrationWorkflowConfig(this.currentLocale.isoCountryCode);return{APP_ID:e,REQUEST_TIMEOUT:r,REQUEST_HEADERS:a,WSA_SERVICE_ROOT:t,WSA_WORKSHOPS_ROOT:s,WSA_FETCH_RESERVATIONS:i,WSA_WORKSHOP_STATUS:n,WSA_CREATE_RESERVATION:o,WSA_UPDATE_RESERVATION:l,WSA_CREATE_GROUP_BOOKING_SESSION:u,WSA_RESERVATION_HOLD:c,WSA_WAITLIST_HOLD:d,BFF_VALIDATION:this.configManager.getEndpoint("validate")}}constructor(e,t,r,a){super(e,r),this.logger=r,this.analyticsService=a,this.currentLocale=t,this.config=this.getValuesFromConfig(),this.wsaTransport=this.getTransport(this.config.WSA_SERVICE_ROOT,{headers:{...this.config.REQUEST_HEADERS,appId:this.config.APP_ID,txnId:(0,i.u)()},timeout:this.config.REQUEST_TIMEOUT},!0),this.countryCode=(0,o.D)(e.getMainSiteUrl(this.currentLocale.stageRootPath))?c.t.CN:c.t.US;let s="".concat((0,n.ai)(this.countryCode,e,e.getMainSiteUrl(this.currentLocale.stageRootPath))).concat(e.getApiBase());this.bffTransport=this.getTransport(s,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:this.config.REQUEST_TIMEOUT},!0)}}},79384:function(e,t,r){"use strict";r.d(t,{$:function(){return s}});var a=r(68999);let s={"Error.No.Workshop.or.Event.in.the.past":a.J.GENERIC_ERROR,"Error.Workshop.Full":a.J.FULL,"Error.Customer.Already.Reserved.Event":a.J.ALREADY_RESERVED,"Error.Check.Limits":a.J.LIMIT,"Error.Camp.Reservation.Full":a.J.RSVP_FULL,"Error.Camp.Reservation.Waitlist.Full":a.J.WAITLIST_FULL,"Error.Camp.Lock.Reservation.Full":a.J.HOLD_SESSION_FULL,"Error.Camp.Lock.Reservation.Waitlist.Full":a.J.HOLD_WAITLIST_FULL}},15574:function(e,t,r){"use strict";r.d(t,{$s:function(){return a.$},V6:function(){return l},Iq:function(){return n}});var a=r(79384),s=r(68999),i=r(64181);class n{async initiateWorkflow(e){let t,r;let a=this.registrationDataService.getReservationsHistory(e.localeId),s=this.registrationDataService.getWorkshopStatus(e);try{t=await a}catch(e){t=null,this.logger.error("Error occurred: BaseWorkflowDataService -> initiateWorkflow -> getReservationsHistory")}try{r=await s}catch(e){r=null,this.logger.error("Error occurred: BaseWorkflowDataService -> initiateWorkflow -> getWorkshopStatus")}return{status:r,reservations:t}}async createReservation(e){let t,r,a;let{localeId:n,schedule:o}=e;try{var l;if(t=await this.registrationDataService.getReservationsHistory(n)){if(this.isAlreadyRegisteredOnWorkshop(null!==(l=null==o?void 0:o.id)&&void 0!==l?l:"",t))a=s.J.ALREADY_RESERVED;else try{r=await this.registrationDataService.createReservation(e)}catch(r){this.logger.error("Error occurred: BaseWorkflowDataService -> createReservation -> createReservation");let{data:{errorKey:e}}=r.response;if(e&&i.bv.test(e)){let[r,a]=e.split(i._x);return{reservations:t,isPLusOneOverflowError:!0,numberOfPlusOnesAvailable:parseInt(a,10)-1}}a=(0,i.wY)(r,this.ERROR_KEYS)}}else a=s.J.FORBIDDEN}catch(e){a=(0,i.wY)(e,this.ERROR_KEYS),this.logger.error("Error occurred: BaseWorkflowDataService -> createReservation -> getReservationsHistory")}return{reservations:t,reservation:r||(0,i.fX)(a)}}isAlreadyRegisteredOnWorkshop(e,t){return -1!==(t||[]).findIndex(t=>t.workshopId===e)}constructor(e,t){this.registrationDataService=e,this.logger=t,this.ERROR_KEYS=a.$}}var o=r(93213);class l{async createReservation(e){let t=null;try{t=await this.registrationDataService.createGroupBookingSession(e)}catch(e){t=(0,i.fX)((0,i.wY)(e,this.ERROR_KEYS)),this.logger.error("Error occurred: GroupBookingWorkflowDataService -> createReservation")}return{reservation:t}}async getUserInformation(){let e=null;try{(e=await this.registrationDataService.getUserInformation()).isSuccess="0"===e.status}catch(t){this.logger.error("Error occurred: GroupBookingWorkflowDataService -> getUserInformation"),e=null}return e}constructor(e,t){this.registrationDataService=e,this.logger=t,this.ERROR_KEYS={...a.$,"Group.Booking.Block.Unavailable":o.Jr.UNAVAILABLE}}}},50209:function(e,t,r){"use strict";r.d(t,{Bq:function(){return l},Qs:function(){return a},ig:function(){return i},iw:function(){return n},qT:function(){return s}});let a=/^\s*[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z0-9-]+)\s*$/,s=/\S+/gi,i=/^\s*[^\\!"“”#$%*+:;<=>?@[\]_^{|}~]+\s*$/gi,n=/^\s*\d+\s*$/gi,o={email:a,phone:n,emergencyContactPhoneNumber:n};function l(e,t){let r=o[e];if(r&&t)return new RegExp(r).test(t)}},8345:function(){},9805:function(){},33772:function(){},15393:function(){},84481:function(){},98793:function(){},35803:function(){},84086:function(){},59692:function(){},50056:function(){},34307:function(){},47089:function(){},84107:function(){},65031:function(){},88199:function(){},93437:function(){},89825:function(){},12452:function(){},77158:function(){},95731:function(){},70753:function(){},4493:function(){},29595:function(){}}]);