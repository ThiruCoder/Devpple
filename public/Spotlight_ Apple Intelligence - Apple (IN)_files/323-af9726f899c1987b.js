(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{42480:function(){},10167:function(e,t,a){var l;l=function(){var e=e||function(e,t){if("undefined"!=typeof window&&window.crypto&&(l=window.crypto),"undefined"!=typeof self&&self.crypto&&(l=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(l=globalThis.crypto),!l&&"undefined"!=typeof window&&window.msCrypto&&(l=window.msCrypto),!l&&void 0!==a.g&&a.g.crypto&&(l=a.g.crypto),!l)try{l=a(42480)}catch(e){}var l,n=function(){if(l){if("function"==typeof l.getRandomValues)try{return l.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof l.randomBytes)try{return l.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var a;return e.prototype=t,a=new e,e.prototype=null,a}}(),i={},s=i.lib={},o=s.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=o.extend({init:function(e,a){e=this.words=e||[],t!=a?this.sigBytes=a:this.sigBytes=4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,a=e.words,l=this.sigBytes,n=e.sigBytes;if(this.clamp(),l%4)for(var r=0;r<n;r++){var i=a[r>>>2]>>>24-r%4*8&255;t[l+r>>>2]|=i<<24-(l+r)%4*8}else for(var s=0;s<n;s+=4)t[l+s>>>2]=a[s>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],a=0;a<e;a+=4)t.push(n());return new u.init(t,e)}}),c=i.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,l=[],n=0;n<a;n++){var r=t[n>>>2]>>>24-n%4*8&255;l.push((r>>>4).toString(16)),l.push((15&r).toString(16))}return l.join("")},parse:function(e){for(var t=e.length,a=[],l=0;l<t;l+=2)a[l>>>3]|=parseInt(e.substr(l,2),16)<<24-l%8*4;return new u.init(a,t/2)}},h=c.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,l=[],n=0;n<a;n++){var r=t[n>>>2]>>>24-n%4*8&255;l.push(String.fromCharCode(r))}return l.join("")},parse:function(e){for(var t=e.length,a=[],l=0;l<t;l++)a[l>>>2]|=(255&e.charCodeAt(l))<<24-l%4*8;return new u.init(a,t)}},m=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=m.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a,l=this._data,n=l.words,r=l.sigBytes,i=this.blockSize,s=r/(4*i),o=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,c=e.min(4*o,r);if(o){for(var d=0;d<o;d+=i)this._doProcessBlock(n,d);a=n.splice(0,o),l.sigBytes-=c}return new u.init(a,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new g.HMAC.init(e,a).finalize(t)}}});var g=i.algo={};return i}(Math);return e},e.exports=l()},40243:function(e,t,a){var l;l=function(e){var t,a,l,n,r,i;return a=(t=e.lib).WordArray,l=t.Hasher,n=e.algo,r=[],i=n.SHA1=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a=this._hash.words,l=a[0],n=a[1],i=a[2],s=a[3],o=a[4],u=0;u<80;u++){if(u<16)r[u]=0|e[t+u];else{var c=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=c<<1|c>>>31}var d=(l<<5|l>>>27)+o+r[u];u<20?d+=(n&i|~n&s)+1518500249:u<40?d+=(n^i^s)+1859775393:u<60?d+=(n&i|n&s|i&s)-1894007588:d+=(n^i^s)-899497514,o=s,s=i,i=n<<30|n>>>2,n=l,l=d}a[0]=a[0]+l|0,a[1]=a[1]+n|0,a[2]=a[2]+i|0,a[3]=a[3]+s|0,a[4]=a[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,l=8*e.sigBytes;return t[l>>>5]|=128<<24-l%32,t[(l+64>>>9<<4)+14]=Math.floor(a/4294967296),t[(l+64>>>9<<4)+15]=a,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=l._createHelper(i),e.HmacSHA1=l._createHmacHelper(i),e.SHA1},e.exports=l(a(10167))},40323:function(e,t,a){"use strict";a.d(t,{default:function(){return tV}});var l,n,r,i,s,o,u,c,d=a(57437),h=a(84772),m=a.n(h),p=a(99376),g=a(2265),v=a(70764),f=a.n(v),y=a(21652),b=a.n(y),S=a(93213),E=a(45786);function N(e){let t=e.privacyStatement;if(!t)return!1;let{title:a,paragraph:l,url:n,urlCta:r}=t;return a&&l&&n&&r}var R=a(82538),x=a(97314),w=a(38452);let _=e=>{let t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),t.remove()},C=(e,t,a)=>{let{host:l,pathname:n,protocol:r,search:i}=new URL(t),s=(0,w.Te)(i,{error:a}),o=encodeURIComponent("".concat(r,"//").concat(l).concat(n,"?").concat(s)),u=new URL(e),c=u.search?"?".concat(u.search,"&fallback=").concat(o.toString()):"?fallback=".concat(o.toString());return"".concat(u.protocol,"//").concat(u.host).concat(u.pathname).concat(c)};var O=a(65667),T=a(686),k=a(78194),L=a(82099),j=a(17346),I=a(24809),A=a(90061),D=a(31966),P=a(50432),M=a(47965),U=a(12877),B=a(2731),F=a(92453),V=a(18285),H=a(64181),G=a(72679),z=a(70174),J=a(40243),Z=a.n(J),W=a(15574),X=a(87769),K=a(62998);let q=/^(mandatory.param.missing|Error.Syntax)\./gi;class Y extends H.Bn{static getCustomHeaders(e){let t={};return(0,S.Zv)(e)?t.GUEST_REG_EMAIL=e.email:t.GUEST_REG_PHONE="".concat(e.countryCode).concat(e.phone),t}static getConfig(e,t){let{appId:a,baseUrl:l,requestTimeout:n,headers:{agent:r},endpoints:i}=e.getRegistrationWorkflowConfig(t.currentLocale.isoCountryCode),{guestReservation:s,guestReservationToken:o}=i;return{agent:r,appId:a,baseUrl:l,guestReservation:s,guestReservationToken:o,timeout:n}}async initCreateGuestRegistration(e,t,a,l,n){try{let{token:r,hb:i}=await this.getToken(e),s=await this.getSalt(r,i),o={...e,locale:t,token:r,salt:s,legalConsentAccepted:a,globalLegalConsentAccepted:l,numberOfPlusOnes:n};return{registration:await this.executeCreateUpdateRegistration(o)}}catch(e){if(e.response){let{status:t,data:{errorKey:a}}=e.response;if(t===K.d.BAD_REQUEST||t===K.d.EXPECTATION_FAILED){if(q.test(a))return{errorKey:a,errorField:a.replace(q,"")};if(H.bv.test(a)){let[e,t]=a.split(H._x);return{errorField:"numberOfPlusOnes",errorKey:e,errorValue:parseInt(t,10)-1}}}}return{errorStatus:(0,H.wY)(e,Y.ERROR_KEYS)}}}async initUpdateGuestRegistration(e,t){let{token:a}=await this.getToken(e),l={...e,...t,token:a};return await this.executeCreateUpdateRegistration(l,!0)}getSalt(e,t){return new Promise(a=>{let l=(1<<t)-1,n=Math.floor(1e7*Math.random());!function t(){for(let t=n;t<n+1e3;t++)if((Z()("".concat(e,":").concat(t)).words[4]&l)==0){a("".concat(t));return}n+=1e3,setTimeout(t,0)}()})}async getToken(e){let t=Y.getCustomHeaders(e),{guestReservationToken:a}=this.dataServiceConfig;return(await this.transport.post(a,e,{headers:t})).data}async executeCreateUpdateRegistration(e,t){let a=Y.getCustomHeaders(e),{guestReservation:l}=this.dataServiceConfig,n=t?this.transport.put:this.transport.post;return{...(await n(l,e,{headers:a})).data,isGuestRegistration:!0}}constructor(e,t,a){super(e,a),this.dataServiceConfig=Y.getConfig(e,t);let{agent:l,appId:n,baseUrl:r,timeout:i}=this.dataServiceConfig,s=(0,X.u)();this.transport=this.getTransport(r,{headers:{agent:l,appId:n,txnId:s},timeout:i},!0)}}Y.ERROR_KEYS={...W.$s,"Error.Not.Guest.Reservable":S.Jr.NOT_GUEST_RESERVABLE,"Error.Request.Rejected":S.Jr.REQUEST_REJECTED,"Error.No.Workshop.or.Event":S.Jr.GENERIC_ERROR};var $=a(58679),Q=a(12115),ee=a(8435),et=a(720),ea=a(27485),el=a(30290),en=a(40125);let er=e=>{var t,a,l;let{schedule:n,eventType:r,modalViewport:i,callback:s,reservations:o,isMultiLanguage:u,reservation:c}=e,h=null!==(l=null==n?void 0:null===(t=n.displayDate)||void 0===t?void 0:t.length)&&void 0!==l?l:0,p=(null==c?void 0:c.workshopId)===(null==n?void 0:n.id),g=(0,j.Z)(),v=g.value("global.cta-select"),f=e=>{let{displayDate:t,storeTitle:a}=e,l="";if(t){let{date:e,timeRange:a}=t[0];l="".concat(e," ").concat(a)}return"".concat(v," - ").concat(l," ").concat(a)},y=()=>{var e,t;return(null===(e=n.displayDate)||void 0===e?void 0:e.length)===3&&(0,x.E4)(o,null!==(t=null==n?void 0:n.id)&&void 0!==t?t:"")},b=()=>u&&n.lang&&(0,d.jsxs)(d.Fragment,{children:[" "+g.value("global.delivery-language-open-punctuation"),(0,d.jsx)("span",{className:"delivery-language",children:g.value("language.".concat(n.lang))}),g.value("global.delivery-language-close-punctuation")]});return(0,d.jsxs)("li",{className:"location-time-list-item row",role:"listitem",children:[(0,d.jsxs)("div",{className:"column large-8 large-offset-1 small-11 small-push-1 schedule-list-item__left-information",children:[(0,d.jsxs)("div",{className:"typography-label schedule-list-item-title",children:[h>1?n.storeTitle:null==n?void 0:null===(a=n.displayDate)||void 0===a?void 0:a[0].timeSelectorDate,1===h&&b()]}),h>1&&(0,d.jsxs)("div",{className:"camp-schedule-label",children:[g.value("details.multisession-three-parts"),b()]}),(e=>{var t,a;let l=null!==(t=e.displayDate)&&void 0!==t?t:[],n=null!==(a=null==l?void 0:l.length)&&void 0!==a?a:0;return l.map((e,t)=>(0,d.jsx)("span",{className:"schedule-list-item__store-time typography-body-reduced",children:n>1?e.fullDate:e.timeSelectorTimeRange},t))})(n),(()=>{var e,t,a;let l=null!==(t=null===(e=n.displayDate)||void 0===e?void 0:e.length)&&void 0!==t?t:0,i=m()("schedule-list-item__store-name","typography-body-reduced",{"schedule-list-item__store-name--online":(0,E.o)(r)}),s="";return(0,E.o)(r)?s=g.value("global.online"):1===l&&(s=null!==(a=null==n?void 0:n.storeTitle)&&void 0!==a?a:""),!!s&&(0,d.jsx)("span",{className:i,children:s})})(),(()=>{var e,t;let a=m()("schedule-list-item__status","typography-body-reduced"),l=(0,x.E4)(o,null!==(e=null==n?void 0:n.id)&&void 0!==e?e:"")||p,r=y();if(r||l||!l&&(0,x.fJ)(null!==(t=null==n?void 0:n.status)&&void 0!==t?t:"")){let e=l||r?S.N3.RESERVED:n.status;return(0,d.jsx)("span",{className:a,children:g.value("global.".concat(x.tm[null!=e?e:""]))})}return n.isSignLanguage?(0,d.jsx)("span",{className:a,children:g.value("global.sign-language-supported")}):null})()]}),(0,d.jsx)("div",{className:"column large-3 small-11 small-push-1 schedule-list-item__right-information",children:(0,d.jsx)("div",{className:"schedule-list-item__button","data-schedule-id":n.id,children:(e=>{var t,a;let l=f(n),r=(0,x.E4)(o,null!==(a=n.id)&&void 0!==a?a:"");if((null===(t=n.displayDate)||void 0===t?void 0:t.length)===1&&r||p){let e=(0,S.r$)(r)?g.value("global.cta-active-guest-rsvp"):g.value("global.cta-active-rsvp");return(0,d.jsxs)(en.zx,{className:"rsvp-reserved",onClick:s,children:[(0,d.jsx)("i",{className:"icon icon-check"}),(0,d.jsx)("span",{className:"rsvp-reserved-text",children:e})]})}return(0,d.jsx)(en.zx,{onClick:s,ariaLabel:l,children:v})})(null==n||n.id)})})]})};a(70642);let ei=e=>{let{updateCurrentSchedule:t,schedules:a,eventType:l,reservations:n,reservation:r,isMultiLanguage:i,callback:s,title:o}=e,u=e=>()=>{null==t||t(e),s(!1)};return(0,d.jsx)(d.Fragment,{children:a&&a.length>0&&(0,d.jsx)("ul",{className:"location-time-list",role:"list","aria-label":o,children:a.map((e,t)=>{var a;return(0,d.jsx)(er,{isMultiLanguage:i,callback:u(null!==(a=e.id)&&void 0!==a?a:""),reservations:n,reservation:r,schedule:e,eventType:l},t)})})})};var es=a(50403),eo=a(64798),eu=a.n(eo),ec=a(37560),ed=a.n(ec),eh=a(41428),em=a(35477);let ep=e=>{let{displayDate:t,disableViolator:a,storeTitle:l,eventType:n,scheduleId:r,selectedSchedule:i,eventStatus:s,onClickHandler:o,isMultiLanguage:u,lang:c,isSignLanguage:h}=e,p=(0,j.Z)(),g=[S.tw.VIRTUAL,S.tw.VIRTUAL_SPECIAL_EVENTS].includes(n)?p.value("global.online"):l,v=e=>{if(!e||!e.length)return null;let t=e.map((e,t)=>(0,d.jsxs)("div",{className:"dropdown-camp-info",children:[(0,d.jsx)("p",{className:"form-dropdown-option-title",children:e.timeSelectorDate}),(0,d.jsx)("p",{className:"form-dropdown-option-time",children:e.timeSelectorTimeRange})]},"camp-date-".concat(t)));return(0,d.jsx)(d.Fragment,{children:t})},f=()=>{let e=!a&&(0,x.fJ)(s);if(e||h){let t=e?p.value("global.".concat(x.tm[s])):p.value("global.sign-language-supported");return(0,d.jsx)("p",{className:"event-violator",children:t})}return null},y=()=>u&&c&&(0,d.jsxs)(d.Fragment,{children:[" "+p.value("global.delivery-language-open-punctuation"),(0,d.jsx)("span",{className:"delivery-language",children:p.value("language.".concat(c))}),p.value("global.delivery-language-close-punctuation")]});return(0,d.jsx)("li",{onClick:o,className:m()("form-dropdown-option",{checked:i===r,selected:i===r}),role:"option","aria-selected":i===r,"aria-current":i===r,tabIndex:-1,children:n===S.tw.CAMPS?((e,t)=>{if(!e||!e.length)return null;let a=p.value("details.multisession-three-parts");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[a,y()]}),(0,d.jsxs)("div",{children:[v(e),(0,d.jsx)("div",{className:"dropdown-camp-info",children:t})]}),f()]})})(t,l):((e,t,a)=>{let l=m()("form-dropdown-option-store",{"form-dropdown-option-store--online":(0,E.o)(a)});return e&&e.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{className:"form-dropdown-option-title",children:[e[0].timeSelectorDate,y()]}),(0,d.jsx)("p",{className:"form-dropdown-option-time",children:e[0].timeSelectorTimeRange}),(0,d.jsx)("p",{className:l,children:t}),f()]}):null})(t,g,n)},"form-dropdown-".concat(r))};var eg=a(55761);let ev=e=>{let t={};return t.ids=[],t.violatorCount=0,e.forEach(e=>{t.ids.push(e.id),(e.status&&(0,x.fJ)(e.status)||e.isSignLanguage)&&t.violatorCount++}),t},ef=(e,t)=>{let a=e.length,l=0;return t===eg.t.CAMPS?a>2&&(l=a-2):a>4&&(l=a-4),l};a(54420),(l=s||(s={})).DROPDOWN="DROPDOWN",l.DROPDOWN_OPTIONS="DROPDOWN_OPTIONS";let ey={UNIT:"px",TOP_OFFSET:104,BOTTOM_OFFSET:60,BORDER_HEIGHT_DEFAULT:2},eb=new V.bK,eS=new z.qD,eE=e=>{let{nearbySchedules:t,displayDate:a,storeTitle:l,scheduleId:n,storeNum:r,eventType:i,eventStatus:s,dropdownSchedules:o,onChangeSchedule:u,callback:c,isMultiLanguage:h,isSignLanguage:p,lang:v,historyReservations:f,disabled:y,disableViolator:b,scheduleModalIsOpen:E,isLoading:N=!1}=e,R=(0,j.Z)(),w=(0,M.Z)(),_=(0,eh.J)(),{analyticsService:C}=(0,T.Z)(),[O,k]=(0,g.useState)(!1),[L,I]=(0,g.useState)(!1),[A,D]=(0,g.useState)(null),P=(0,U.z)(o),B=(0,U.z)(E),F=(0,U.z)(L),V=(0,g.useRef)(!1),H=(0,g.useRef)(0),G=(0,g.useRef)(null),z=(0,g.useRef)(null),J=(0,g.useRef)(null),Z=(0,g.useRef)(null),W=(0,g.useRef)(null),X=(0,g.useRef)(null);(0,g.useEffect)(()=>(document.body.addEventListener("focusin",e_),document.body.addEventListener("click",e_),document.body.addEventListener("touchstart",e_),()=>{ex(),document.body.removeEventListener("focusin",e_),document.body.removeEventListener("click",e_),document.body.removeEventListener("touchstart",e_)}),[]),(0,g.useEffect)(()=>{let e=!!B&&!E,t=!!F&&!L,a=!ed()(P,o);L&&(E||e||eN(),eR()),a&&(D(null),I(!1)),ei(),es(!0,e,t),L||ex()},[o,L,E,s,f,_]);let K=!!o.length,q=ev(o),Y=q.ids;q.violatorCount;let $=R.value("global.cta-select"),Q=R.value("details.alternate-times-title"),ee="".concat($," ").concat(Q),et=ef(null!=t?t:[],i),el=et>0,en=m()("column large-4 large-offset-1 medium-6",o&&o.length?"small-12 small-offset-0":"small-10"),er=m()("form-dropdown-options",el&&"form-dropdown-options-with-more"),ei=(0,g.useCallback)(()=>{let e=(e,t,a,l)=>{let n=window.innerHeight,r=n-a,i=eT();if("DROPDOWN"===l){var s,o;let a=null!==(o=null===(s=G.current)||void 0===s?void 0:s.getBoundingClientRect().top)&&void 0!==o?o:0;return(t+i<r?t+e+i:n-a-ey.BOTTOM_OFFSET)+ey.BORDER_HEIGHT_DEFAULT}if("DROPDOWN_OPTIONS"===l)return t+i<r?t:r-i-ey.BOTTOM_OFFSET},t=J.current,a=G.current,l=Z.current,n=W.current,r=z.current;if(null===r||!t||!a||!l||!n||!r)return;let s=r.getBoundingClientRect().height;if(t.style.height=s+ey.UNIT,n.style.top=s+ey.UNIT,L){let t;if(t=_.viewport,i===S.tw.CAMPS||eC(t)||!eO()){l.style.height="",a.style.height=s+l.getBoundingClientRect().height+eT()+ey.BORDER_HEIGHT_DEFAULT+ey.UNIT;return}let r=n.getBoundingClientRect().top,o=Array.from(l.children).reduce((e,t)=>e+=t.getBoundingClientRect().height,0);a.style.height=e(s,o,r,"DROPDOWN")+ey.UNIT,l.style.height=e(s,o,r,"DROPDOWN_OPTIONS")+ey.UNIT}else a.style.height=s+ey.UNIT},[i,L,_.viewport]);(0,g.useEffect)(()=>{N||ei()},[N,ei]),(0,g.useEffect)(()=>{let e=z.current,t=W.current;if(!e)return;let a=new ResizeObserver(eu()(e=>{var a,l;(null==e?void 0:null===(l=e[0])||void 0===l?void 0:null===(a=l.borderBoxSize)||void 0===a?void 0:a[0].blockSize)!==(null==t?void 0:t.offsetTop)&&ei()},50));return a.observe(e),()=>{a.disconnect()}},[ei,L]);let es=(e,t,a)=>{if((!L&&t||a&&!V.current)&&setTimeout(()=>{var e;eN(),null===(e=G.current)||void 0===e||e.focus()},0),L){var l,n;O&&(null===(l=Z.current)||void 0===l||l.focus(),k(!1)),t&&!e&&(null===(n=X.current)||void 0===n||n.focus())}V.current=!1},eo=e=>{w.getSms()&&w.removeSms(),w.getSMSFormErrorData()&&w.removeSMSFormErrorData(),u(e),I(!1)},ec=e=>{switch(e.KeyCode||e.which){case S.aT.UP:e.preventDefault(),X.current&&X.current.blur&&Z.current&&Z.current.focus&&(X.current.blur(),Z&&Z.current&&(D(Y[Y.length-1]),Z.current.focus()));break;case S.aT.ESCAPE:var t;e.preventDefault(),I(!1),D(null),null===(t=G.current)||void 0===t||t.focus()}},eg=(e,t)=>(0,x.E4)(f,e)&&S.N3.RESERVED||t,eE=e=>()=>eo(e),eN=()=>{var e,t,a;let l=window.pageYOffset+(null!==(a=null===(t=G.current)||void 0===t?void 0:null===(e=t.getBoundingClientRect())||void 0===e?void 0:e.top)&&void 0!==a?a:0)-ey.TOP_OFFSET;eS.windowScrollToY(l,{withAnimation:!1})},eR=()=>{if(!H.current){let e=window.setInterval(()=>{V.current&&(I(!1),D(null))},250);H.current=e}},ex=()=>{window.clearInterval(H.current),H.current=0},ew=e=>{let t=e;for(;t;){let e="multi-dropdown"===t.id,a=t.classList&&t.classList.contains("generic-list-modal-close");if(e||a)return t;t=t.parentNode}},e_=e=>{e.target&&!ew(e.target)&&H.current&&(V.current=!0)},eC=e=>e===S.ET.SMALL||e===S.ET.XSMALL,eO=()=>window.innerHeight>500,eT=()=>X&&X.current?X.current.offsetHeight:0;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(em.T,{listener:()=>{ei()}}),(0,d.jsx)("div",{className:m()("row","time-selector",i!==S.tw.CAMPS?"time-selector-standard":"time-selector-camp",{"single-session":!o||!o.length,disabled:y}),children:(0,d.jsx)("div",{className:en,children:(0,d.jsx)("div",{className:"form-dropdown",children:(0,d.jsxs)("div",{className:m()("form-dropdown-multiline",{"is-expanded":L,focused:L}),ref:J,id:"multi-dropdown",children:[(0,d.jsx)("button",{"aria-controls":"form-dropdown-options-container","aria-disabled":y||N,"aria-expanded":L,"aria-haspopup":"listbox",className:m()("form-dropdown-select",{"no-dropdown":!o||!o.length}),disabled:y||N,onClick:()=>{K&&(L||null==C||C.trackEvent({title:"time selection dropdown",prop3:"t@a - time selection dropdown"}),I(e=>!e))},onKeyDown:e=>{var t,a;let l=e.KeyCode||e.which;switch(k(!1),l){case S.aT.ENTER:case S.aT.SPACE:case S.aT.UP:e.preventDefault(),I(e=>!e),null===(t=G.current)||void 0===t||t.focus();break;case S.aT.DOWN:e.preventDefault(),I(!0),D(Y),k(!0),null===(a=Z.current)||void 0===a||a.focus();break;case S.aT.ESCAPE:I(!1),D(null)}},ref:G,children:(0,d.jsx)("ul",{className:"form-dropdown-title",ref:z,tabIndex:-1,children:!N&&(0,d.jsx)(ep,{displayDate:a,disableViolator:b,eventType:i,eventStatus:s,scheduleId:n,storeTitle:l,isMultiLanguage:h,isSignLanguage:p,lang:v})})}),t&&t.length>0&&!y&&(0,d.jsx)("span",{className:m()("form-dropdown-chevron",{"icon-chevrondown":!L,"icon-chevronup":L}),"aria-hidden":"true"}),(0,d.jsx)("div",{className:"form-dropdown-options-container",ref:W,children:(0,d.jsxs)("div",{className:er,children:[(0,d.jsx)("ul",{className:"form-dropdown-options-list",ref:Z,role:"listbox",onKeyDown:e=>{var t,a,l,n,r,i,s;let o=e.KeyCode||e.which,u=Y.indexOf(A);switch(o){case S.aT.UP:Y.length&&u>0&&(e.preventDefault(),D(Y[--u]),null===(t=Z.current)||void 0===t||t.scrollIntoView());break;case S.aT.DOWN:Y.length&&u<Y.length-1?(e.preventDefault(),D(Y[++u]),null===(a=Z.current)||void 0===a||a.scrollIntoView()):Y.length&&u===Y.length-1&&(null===(l=X.current)||void 0===l?void 0:l.focus)&&(e.preventDefault(),D(null),null===(n=X.current)||void 0===n||n.focus());break;case S.aT.ENTER:case S.aT.SPACE:Y.length&&A&&(e.preventDefault(),eo(A));break;case S.aT.HOME:e.preventDefault(),D(Y[0]),null===(r=G.current)||void 0===r||r.scrollIntoView();break;case S.aT.END:e.preventDefault(),D(Y[Y.length-1]),null===(i=G.current)||void 0===i||i.scrollIntoView();break;case S.aT.TAB:D(null);break;case S.aT.ESCAPE:I(!1),D(null),null===(s=G.current)||void 0===s||s.focus()}},"aria-label":ee,tabIndex:-1,children:((e,t)=>{if(!e.length)return null;let a=e.map(e=>{var a,l,n,r,i,s,o;return(0,d.jsx)(ep,{displayDate:null!==(a=e.displayDate)&&void 0!==a?a:[],eventType:t,selectedSchedule:null!=A?A:"",storeTitle:null!==(l=e.storeTitle)&&void 0!==l?l:"",eventStatus:eg(null!==(n=e.id)&&void 0!==n?n:"",null!==(r=e.status)&&void 0!==r?r:""),scheduleId:null!==(i=e.id)&&void 0!==i?i:"",onClickHandler:eE(null!==(s=e.id)&&void 0!==s?s:""),isMultiLanguage:h,isSignLanguage:e.isSignLanguage,lang:null!==(o=e.lang)&&void 0!==o?o:""},e.id)});return(0,d.jsx)(d.Fragment,{children:a})})(o,i)}),el&&(e=>{let t=R.value("global.cta-see-more-numbered");return(0,d.jsx)("button",{className:"see-more",ref:X,onClick:c,onKeyDown:ec,"data-analytics-click":eb.withProp3("t@a - time selection see more").build(),children:(0,ea.kM)(t,{total:e})})})(et)]})})]})})})})]})};a(44126);let eN=e=>{var t,a,l,n,r,i;let{scheduleId:s,nearbySchedules:o,schedule:u,course:c,dropdownSchedules:h,historyReservations:p,reservation:v,disabled:f,disableTimeSelectorViolator:y,changeSchedule:b,isConfirmationPage:N,isGroupBooking:R,isGuestRegistrationFormDisplayed:x,isLoading:w=!1}=e,_=(0,E.o)(c.type),C=m()("row","event-see-more",{hidden:!(null==o?void 0:o.length)||N||x}),O=(0,j.Z)(),T=(0,B.Z)(),[k,L]=(0,g.useState)(!1),I=()=>{L(e=>!e)},A=e=>e.length>1&&e.sort((e,t)=>{var a,l;return(null!==(a=null==e?void 0:e.storeName)&&void 0!==a?a:"").toUpperCase().localeCompare((null!==(l=t.storeName)&&void 0!==l?l:"").toUpperCase())}).sort((e,t)=>{var a,l;return(null!==(a=e.startTime)&&void 0!==a?a:0)-(null!==(l=t.startTime)&&void 0!==l?l:0)})||e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eE,{disabled:f,disableViolator:y,nearbySchedules:o,dropdownSchedules:h,eventType:null!==(t=c.type)&&void 0!==t?t:S.tw.VIRTUAL,callback:I,onChangeSchedule:b,scheduleId:s,displayDate:null!==(a=null==u?void 0:u.displayDate)&&void 0!==a?a:[],eventStatus:null!==(l=v.status)&&void 0!==l?l:u.status,storeTitle:null!==(n=null==u?void 0:u.storeTitle)&&void 0!==n?n:"",storeNum:null!==(r=null==u?void 0:u.storeNum)&&void 0!==r?r:"",isMultiLanguage:T.isMultiLanguage(),isSignLanguage:u.isSignLanguage,lang:null!==(i=null==u?void 0:u.lang)&&void 0!==i?i:"",historyReservations:p,scheduleModalIsOpen:!!h.length&&k,isLoading:w}),(0,d.jsx)(el.F,{type:es.w8.MIXED,title:_?O.value("details.alternate-times-online-title"):O.value("details.alternate-times-title"),renderList:()=>{var e;let t=A([u,...o]);return(0,d.jsx)(ei,{callback:I,schedules:t,eventType:null!==(e=null==c?void 0:c.type)&&void 0!==e?e:S.tw.VIRTUAL,updateCurrentSchedule:b,isMultiLanguage:T.isMultiLanguage(),title:O.value("details.alternate-times-title"),reservations:p||[],reservation:v})},isOpened:k,onClose:()=>{L(!1)},reverseAriaLabelElements:!0}),!R&&!w&&(0,d.jsx)("div",{className:C,id:"a",children:(0,d.jsx)("p",{className:"column large-4 large-offset-1 medium-8 small-10 typography-body-reduced",children:(()=>{let e=null==o?void 0:o.length;return 1===e?O.value("details.sessions-near-numbered-singular"):(0,ea.kM)(O.value("details.sessions-near-numbered"),{sessionsTotal:e})})()})})]})},eR=(e,t)=>{let a=void 0!==t.stageRootPath?"".concat(e).concat(t.stageRootPath,"/"):"".concat(e,"/"),l=t.schedule||{},n=t.store||{};if(!t.schedule)return{"@context":"http://schema.org","@type":"Event",name:t.pageTitle,image:t.backgroundImage,description:t.description,url:t.pageUrl};{let e="".concat(t.pageUrl).concat(t.schedule.id,"/?").concat(w.az.STORE_NUMBER,"=").concat(n.storeNum);return{"@context":"http://schema.org","@type":"Event",name:t.pageTitle,image:t.backgroundImage,description:t.description,url:e,startDate:l.displayStartTime,endDate:l.displayEndTime,eventStatus:"https://schema.org/EventScheduled",location:{"@type":"Store","@id":"".concat(a,"retail/").concat(n.slug,"/#store-address"),name:n.title,url:"".concat(a,"retail/").concat(n.slug,"/"),address:{"@type":"PostalAddress",streetAddress:n.address1,addressLocality:n.city,addressRegion:n.stateCode,postalCode:n.zip}},offers:{"@type":"Offer",url:e,category:"Primary",availability:"https://schema.org/OnlineOnly",price:"0"}}}},ex=e=>{let{siteURL:t,data:a}=e,l=eR(t,a);return(0,d.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}})};var ew=a(31341),e_=a(98689);a(87501);let eC="group-booking-detail";function eO(e){let{title:t,description:a,courseId:l,store:n,routeParams:r}=e,i=(0,L.Z)(),s=(0,j.Z)(),o=t||s.value("details.group-booking-detail-title"),u=a||s.value("details.group-booking-detail-description"),c=new URLSearchParams,h=i.getPageRoute(S.q.GROUP_BOOKING);return l&&c.set(e_.b.SESSION,l),(0,d.jsxs)("div",{className:"".concat(eC),children:[(0,d.jsx)("h3",{className:"".concat(eC,"__heading typography-callout"),children:o}),(0,d.jsx)("p",{className:"".concat(eC,"__paragraph"),children:u}),(0,d.jsx)(en.zx,{includeLocationParameter:!0,store:n,className:"".concat(eC,"__button"),href:"".concat(h,"?").concat(c.toString()),routeParams:{...r},children:s.value("details.group-booking-detail-cta")})]})}var eT=a(8593),ek=a(50209),eL=a(95209),ej=a(51361),eI=a(66806);a(42067),(n=o||(o={})).COUNTRY_CODE="countryCode",n.EMAIL="email",n.FIRST_NAME="firstName",n.LAST_NAME="lastName",n.PHONE="phone",n.NUMBER_OF_PLUS_ONES="numberOfPlusOnes";let eA=(0,g.forwardRef)((e,t)=>{let{cancelGuestRegistration:a,doAppleIDReservation:l,doGuestRegistration:n,onFlowFieldValidation:r,onFormExpanded:i,schedule:s,className:o,countryCodes:u,defaultCountryCode:c,isEmailForm:h,onCountryCodeChange:p,isGuestRegistrationFormDisplayed:v,hideGuestNumberField:y,numberOfPlusOnesAvailable:b,updateReservation:E,getSummaryData:N,startsExpanded:R=!1,isModalDisplayed:x}=e,[w,_]=(0,g.useState)(new Map),C=(0,j.Z)(),O=(0,g.useRef)(null),T=(0,g.useRef)(null),[k,L]=(0,g.useState)(!1),[I,A]=(0,g.useState)(R),[D,P]=(0,g.useState)(!1),[M,U]=(0,g.useState)(!1),[B,F]=(0,g.useState)(0),[V,G]=(0,g.useState)(!1);(0,g.useEffect)(()=>{v?W(0):X(0)},[v,I,V]),(0,g.useEffect)(()=>{let e=O.current,t=T.current,a=new ResizeObserver(eu()(()=>{W(0)},50));return e&&t&&v&&a.observe(t),v||a.disconnect(),()=>{a.disconnect()}},[v]);let z=e=>{var t;return null===(t=w.get(e))||void 0===t?void 0:t.value.toString()},J=()=>w.get("numberOfPlusOnes"),Z=(e,t)=>{let a=O.current,l=T.current;if(a&&l){if(e){let t=parseInt(l.style.height,10)+e;a.style.height=t+"px"}else a.style.height=t?l.scrollHeight+"px":"0px"}},W=e=>{Z(e,!0)},X=e=>{Z(e,!1)},K=(e,t)=>{e?W(t):X(t)},q=(e,t)=>{W(t)},Y=e=>{U(e)},$=(e,t)=>{for(let[a,l]of w.entries())a===e?(l.isValid=!1,l.isValidationRequired=!1,"numberOfPlusOnes"===e&&(F(null!=t?t:0),l.value=null!=t?t:0)):l.validate();P(!0)},Q=(e,t)=>{var a,l;if(w.has(e)&&(null===(a=w.get(e))||void 0===a?void 0:a.value)){let a=null===(l=w.get(e))||void 0===l?void 0:l.value;a&&(a=t)}},ee=()=>{for(let e of w.values())e.reset();A(!1)},et=e=>{let t={},a=Number.MAX_SAFE_INTEGER;for(let r of w.values()){var l,n;e&&r.isValid||!((null!==(l=null==r?void 0:r.sortNumber)&&void 0!==l?l:0)<a)||(t=r,a=null!==(n=r.sortNumber)&&void 0!==n?n:0)}f()(t)||null==t||t.focus()},ea=(e,t,a)=>{let l=w.get(e);if(l){if(l.isValid&&!I){i(),A(!0),Y(!1);let e=[...w.values()].sort((e,t)=>{var a,l;return(null!==(a=e.sortNumber)&&void 0!==a?a:0)-(null!==(l=t.sortNumber)&&void 0!==l?l:0)}).find(e=>{var t;return(null!==(t=e.sortNumber)&&void 0!==t?t:0)>2});e&&setTimeout(()=>{e.focus()},10)}l.isValid||l.focus()}r(e,t,a)},el=e=>{e.preventDefault(),l()},er=()=>{a(),E((0,H.fX)(S.Jr.FULL))},ei=e=>{let t=J(),a=parseInt(null==t?void 0:t.value,10);if(Y(!0),eg(),!(a<=e))return $("numberOfPlusOnes",a),et(!0),!0},es=(e,t)=>{if(t.eventStatus===S.Jr.FULL)return er(),!0;let a=t.numberOfPlusOnesAvailable;if(e!==a)return ei(null!=a?a:0)},eo=async()=>{let e=await N();if(e&&e.status)return es(b,e.status)},ec=async()=>{let e=!0,t={};for(let a of w.values()){await a.validate();let{isValid:l,name:n,value:r}=a;e=e&&("numberOfPlusOnes"===n||l),t[n]=r}return G(!e),{isFormValid:e,formData:t}},ed=async e=>{var t,a;let l;let{firstName:r,lastName:i,numberOfPlusOnes:o}=e,u=o?Number.parseInt(o,10):void 0;if(h){let{email:a}=e;l={email:a,firstName:r,lastName:i,sessionId:null!==(t=s.id)&&void 0!==t?t:""}}else{let{countryCode:t,phone:n}=e;l={countryCode:t,phone:n,firstName:r,lastName:i,sessionId:null!==(a=s.id)&&void 0!==a?a:""}}Object.keys(l).forEach(e=>{let t=l[e];l[e]="string"==typeof t?t.trim():t}),await n(l,u)},eh=async()=>{if(b&&await eo()){L(!1);return}let{isFormValid:e,formData:t}=await ec();e?await ed(t):et(!0),L(!1)},em=e=>{e&&w.set(e.name,e)},ep=e=>{let t=m()("last-name",{hidden:!I});return(0,d.jsx)(eL.n,{className:t,errorMessage:C.value("registration-form.error-lname-guest"),flyout:C.value("registration-form.name-last"),id:"lastName",name:"lastName",pattern:ek.ig,ref:e=>em(e),required:!0,sortNumber:e?4:3,getErrorClientHeight:q})},eg=()=>{let e=m()("guest-number",{hidden:!I}),t=0===b?C.value("details.plus-one-modal-form-error-full-try-again"):C.value("error.selection-no-longer-available"),a=[];for(let e=0;e<=b;e++){let t="".concat(e);a.push({value:t,label:t})}let l=J();if(l&&!l.isValid&&null!=B){let e="".concat(B);a.push({value:e,label:e,disabled:!0})}return(0,d.jsx)(eI.H,{className:e,defaultValue:"0",errorMessage:t,flyout:C.value("details.plus-one-modal-dropdown-title"),id:"numberOfPlusOnes",name:"numberOfPlusOnes",options:a,ref:e=>em(e),sortNumber:5,onClick:ev,onChange:ef})},ev=()=>{if(null!=B){P(!1),F(0);let e=J();(null==e?void 0:e.value)&&(e.value="0")}},ef=()=>{P(!1)};(0,g.useImperativeHandle)(t,()=>({fields:w,setIsAfterErrorNumberOfPlusOnes:Y,showErrorFor:$,setValueFor:Q,reset:ee,focusFirstField:et,getStringValue:z}));let ey=/^true/i.test(C.value("config.first-name-first")),eb=m()("guest-registration-form",o,{expanded:I,hidden:!v}),eS=m()("buttons-row",{expanded:I,collapsed:!I}),eE=m()("submit-button",{hidden:!I});return(0,d.jsx)("form",{ref:O,className:eb,children:(0,d.jsxs)("div",{ref:T,children:[h&&(0,d.jsx)(ej.L,{i18n:C,autoCapitalize:S.Uc.OFF,errorMessage:C.value("registration-form.error-email-guest"),flyout:C.value("global.email"),id:"email",name:"email",onValidate:ea,pattern:ek.Qs,ref:e=>em(e),required:!0,sortNumber:0,type:S.EI.TEXT,validateOnEnter:!I,getErrorClientHeight:K}),!h&&(0,d.jsxs)("div",{className:"phone-fields-row",children:[(()=>{var e;let t=null!==(e=null==u?void 0:u.map(e=>({value:e,label:"+".concat(e)})))&&void 0!==e?e:[];return(0,d.jsx)(eI.H,{className:"country-code",defaultValue:c,flyout:C.value("registration-form.a11y-select-country-code"),id:"countryCode",onChange:p,options:t,name:"countryCode",ref:e=>em(e),sortNumber:1})})(),(0,d.jsx)(ej.L,{autoCapitalize:S.Uc.OFF,className:"phone",errorMessage:C.value("registration-form.error-phone-guest"),flyout:C.value("registration-form.phone-number"),i18n:C,id:"phone",name:"phone",onValidate:ea,pattern:ek.iw,ref:e=>em(e),required:!0,sortNumber:2,type:S.EI.TEL,validateOnEnter:!I,getErrorClientHeight:K})]}),(e=>{let t=m()("apple-id-signup-invitation",{hidden:e});return(0,d.jsxs)("span",{className:t,children:[C.value("registration-form.signup-apple-id-pre"),(0,d.jsx)("a",{className:"action-button signup-button",href:"#",onClick:el,children:C.value("registration-form.signup-apple-id")}),C.value("registration-form.signup-apple-id-post")]})})(I),(0,d.jsxs)(d.Fragment,{children:[!ey&&ep(ey),(e=>{let t=m()("first-name",{hidden:!I});return(0,d.jsx)(eL.n,{className:t,errorMessage:C.value("registration-form.error-fname-guest"),flyout:C.value("registration-form.name-first"),id:"firstName",name:"firstName",pattern:ek.ig,ref:e=>em(e),required:!0,sortNumber:e?3:4,getErrorClientHeight:q})})(ey),ey&&ep(ey),!y&&(b>0||M)&&eg()]}),(0,d.jsxs)("div",{className:eS,children:[(0,d.jsx)(en.zx,{disabled:D||k||x,className:eE,size:en.Ph.large,onClick:e=>{e.preventDefault(),L(!0),eh()},children:C.value("registration-form.submit-cta")}),(0,d.jsx)("button",{className:"action-button cancel-button",onClick:e=>{e.preventDefault(),ee(),a()},children:C.value("registration-form.cancel-cta")})]})]})})});eA.displayName="GuestRegistrationForm";var eD=a(33509),eP=a(35088),eM=a(73440),eU=a(57472);a(50580);let eB={showExitConfirmation:!1,numberFieldAriaLiveLabel:"",numberOfGuests:0,errorMessage:void 0,isPlusOneAvailable:!0,isSubmitting:!1},eF="guestNumberLabel";class eV extends g.Component{static getDerivedStateFromProps(e,t){let a=null,{numberOfPlusOnesAvailable:l}=t,{numberOfPlusOnesAvailable:n,i18n:r}=e;if(void 0!==n&&(a={numberOfPlusOnesAvailable:n},n<l&&e.isOpened)){let{analyticsService:t}=e,l=0===n?r.value("details.plus-one-modal-form-error-full"):r.value("error.selection-no-longer-available");t.trackEvent(new V.bK().withTitle("Plus One Booking Modal Error").addPropToTrackers("eVar152",0===n?"No guest spots available":"Session no longer available").trackers),a={...a,errorMessage:l}}return a}render(){let{errorMessage:e,isPlusOneAvailable:t,numberFieldAriaLiveLabel:a,showExitConfirmation:l}=this.state,{i18n:n,numberOfPlusOnesAvailable:r}=this.props,i=m()("content-section","guest-number-section",{"hidden-section":l}),s=m()("exit-confirmation-section",{"hidden-section":!l}),o=m()({error:!!e&&!0===t}),u=0===r,c=u?n.value("details.plus-one-modal-skip"):n.value("details.cancel-modal-continue-cta"),h=u?this.handleSkipButtonClick:this.cancelExit,p=n.value("details.plus-one-modal-form-title"),g=n.value("details.cancel-modal-title"),v=l?g:p,f=this.isSubmitButtonDisabled()||this.state.isSubmitting;return(0,d.jsx)(eU.tC.Consumer,{children:u=>{let{standBy:m,setModalContext:y}=u;return(0,d.jsxs)(es.u_,{...this.props,type:es.w8.STANDARD,ariaLabel:v,classList:["guest-number-modal"],modalAttr:{id:"guest-number-modal"},overlayClickHandler:this.handleOverlayClick,closeButtonOverrideHandler:this.handleCloseButtonClick,forwardedRef:this.modalRef,hideCloseButton:l,onWillOpen:this.reset,standBy:m,setModalContext:y,escapeHandler:this.confirmExit,children:[(0,d.jsxs)("div",{className:i,children:[p&&(0,d.jsx)("h2",{className:"title typography-headline-reduced",dangerouslySetInnerHTML:{__html:p}}),(0,d.jsx)("span",{className:"description",children:n.value("details.plus-one-modal-form-description")}),(0,d.jsxs)("div",{className:"guest-number-selector",children:[(0,d.jsx)("label",{"aria-hidden":!0,className:"selector-label",id:eF,children:n.value("details.plus-one-modal-form-guest-count-label")}),(0,d.jsx)(eM.Ki,{ref:this.numberFieldRef,className:o,maxValue:r,ariaLabelledBy:eF,decreaseButtonAriaLabel:n.value("details.plus-one-a11y-guest-remove"),increaseButtonAriaLabel:n.value("details.plus-one-a11y-guest-add"),onChange:this.handleNumberFieldChange,ariaLiveStatus:a})]}),!!e&&!0===t&&(0,d.jsx)("span",{className:"error-message typography-caption",children:e}),(0,d.jsx)(en.zx,{className:"submit-button",onClick:this.handleSubmitButtonClick,disabled:f,size:en.Ph.large,children:n.value("global.cta-submit")})]}),(0,d.jsx)("div",{className:s,children:(0,d.jsxs)("div",{className:"content-section alignment-wrapper",children:[(0,d.jsx)("h2",{className:"title typography-headline-reduced",ref:this.exitTitleRef,children:g}),(0,d.jsx)("span",{className:"description",children:n.value("details.cancel-modal-description")}),(0,d.jsx)(en.zx,{className:"submit-button",onClick:this.confirmExit,size:en.Ph.large,children:n.value("details.cancel-modal-confirm-cta")}),(0,d.jsx)(en.zx,{className:"skip-button",style:en.AK.link,onClick:h,children:c})]})})]})}})}reset(e){this.setState(eB,()=>{this.numberFieldRef.current&&this.numberFieldRef.current.reset(e)})}handleNumberFieldChange(e){if("string"==typeof e)return;let{i18n:t,numberOfPlusOnesAvailable:a=0}=this.props,{numberOfGuests:l}=this.state,n=e>l?"added":"removed",r=1===e?"singular":"plural",i=e===l,s=t.compileValue("details.plus-one-a11y-guest-".concat(n,"-").concat(r),{guestCount:e}),o=e<=a?void 0:t.value("error.selection-no-longer-available");this.setState({errorMessage:o,numberFieldAriaLiveLabel:i?"":s,numberOfGuests:e}),this.forceUpdate()}handleSubmitButtonClick(){this.state.isSubmitting||(this.setState({isSubmitting:!0}),this.handleSubmission())}async handleSubmission(){let{getSummaryData:e,handleNumberOfPlusOnes:t}=this.props,a=await e(),l=this.getNumberOfPlusOnes();if(a&&a.status){let e=a.status.eventStatus;if("FULL"===e){this.close(),this.setState({isSubmitting:!1});return}"RSVP"===e&&0===l&&this.setState({isPlusOneAvailable:!1})}this.trackEvent("t@a - submit guest reg",l),await t(l,()=>{this.setState({isSubmitting:!1})})}async handleSkipButtonClick(){this.trackEvent("t@a - skip guest reg",0),await this.props.handleNumberOfPlusOnes(0,this.close)}async handleOverlayClick(){this.state.showExitConfirmation||await this.handleCloseButtonClick()}async handleCloseButtonClick(){await this.props.updateSchedule(),this.setState({showExitConfirmation:!0},()=>{this.exitTitleRef.current&&(this.exitTitleRef.current.tabIndex=-1,this.exitTitleRef.current.focus({preventScroll:!0}))})}confirmExit(){this.trackEvent("t@a - exit guest reg"),this.props.onConfirmExit&&this.props.onConfirmExit(),this.close()}cancelExit(){this.trackEvent("t@a - go back to guest reg"),this.setState({showExitConfirmation:!1}),this.props.onLetMeGoBackClick&&this.props.onLetMeGoBackClick()}close(){this.setState(eB,()=>{this.modalRef.current&&this.modalRef.current.close()})}trackEvent(e,t){let{course:a,schedule:l,analyticsService:n}=this.props,r=new V.bK;(null==l?void 0:l.startTime)&&r.withTitle("Number of Guests - Modal").withProp3(e).withEvar47(V.S6.IDMS).withEvar80(l.storeNum).withEvar81(a.prefix).withEvar82(a.name).withEvar83(new Date(null==l?void 0:l.startTime).toUTCString()),null!=t&&r.withEvar51(t),n.trackEvent(r.trackers)}getNumberOfPlusOnes(){return this.numberFieldRef.current?this.numberFieldRef.current.value:0}isSubmitButtonDisabled(){let{numberOfPlusOnesAvailable:e=0}=this.props,t=this.getNumberOfPlusOnes();return t<0||t>e}constructor(e){super(e),this.modalRef=(0,g.createRef)(),this.numberFieldRef=(0,g.createRef)(),this.exitTitleRef=(0,g.createRef)();let{numberOfPlusOnesAvailable:t}=this.props;this.state={...eB,numberOfPlusOnesAvailable:null!=t?t:0}}}eV.defaultProps={numberOfPlusOnesAvailable:0,onLetMeGoBackClick:()=>void 0,onConfirmExit:()=>void 0},(0,eD.__decorate)([eP.m],eV.prototype,"reset",null),(0,eD.__decorate)([eP.m],eV.prototype,"handleNumberFieldChange",null),(0,eD.__decorate)([eP.m],eV.prototype,"handleSubmitButtonClick",null),(0,eD.__decorate)([eP.m],eV.prototype,"handleSubmission",null),(0,eD.__decorate)([eP.m],eV.prototype,"handleSkipButtonClick",null),(0,eD.__decorate)([eP.m],eV.prototype,"handleOverlayClick",null),(0,eD.__decorate)([eP.m],eV.prototype,"handleCloseButtonClick",null),(0,eD.__decorate)([eP.m],eV.prototype,"confirmExit",null),(0,eD.__decorate)([eP.m],eV.prototype,"cancelExit",null),(0,eD.__decorate)([eP.m],eV.prototype,"close",null),(0,eD.__decorate)([eP.m],eV.prototype,"trackEvent",null),(0,eD.__decorate)([eP.m],eV.prototype,"getNumberOfPlusOnes",null),(0,eD.__decorate)([eP.m],eV.prototype,"isSubmitButtonDisabled",null),a(49695);let eH=e=>{let{name:t,collectionName:a}=e;return(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"column large-offset-1 large-7 medium-10 small-10",children:[a&&(0,d.jsx)("span",{className:"typography-body headline-eyebrow",children:a}),(0,d.jsx)("h1",{className:"typography-headline-reduced",children:t})]})})};var eG=a(7663),ez=a(75572),eJ=a(16799),eZ=a(69091),eW=a(31642);a(28528);let eX=e=>{let{routeParams:t}=e,a=(0,L.Z)(),l=(0,j.Z)();return(0,d.jsx)("section",{className:"section section-more-programs",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"all column large-8 large-offset-2",children:(0,d.jsx)(eW.N,{includeLocationParameter:!0,href:a.getPageRoute(S.q.DISCOVER),className:"more",tagProps:{"data-analytics-title":"t@a - more to discover"},routeParams:{...t},children:l.value("details.cta-related-component")})})})})};a(67340);let eK=e=>{let{hideRsvpButton:t,isGuestRegistrationForm:a,isGuestRegistrationFormDisplayed:l,children:n}=e,r=m()("row","section-registration",{"guest-registration":a,"show-form":l});return!t&&(0,d.jsx)("div",{className:r,children:(0,d.jsx)("div",{className:"column large-6 large-offset-1 medium-8 small-10",children:n})})};a(68273);let eq=["address-format-line-1","address-format-line-2","address-format-line-3"],eY=[S.ZU.en_AE,S.ZU.zh_CN],e$={en_MY:{"address-format-line-3":{validation:e=>{let{state:t,city:a}=e;return t.toLowerCase()===a.toLowerCase()&&"{{zip}} {{city}}"}}}},eQ=e=>{let{store:t}=e,a=(0,j.Z)(),l=(0,L.Z)(),{analyticsService:n}=(0,T.Z)(),r=(e,t)=>{let a=!1;for(let l of(0,ea.Bi)(e))if(l in t){let e=t[l];if(!(0,ea.fp)((e||"").toString())){a=!0;break}}return a},i=(e,t)=>{var a;let l=e$[t.locale];return!!l&&((null===(a=l[e])||void 0===a?void 0:a.validation(t))||!1)},s=(e,t)=>{let l=i(e,t)||a.value("global.".concat(e)),n=r(l,t)&&(0,ea.kM)(l,t);return n&&(0,d.jsx)("p",{className:"typography-body",children:n},e)},o=()=>{null==n||n.trackEvent({title:"Get Directions",prop3:"t@a - get directions",events:"event251"})};return t&&(0,d.jsxs)("address",{className:"address-information",children:[eq.map(e=>s(e,t)),(e=>{let t=l.getExternalLink("appleMapsRoot");return!eY.includes(e.locale)&&(0,d.jsx)("p",{className:"location-link",children:(0,d.jsx)(eW.N,{href:"".concat(t,"?daddr=").concat(e.lat,",").concat(e.long),className:"more",onClick:o,children:a.value("global.cta-directions")})})})(t)]})};a(47878);let e0="accessibility-information",e1=e=>{let{course:t}=e,{accessibilityText1:a,accessibilityText2:l}=t;return(0,d.jsxs)(d.Fragment,{children:[a&&(0,d.jsx)("p",{className:e0,children:a}),l&&(0,d.jsx)("p",{className:e0,children:l})]})};var e2=a(83543);a(60944);let e4=e=>{let{analyticsService:t}=(0,T.Z)(),{analyticsData:a,data:l}=e,n="click - view apple privacy policy",r="privacy-details";return(0,d.jsxs)("div",{className:"".concat(r),children:[(0,d.jsx)("h2",{className:"".concat(r,"__title"),children:l.title}),(0,d.jsx)(e2.p,{classNames:"".concat(r,"__paragraph"),data:l.paragraph,inject:{content:(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("a",{className:"".concat(r,"__paragraph--link"),href:l.url,onClick:()=>{let e=new V.bK,l=e.withTitle(n).withProp3(n);if(a){let{programName:t,storeNum:r,sessionTime:i}=a;l=e.withTitle(n).withProp3(n).withEvar81(t).withEvar82(r).withEvar83(i)}null==t||t.trackEvent(l.trackers)},target:"_blank","data-analytics-title":n,children:l.urlCta})]}),nth:e2.f.LAST}})]})};var e8=a(85175),e3=a(42847),e6=a(82092);a(68860);let e7={"data-analytics-title":"t@a - see sign up page for this session"},e5=e=>{let{isConfirmationPage:t,isGroupBooking:a,course:l,schedule:n,store:r,sessionUrl:i,routeParams:s,social:o,pageUrl:u,pageName:c,talents:h=[]}=e,m=(0,j.Z)(),p=(0,E.o)(l.type),g=N(l),v=(null==h?void 0:h.length)>0&&n;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"row session-details",children:(0,d.jsxs)("article",{className:"column large-8 large-offset-1 medium-9 small-10",children:[!p&&t&&n&&(0,d.jsx)(eQ,{store:r}),(0,d.jsx)("p",{className:"description",children:l.mediumDescription}),(0,d.jsx)(e1,{course:l}),t&&n&&(0,d.jsx)("p",{className:"description session-url",children:(0,d.jsx)(eW.N,{href:i,routeParams:s,includeLocationParameter:!0,className:"more",tagProps:e7,children:m.value("registration-form.see-signup-session")})}),!p&&!t&&n&&(0,d.jsx)(eQ,{store:r}),(0,d.jsx)(e3.f,{materials:l.downloads}),!t&&!a&&(0,d.jsx)("div",{className:"spread-the-word-wrapper",children:(0,d.jsx)(e8.v,{pageName:c,label:m.value("details.cta-social-share"),idPrefix:"event-page",social:o,schedule:n,course:l,storeState:r,pageUrl:u})}),g&&(0,d.jsx)("div",{className:"privacy-details-wrapper","data-analytics-activitymap-region-id":"privacy details",children:(0,d.jsx)(e4,{analyticsData:{programName:l&&l.name||"",storeNum:n&&n.storeNum||"",sessionTime:new Date(n&&n.startTime||"").toUTCString()},data:l&&l.privacyStatement||{}})})]})}),v&&(0,d.jsx)(e6.M,{talents:h,schedule:n,course:l,store:r,pageUrl:u})]})},e9=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];t.forEach(e=>{"function"==typeof e&&e(...a)})}},te=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let l={};return t.forEach(e=>{Object.keys(l).forEach(t=>{/^on[A-Z]/.test(t)&&"function"==typeof l[t]&&"function"==typeof e[t]?l[t]=e9(l[t],e[t]):"className"===t&&"string"==typeof l.className&&"string"==typeof e.className?l[t]=m()(l.className,e.className):l[t]=void 0!==e[t]?e[t]:l[t]}),Object.keys(e).forEach(t=>{void 0===l[t]&&(l[t]=e[t])})}),l},tt=e=>"string"==typeof e||e instanceof String?new RegExp(e):e,ta=(e,t)=>{let a="";for(let l=0;l<t;l+=1)a+=e;return a},tl=(e,t,a,l)=>{let{value:n,cursor:r}=e,i=r>=a,s=r<a+1;return r=(i&&s&&l<0?a:r)+(i&&s&&l>0?t.length:0)+(i&&!s?t.length:0),{value:n=n.slice(0,a)+t+n.slice(a),cursor:r}},tn=(e,t,a)=>{let{value:l,cursor:n}=e,{inputRegex:r,suffix:i}=t,s=t.blocks||[],o=l.length===n&&a>0,u=a,c={value:"",cursor:n},d=0,h=0,m=!1;for(let e=0;e<l.length;e+=1){let t=l.charAt(e),a=l.charAt(e+1),n=s[d]||{},i=s[d+1],p=(i&&i.start||"").charAt(0),g=n.inputRegex||r,v=e>=l.length-1,f=d>=s.length-1,y=n.length||n.maxLength||1/0,b=h>=y,S=void 0!==n.length,E=n.pad&&S,N=!S&&t===n.pad&&h<1,R=v&&t===n.pad,x=!N||R,w=!g||tt(g).test(t),_=!b&&x&&w,C=0===e&&t===p||a===p;!m&&(_||o||!S)&&(c=tl(c,n.start||"",c.value.length,u),m=!0),h+=_?1:0,c.value+=_?t:"",c.cursor+=_||c.cursor<=c.value.length?0:-1;let O=u>0&&c.cursor===c.value.length,T=u>0&&c.cursor===c.value.length+1,k=C&&T&&E,L=C&&!S,j=h>=y||k||L;if(n.unit&&(j||v)&&!b){let e=h%3==0,t=Math.floor(h/3)-(e?1:0);for(let e=0;e<t;e+=1){let t=(3+n.unit.length)*e+3;c=tl(c,n.unit,c.value.length-t,u)}}if(k||L&&n.pad&&h<1){let e=L?1:(n.length||0)-h,t=c.value.length-h;c=tl(c,ta(n.pad||"",e),t,u),c.cursor+=L&&c.cursor===t?1:0}j&&!f&&(d+=1,h=0,m=!1,u=u>0&&!S&&O?0:u)}return i&&c.value&&(c.value+=i),c},tr=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e?tn({value:l||e.value,cursor:e.selectionStart||0},t,a):null};var ti=e=>{let{value:t,format:a,...l}=e,[n,r]=(0,g.useState)(t),[i,s]=(0,g.useState)(-1),o=(0,g.useRef)(null),u=e.ref||o,c="";return(0,g.useEffect)(()=>{let e=u.current;e&&i>-1&&(e.selectionStart=i,e.selectionEnd=i)},[i,u]),te({value:n,ref:u,onPaste:e=>{let t=e.clipboardData||window.clipboardData,a=e.target;c=a&&t?[a.value.slice(0,a.selectionStart||0),t.getData("text/plain"),a.value.slice(a.selectionEnd||a.value.length)].join(""):""},onChange:e=>{let t=e.nativeEvent.inputType||e.target.inputType,l=tr(e.target,a,"deleteContentBackward"===t?-1:1,c);return c="",r((null==l?void 0:l.value)||""),s((null==l?void 0:l.cursor)||-1),l}},{...l})},ts=JSON.parse('[{"code":"971","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"are"},{"code":"61","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"aus"},{"code":"43","format":{"inputRegex":"[0-9]","blocks":[{"start":"(","length":5},{"start":") ","length":3},{"start":" ","length":2},{"start":" ","length":2}]},"i18n":"aut"},{"code":"32","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"bel"},{"code":"55","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"bra"},{"code":"1","format":{"inputRegex":"[0-9]","blocks":[{"start":"(","length":3},{"start":") ","length":3},{"start":"-","length":4}],"altBlocks":{"fr_CA":[{"length":3},{"start":" ","length":3},{"start":"-","length":4}]}},"i18n":"can"},{"code":"41","format":{"inputRegex":"[0-9]","blocks":[{"start":"(","length":1},{"start":")","length":2},{"start":" ","length":3},{"start":" ","length":2},{"start":" ","length":2}]},"i18n":"che"},{"code":"86","format":{"inputRegex":"[0-9]","blocks":[{"length":3},{"start":" ","length":4},{"start":" ","length":4}]},"i18n":"chn"},{"code":"49","format":{"inputRegex":"[0-9]","blocks":[{"length":5},{"start":" ","length":11}]},"i18n":"deu"},{"code":"34","format":{"inputRegex":"[0-9]","blocks":[{"length":3},{"start":" ","length":3},{"start":" ","length":3}]},"i18n":"esp"},{"code":"33","format":{"inputRegex":"[0-9]","blocks":[{"length":2},{"start":" ","length":2},{"start":" ","length":2},{"start":" ","length":2},{"start":" ","length":2}]},"i18n":"fra"},{"code":"44","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"gbr"},{"code":"852","format":{"inputRegex":"[0-9]","blocks":[{"length":4},{"start":" ","length":4}]},"i18n":"hkg"},{"code":"91","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"ind"},{"code":"39","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"ita"},{"code":"81","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"jpn"},{"code":"82","format":{"inputRegex":"[0-9]","blocks":[{"start":"(","length":2},{"start":") ","length":4},{"start":"-","length":4}]},"i18n":"kor"},{"code":"853","format":{"inputRegex":"[0-9]","blocks":[{"length":4},{"start":" ","length":4}]},"i18n":"mac"},{"code":"52","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"mex"},{"code":"60","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"mys"},{"code":"31","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"nld"},{"code":"65","format":{"inputRegex":"[0-9]","blocks":[{"length":4},{"start":" ","length":4}]},"i18n":"sgp"},{"code":"46","format":{"inputRegex":"[0-9]","blocks":[]},"i18n":"swe"},{"code":"66","format":{"inputRegex":"[0-9]","blocks":[{"length":1},{"start":" ","length":4},{"start":" ","length":4}]},"i18n":"tha"},{"code":"90","format":{"inputRegex":"[0-9]","blocks":[{"start":"(","length":4},{"start":") ","length":3},{"start":" ","length":2},{"start":" ","length":2}]},"i18n":"tur"},{"code":"886","format":{"inputRegex":"[0-9]","blocks":[{"length":10}]},"i18n":"twn"},{"code":"1","format":{"inputRegex":"[0-9]","blocks":[{"start":"(","length":3},{"start":") ","length":3},{"start":"-","length":4}]},"i18n":"usa"}]'),to=JSON.parse('{"de_AT":{"default":"aut","priority":["aut"],"sortAlpha":true},"de_CH":{"default":"che","priority":["che"],"sortAlpha":true},"de_DE":{"default":"deu","priority":["deu"],"sortAlpha":true},"en_AE":{"default":"are","priority":["are"],"sortAlpha":true},"en_AU":{"default":"aus","priority":["aus"],"sortAlpha":true},"en_CA":{"default":"can","priority":["can"],"sortAlpha":true},"en_GB":{"default":"gbr","priority":["gbr"],"sortAlpha":true},"en_HK":{"default":"hkg","priority":["hkg"],"sortAlpha":true},"en_IN":{"default":"ind","priority":["ind"],"sortAlpha":true},"en_MY":{"default":"mys","priority":["mys"],"sortAlpha":true},"en_SG":{"default":"sgp","priority":["sgp"],"sortAlpha":true},"en_US":{"default":"usa","priority":["usa"],"sortAlpha":true},"es_ES":{"default":"esp","priority":["esp"],"sortAlpha":true},"es_MX":{"default":"mex","priority":["mex"],"sortAlpha":true},"fr_BE":{"default":"bel","priority":["bel"],"sortAlpha":true},"fr_CA":{"default":"can","priority":["can"],"sortAlpha":true},"fr_CH":{"default":"che","priority":["che"],"sortAlpha":true},"fr_FR":{"default":"fra","priority":["fra"],"sortAlpha":true},"it_IT":{"default":"ita","priority":["ita"],"sortAlpha":true},"ja_JP":{"default":"jpn","priority":["jpn"],"sortAlpha":false},"ko_KR":{"default":"kor","priority":["kor"],"sortAlpha":false},"nl_BE":{"default":"bel","priority":["bel"],"sortAlpha":true},"nl_NL":{"default":"nld","priority":["nld"],"sortAlpha":true},"pt_BR":{"default":"bra","priority":["bra"],"sortAlpha":true},"sv_SE":{"default":"swe","priority":["swe"],"sortAlpha":true},"th_TH":{"default":"tha","priority":["tha"],"sortAlpha":false},"tr_TR":{"default":"tur","priority":["tur"],"sortAlpha":true},"zh_CN":{"default":"chn","priority":["chn"],"sortAlpha":false},"zh_HK":{"default":"hkg","priority":["hkg"],"sortAlpha":false},"zh_MO":{"default":"mac","priority":["mac"],"sortAlpha":false},"zh_TW":{"default":"twn","priority":["twn"],"sortAlpha":false}}');let tu=(e,t)=>(0,g.useMemo)(()=>{let a=to[e.id]||to.en_US,l=a.priority?[...a.priority]:[],n=ts.filter(e=>!l.find(t=>t===e.i18n)).map(e=>e.i18n),r=a.sortAlpha?n.sort((e,a)=>{let l=t.value("country-abbreviations.".concat(e)),n=t.value("country-abbreviations.".concat(a));return l===n?0:l>n?1:-1}):n.sort(),i=a.default||to.en_US.default||"",s=ts.find(e=>e.i18n===i);return{defaultValue:s&&s.i18n,options:[...l,...r].map(e=>{let a=ts.find(t=>t.i18n===e);return{label:t.compileValue("details.sms-modal-form-country-code-abbreviation-formatting",{countryAbbreviation:t.value("country-abbreviations.".concat(e)),countryCodeNumber:null==a?void 0:a.code}),value:null==a?void 0:a.i18n}})}},[e,t]);function tc(e){let{countryCode:t,locale:a}=e,l=(ts.find(e=>e.i18n===t)||{}).format,n=(null==l?void 0:l.altBlocks)&&(null==l?void 0:l.altBlocks[a]);return{...l,blocks:n||(null==l?void 0:l.blocks),inputRegex:new RegExp((null==l?void 0:l.inputRegex)||"")}}a(11066);let td=(0,g.forwardRef)((e,t)=>{let a=()=>{},{errorMessage:l,flyout:n,onBlur:r=a,onChange:i,onFocus:s=a,rules:o,...u}=e,{className:c,id:h="phone-number",required:p,value:v}=u,{onChange:f,...y}=ti({...u,className:m()("form-textbox-input","form-textbox-text",{"form-textbox-entered":!!v}),ref:t}),b=(0,g.useCallback)(e=>{let t=f(e);i&&i(t.value)},[f,i]),E=(0,g.useMemo)(()=>l||function(e){let{rules:t,value:a}=e;return t?(t.find(e=>{let{errorMessage:t,validator:l}=e;return!l(a)})||{}).errorMessage:void 0}({rules:o,value:y.value}),[l,o,y.value]),N=m()(c),R=m()("form-cell","form-element","form-textbox",{"is-error":!!E}),x="".concat(h,"_label"),w="".concat(h,"_error");return(0,d.jsx)("div",{className:N,children:(0,d.jsxs)("div",{className:R,children:[(0,d.jsx)("input",{"aria-describedby":w,"aria-required":p,"aria-labelledby":x,onChange:b,type:S.EI.TEL,...y}),(0,d.jsx)("span",{id:x,"aria-hidden":"true",className:"form-textbox-label form-label-flyout",children:n}),(0,d.jsx)("div",{className:"form-message-wrapper",id:w,children:(0,d.jsx)("span",{className:"form-message",children:E})})]})})});td.displayName="PhoneNumberField",(r=u||(u={})).CLOSE_ERROR="closeError",r.CLOSE_MODAL="closeModal",r.OPEN_ERROR="openError",r.OPEN_MODAL="openModal";let th=(e,t)=>{switch(t.type){case"closeError":return{...e,isError:!1};case"closeModal":if(e.isError)return{...e,isError:!1,errorMessage:""};return e.onClose&&e.onClose(),{...e,isOpen:!1};case"openError":return{...e,isError:!0,errorMessage:t.message};case"openModal":return e.isOpen?e:{...e,isOpen:!0};default:return e}},tm=(e,t,a,l)=>{let n={...a,countryCodeAbbreviation:e,phone:t,optIn:!0};l.setSms(n)},tp=async e=>{let{closeSMSModal:t,countryCodeAbbreviation:a,guestRegistrationDataService:l,phone:n,sessionStorage:r,onError:i}=e,s=r.getSms();if(s){let e={sessionId:s.sessionId,email:s.email,firstName:s.firstName,lastName:s.lastName},o=ts.find(e=>e.i18n===a),u={...e,reservationId:s.reservationId,storeNumber:s.storeNumber,smsOptIn:!0,countryCode:(null==o?void 0:o.code)||"",phone:n,tokenType:"email"};try{await l.initUpdateGuestRegistration(e,u),tm(a,n,s,r),t(),r.removeSMSFormErrorData()}catch(e){i()}}},tg=(e,t,a,l)=>{let n=t.pop(),r=(null==n?void 0:n.workshopId)===l.id?n:t.find(e=>e.workshopId===l.id),i=ts.find(t=>t.i18n===e);return{countryCode:(null==i?void 0:i.code)||"",phone:a,reservationId:(null==r?void 0:r.reservationId)||"",workshopId:(null==r?void 0:r.workshopId)||""}},tv=async e=>{let{closeSMSModal:t,countryCodeAbbreviation:a,history:l,phone:n,registrationDataService:r,schedule:i,sessionStorage:s,onError:o}=e,u=tg(a,l,n,i);try{await r.updateReservation(u),t(),s.removeSMSFormErrorData()}catch(e){o()}},tf=async e=>{let t,{localeId:a,logger:l,registrationDataService:n,retries:r=2,wasIDMS:i}=e;for(let e=0;e<=r;e++)try{if(t=await n.getReservationsHistory(a),!i||t&&t.length)return t}catch(t){e===r&&l.warn("SMSModal /history retries exhausted.",t)}return null},ty=async e=>{let{closeSMSModal:t,countryCodeAbbreviation:a,guestRegistrationDataService:l,localeId:n,logger:r,phone:i,registrationDataService:s,reservations:o,schedule:u,sessionStorage:c,onError:d}=e,h=await tf({localeId:n,logger:r,registrationDataService:s,wasIDMS:!!(o&&o.length)});h&&h.length?await tv({closeSMSModal:t,countryCodeAbbreviation:a,history:h,phone:i,registrationDataService:s,schedule:u,sessionStorage:c,onError:d}):await tp({closeSMSModal:t,countryCodeAbbreviation:a,guestRegistrationDataService:l,phone:i,sessionStorage:c,onError:d})};var tb=a(49647);let tS=e=>{let{localeId:t,retries:a=1}=e,l=(0,D.Z)(),{currentLocale:n}=(0,I.Z)(),{analyticsService:r}=(0,T.Z)(),i=(0,L.Z)(),s=(0,g.useMemo)(()=>new ee.p(i,n,l,r),[r,i,n,l]);return(0,g.useCallback)(async()=>{for(let e=0;e<=a;e++)try{let e=await s.getReservationsHistory(t);if(e&&e.length)return e}catch(t){e===a&&l.warn("useGetReservations history calls exhausted",t)}return null},[a,s,t,l])},tE=e=>{let{schedule:t,localeId:a,update:l}=e,n=(0,M.Z)(),{currentLocale:r}=(0,I.Z)(),i=tS({localeId:a,retries:2}),[s,o]=(0,g.useState)(""),[u,c]=(0,g.useState)(void 0),[d,h]=(0,g.useState)(!1),[m,p]=(0,g.useState)([]),v=n.getSms(),f=null!==v,y=(0,g.useCallback)(e=>{let t=to[r.id].default,a=ts.find(t=>t.code===e),l=(null==a?void 0:a.i18n)||"",n=ts.filter(a=>a.code===e&&a.i18n===t);return 0===n.length?l:n[0].i18n},[r]);return(0,g.useEffect)(()=>{i().then(e=>{if(e){p(e),h(!0);let a=e.filter(e=>e.workshopId===t.id);if(!a.length){c(void 0);return}let l=a.length-1,n=a[l];if(o("".concat(a[l].emailAddress)),n.smsOptIn){u&&n.phoneNumber===u.phoneNumber&&y(n.countryCode||"")===u.countryCode||c({phoneNumber:n.phoneNumber||"",countryCode:y(n.countryCode||"")});return}c(void 0)}else f&&(h(!1),o("".concat(null==v?void 0:v.email)))})},[f,y,i,u,t.id,null==v?void 0:v.email,l]),{userEmail:s,optedInData:u,isLoggedIn:d,reservations:m}};var tN=a(59323),tR=a(11805);a(32644),(i=c||(c={})).COUNTRY_CODE="countryCode",i.PHONE_NUMBER="phoneNumber";let tx=(e,t,a)=>{let l=e;return"function"==typeof tr&&""!==e&&(l=tn({value:e,cursor:0},tc({countryCode:t,locale:a.id}),0).value),l},tw=e=>{let{isOpened:t,onClose:a,ariaLabel:l,schedule:n,localeId:r,analyticsData:i,guestRegistrationDataService:s,sessionStorage:o,registrationDataService:c,type:h}=e,m=(0,j.Z)(),{currentLocale:p}=(0,I.Z)(),{analyticsService:v}=(0,T.Z)(),f=(0,D.Z)(),y=tu(p,m),b=(0,g.useRef)(null),S=(0,g.useRef)(null),{userEmail:E,optedInData:N,isLoggedIn:R,reservations:x}=tE({schedule:n,localeId:r,update:t}),w=o&&o.getSMSFormErrorData(),_=o&&o.getSms(),[C,O]=(0,g.useState)({hasSubmitted:!1,isStale:!1,validationError:""}),k=(0,g.useMemo)(()=>{let e={};if(w)e.countryCode=w.countryCode,e.phoneNumber=w.phoneNumber;else if(_&&!0===_.optIn)e.countryCode=_.countryCodeAbbreviation,e.phoneNumber=tx(_.phone||"",_.countryCodeAbbreviation||"",p);else if(N){var t,a;e.countryCode=N.countryCode,e.phoneNumber=tx(null!==(t=null==N?void 0:N.phoneNumber)&&void 0!==t?t:"",null!==(a=null==N?void 0:N.countryCode)&&void 0!==a?a:"",p)}return{countryCode:e.countryCode||y.defaultValue||"",phoneNumber:e.phoneNumber||""}},[y.defaultValue,p,w,N,_]),[L,A]=(0,g.useState)({countryCode:k.countryCode,phoneNumber:k.phoneNumber}),P=(0,g.useCallback)(()=>{O({hasSubmitted:!1,isStale:!1,validationError:""}),A(k),a&&a()},[a,k]),[M,U]=(0,g.useReducer)(th,{isError:!1,isOpen:!!t,onClose:P});(0,g.useEffect)(()=>{t&&U({type:u.OPEN_MODAL})},[U,t]),(0,g.useEffect)(()=>{A(k)},[t]);let B=(0,g.useMemo)(()=>R?m.value("details.sms-modal-form-standard-rates-may-apply"):(0,ea.kM)(m.value("details.sms-modal-form-email-reminder"),E||""),[R,m,E]),F=(0,g.useMemo)(()=>tc({countryCode:L.countryCode,locale:p.id}),[p.id,L]),V=(0,g.useCallback)(e=>{A({...L,countryCode:e,phoneNumber:""}),O({hasSubmitted:!1,isStale:!1,validationError:""})},[L]),H=(0,g.useCallback)(e=>{A({...L,phoneNumber:e}),O({...C,isStale:!0})},[L,C]),G=(0,g.useCallback)(e=>{if(e.preventDefault(),null==v||v.trackEvent((0,tR.Vx)(tN.y.close["data-analytics-title"],i).trackers),t){var a;null==S||null===(a=S.current)||void 0===a||a.setFocus()}U({type:u.CLOSE_MODAL})},[v,i,t]),z=(0,g.useCallback)(()=>{var e;o.setSMSFormErrorData({countryCode:L.countryCode,phoneNumber:L.phoneNumber}),null==S||null===(e=S.current)||void 0===e||e.setFocus(),U({type:u.OPEN_ERROR})},[o,L]),J=(0,g.useMemo)(()=>{var e,t;return e=F.blocks,t=L.phoneNumber,!e.length||e.reduce((e,t)=>e+(t.length?t.length:0)+(t.start?t.start.length:0),0)===t.length},[L,F.blocks]),Z=(0,g.useCallback)(async e=>{if(e.preventDefault(),O({hasSubmitted:!0,isStale:!1,validationError:J?"":m.value("error.phone-error-valid-mobile-number")}),!J){var t;null==b||null===(t=b.current)||void 0===t||t.focus();return}await ty({closeSMSModal:P,countryCodeAbbreviation:L.countryCode,guestRegistrationDataService:s,localeId:r,logger:f,phone:(0,ea.Ec)(L.phoneNumber),registrationDataService:c,reservations:x,schedule:n,sessionStorage:o,onError:z}),A({...L})},[P,s,L,m,J,r,f,c,x,n,o,z]),W=(0,g.useCallback)(()=>{let e=(0,tR.Vx)(tN.y.privacyPolicy["data-analytics-title"],i).trackers;null==v||v.trackEvent(e)},[i,v]),K=(0,g.useMemo)(()=>(0,X.u)(),[x]),q="sms-modal";return(0,d.jsxs)(eU.u_,{modalAttr:{id:q},type:h,classList:[q],isOpened:t,onClose:P,ariaLabel:l,closeButtonOverrideHandler:G,overlayClickHandler:G,escapeHandler:G,closeButtonAttr:tN.y.close,ariaLabelledBy:M.isError?"sms-modal-heading-error":"sms-modal-heading",forwardedRef:S,children:[!M.isError&&(0,d.jsxs)("div",{className:"".concat(q,"-content"),children:[(0,d.jsx)("h2",{className:"".concat(q,"-content-title typography-headline-reduced"),id:"sms-modal-heading",children:N||_&&!0===_.optIn?m.value("details.sms-modal-form-title-existing"):m.value("details.sms-modal-form-title")}),(0,d.jsx)("p",{className:"".concat(q,"-content-body"),children:N||_&&!0===_.optIn?m.value("details.sms-modal-form-description-existing"):m.value("details.sms-modal-form-description")}),(0,d.jsxs)("form",{onSubmit:Z,className:"".concat(q,"-content-form"),children:[(0,d.jsxs)("fieldset",{className:"".concat(q,"-content-form-inputs"),children:[(0,d.jsx)(eI.H,{className:"".concat(q,"-content-form-inputs-cc"),defaultValue:k.countryCode,flyout:m.value("details.sms-modal-form-country-code"),options:y.options,name:"countryCode",onChange:e=>V(e.toString())},"cc-".concat(k.countryCode,"-").concat(t)),(0,d.jsx)(td,{className:"".concat(q,"-content-form-inputs-pn"),errorMessage:C.validationError,flyout:m.value("details.sms-modal-form-phone-number"),format:F,name:"phoneNumber",onChange:H,value:L.phoneNumber,ref:b},"pn-".concat(K,"-").concat(L.countryCode,"-").concat(k.countryCode,"-").concat(k.phoneNumber,"-").concat(t))]}),(0,d.jsx)("p",{className:"".concat(q,"-content-form-legal"),children:B}),(0,d.jsx)("p",{className:"".concat(q,"-content-form-legal"),children:(0,d.jsx)(tb.r,{copy:m.value("details.sms-modal-form-privacy-policy-description"),linkCopy:m.value("details.sms-modal-form-privacy-policy-link"),href:"/privacy/",analyticsEvent:W,newTab:!0,tagProps:tN.y.privacyPolicy})}),(0,d.jsx)(en.zx,{className:"".concat(q,"-content-form-submit"),style:L.phoneNumber?en.AK.regular:en.AK.inactive,size:en.Ph.large,onClick:Z,disabled:!L.phoneNumber||!C.isStale&&!w||k.countryCode===L.countryCode&&k.phoneNumber===L.phoneNumber&&!w,tagProps:tN.y.keepMeNotified,children:m.value("details.sms-modal-form-submit")})]})]}),M.isError&&(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"column error-modal large-8 large-centered",children:[(0,d.jsx)("h2",{className:"title typography-headline-reduced",id:"sms-modal-heading-error",children:m.value("error.generic-sorry")}),(0,d.jsx)("p",{children:m.value("error.unable-to-complete-your-request-try-again")}),(0,d.jsx)(en.zx,{onClick:e=>G(e),tagProps:tN.y.retry,children:m.value("global.cta-retry")})]})})]})};var t_=a(25025),tC=a(76956);a(52861);let tO={closeButton:{"data-analytics-title":"x - close modal","data-analytics-click":"prop3:x - close modal","data-analytics-intrapage-link":""},privacyLink:{"data-analytics-title":"visit apple support","data-analytics-exit-link":""},agree:{"data-analytics-title":"agree","data-analytics-click":"prop3:agree","data-analytics-intrapage-link":""},exitCancel:{"data-analytics-title":"yes - cancel","data-analytics-click":"prop3:yes - cancel","data-analytics-intrapage-link":""},exitBack:{"data-analytics-title":"no - go back","data-analytics-click":"prop3:no - go back","data-analytics-intrapage-link":""}},tT=new es.pU,tk={REGULAR:"global-legal-modal-content-title",EXIT:"global-legal-exit-content-title"},tL=e=>{let{analyticsData:t,showAgreement:a,shouldStandBy:l,updateConsent:n}=e,r="",{analyticsService:i}=(0,T.Z)(),s=(0,j.Z)(),o=(0,g.useRef)(null),u=(0,g.useRef)(null),c="global-legal-modal",[h,m]=(0,g.useState)(!1),[p,v]=(0,g.useState)(!1),[f,y]=(0,g.useState)(!1),b=(0,U.z)(h||!1),S=(0,g.useRef)(null),[E,N]=(0,g.useState)(!1),R={id:"global-legal-modal","data-analytics-activitymap-region-id":"pipl modal"},x={title:s.value("details.global-legal-modal-title"),paragraph1:s.value("details.global-legal-modal-paragraph1"),paragraph2:s.value("details.global-legal-modal-paragraph2"),url:s.value("details.global-legal-modal-url"),urlCta:s.value("details.global-legal-modal-urlCta")},w=()=>{null==i||i.trackEvent((0,V.Vx)(tO.closeButton["data-analytics-title"],t).trackers),m(!0)},_=async()=>{N(!0),void 0!==l&&N(await n(!0))},C=()=>{v(!0),y(!1),n(!1)},O=()=>{m(!1)},k=()=>null==i?void 0:i.trackEvent((0,V.Vx)(tO.privacyLink["data-analytics-title"],t).trackers);return(0,g.useEffect)(()=>{m(!1),a&&v(!1)},[a]),(0,g.useEffect)(()=>{let e=void 0!==b&&!p&&b!==h;e&&h&&u.current&&o.current?(tT.animate(u.current,o.current,()=>{S.current&&S.current.setFocus&&setTimeout(()=>{var e;null===(e=S.current)||void 0===e||e.setFocus()},es.Jz)}),y(!0)):e&&!h&&o.current&&u.current?tT.animate(o.current,u.current,()=>{tT.reset(),y(!1),S.current&&S.current.setFocus&&setTimeout(()=>{var e;null===(e=S.current)||void 0===e||e.setFocus()},es.Jz)}):p&&tT.reset()},[p,b,h]),a&&!h?r=tk.REGULAR:a&&h&&(r=tk.EXIT),(0,d.jsx)(es.tC.Consumer,{children:e=>{let{standBy:t,setModalContext:n}=e,i={...t,shouldEnable:!p&&l};return(0,d.jsxs)(es.u_,{type:es.w8.STANDARD,isOpened:a,overlayClickHandler:C,closeButtonOverrideHandler:w,hideCloseButton:f,standBy:i,setModalContext:n,ariaLabelledBy:r,ref:S,escapeHandler:C,classList:[c],modalAttr:R,children:[(0,d.jsxs)("div",{id:"global-legal-content","aria-hidden":h,ref:u,className:"".concat(c,"-content"),children:[(0,d.jsx)("h2",{id:tk.REGULAR,className:"".concat(c,"-content__title title typography-headline-reduced"),"aria-live":"polite",children:x.title}),(0,d.jsx)(e2.p,{classNames:"".concat(c,"-content__paragraph"),data:x.paragraph1,inject:{content:(0,d.jsx)(g.Fragment,{children:(0,d.jsx)("a",{href:x.url,onClick:k,target:"_blank",...tO.privacyLink,children:" ".concat(x.urlCta)})}),nth:e2.f.LAST}}),(0,d.jsx)("p",{className:"".concat(c,"-content__paragraph"),children:x.paragraph2}),(0,d.jsx)(en.zx,{className:"".concat(c,"-content__button"),disabled:E,onClick:_,tagProps:tO.agree,size:tC.Ph.large,children:s.value("global.cta-agree")})]}),(0,d.jsx)("div",{"aria-hidden":!h,ref:o,className:"".concat(c,"-exit-content"),"data-analytics-activitymap-region-id":"exit modal",children:(0,d.jsxs)("div",{className:"content-section alignment-wrapper",children:[(0,d.jsx)("h2",{id:tk.EXIT,className:"".concat(c,"-exit-content__title typography-headline-reduced"),"aria-live":"polite",children:s.value("details.cancel-modal-title")}),(0,d.jsx)("p",{className:"".concat(c,"-exit-content__description"),children:s.value("details.cancel-privacy-modal-description")}),(0,d.jsx)(en.zx,{className:"".concat(c,"-exit-content__button"),onClick:C,tagProps:tO.exitCancel,size:tC.Ph.large,children:s.value("details.cancel-modal-confirm-cta")}),(0,d.jsx)("br",{}),(0,d.jsx)(en.zx,{style:tC.AK.link,onClick:O,tagProps:tO.exitBack,children:s.value("details.cancel-modal-continue-cta")})]})})]})}})};var tj=a(5647),tI=a(62678),tA=a(7709),tD=a(80777),tP=a(15351);async function tM(e,t,a,l,n,r,i){let s=new tA.Y({level:e.getProperty("logging.level.client")}),{courseSlug:o,areaSlug:u,scheduleId:c,nearby:d,marketSlug:h,selectedStore:m}=l,p=new tD.IG(e,n?new tP.iI(e,{redirect:null==i?void 0:i.redirect}):r?new tP.I5(e,{redirect:null==i?void 0:i.redirect}):new tP.AN(e,{redirect:null==i?void 0:i.redirect}),{redirect:null==i?void 0:i.redirect}),g=null,v={stageRootPath:t,courseSlug:o,scheduleId:c},f={nearby:d,areaSlug:u,marketSlug:h,selectedStore:m},y=(0,O.O)(t,a);try{let t=new $.b(e,e.getApiBase(),s);g=await t.getPageData(v,f,a&&!y?a:void 0)}catch(l){let a=(0,w.Vf)(e.getPageRoute(S.q.EVENT),{courseSlug:v.courseSlug||"",scheduleId:v.scheduleId||"",[tD.kv.STAGE_ROOT_PATH]:t||""});p.applyFallbackStrategy({error:l,request:{routeParams:v,queryParams:f},page:S.q.EVENT,url:a,logger:s})}return g}let tU=new z.qD,tB=new V.bK().withProp3("t@a - sign me up").addPropToTrackers("events","event207").withEventDetails().build(),tF=(0,g.memo)(et.e7);function tV(e){var t,a,l,n,r,i,s,u,c,h,v,y,J,Z,X,K,q,ea,el,en,er,ei,eo,eu,ec,ed,eh,em;let{searchParams:ep,isGroupBooking:eg,isConfirmationPage:ev}=e,[ef,ey]=(0,g.useState)(!1),[eb,eS]=(0,g.useState)(!1),[eE,eR]=(0,g.useState)(!1),[e_,eC]=(0,g.useState)(!1),[ek,eL]=(0,g.useState)(!ev),{pageData:ej,setPageData:eI}=(0,P.Z)(),eD=(0,L.Z)(),eP=(0,j.Z)(),eM=(0,B.Z)(),eU=(0,D.Z)(),eB=(0,p.useRouter)(),eF=(0,M.Z)(),{analyticsService:eW}=(0,T.Z)(),{trackPageLoad:eq,trackUserLocationEvent:eY}=(0,k.Z)(),{currentLocale:e$,allLocalesService:eQ}=(0,I.Z)(),e0=new URLSearchParams((0,p.useSearchParams)().toString()),[e1,e2]=(0,g.useState)(!1),[e4,e8]=(0,g.useState)(!1),[e3,e6]=(0,g.useState)(!1),[e7,e9]=(0,g.useState)(!1),[te,tt]=(0,g.useState)(!1),[ta,tl]=(0,g.useState)(!1),[tn,tr]=(0,g.useState)(!1),[ti,ts]=(0,g.useState)(!1),to=te||e7||ti,[tu,tc]=(0,g.useState)({standBy:{enable:!1}}),td=(0,g.useRef)(!1),th=(0,g.useRef)(!1),tm=(0,g.useRef)(),[tp,tg]=(0,g.useState)(0),tv=(0,g.useRef)(null),tf=(0,g.useRef)(null),[ty,tb]=(0,g.useState)(null),tS=(0,F.Z)(e$),tE=new ee.p(eD,eQ.currentLocale,eU,eW),tN=new W.Iq(tE,eU),tR=new z.ps(eD,eU,eF),tx=new Y(eD,eQ,eU),tC=new $.b(eD,eD.getApiBase(),eU),tO=new Q.s(eD,eD.getApiBase(),eU),tT="",tk=eP.value("config.default-country-code"),{courseSlug:tA,sn:tD,isSignup:tP,marketSlug:tV}=ep,{course:tH={},schedule:tG={},scheduleId:tz=null!==(c=ep.scheduleId)&&void 0!==c?c:null==tG?void 0:tG.id,schedules:tJ,store:tZ={},socialLinks:tW={},moreAbout:tX,talents:tK,isUserLoggedIn:tq,dropdownSchedules:tY,nearbySchedules:t$,groupBookingEntryPoint:tQ,relatedSchedules:t0,coordinator:t1,isYouth:t2}=ej,[t4,t8]=(0,g.useState)(),[t3,t6]=(0,g.useState)(),[t7,t5]=(0,g.useState)([]),t9=(0,U.z)(tG),ae=(null==tH?void 0:null===(t=tH.legalConsent)||void 0===t?void 0:t.enabled)&&(null==tH?void 0:null===(a=tH.legalConsent)||void 0===a?void 0:a.title)&&(null==tH?void 0:null===(l=tH.legalConsent)||void 0===l?void 0:l.paragraph1),at="/cn"===e$.stageRootPath,aa=at&&!th.current,al=(0,eG.J)(tH.legalConsent)&&!td.current,an=(0,g.useMemo)(()=>ej.heroGallery,[null===(r=ej.heroGallery)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.title]),ar=(eh=!!tq,!!(tH.type!==S.tw.CAMPS&&!(0,E.o)(tH.type)&&tH.guestRegistration&&!eh)),ai=eF&&!!eF.getSelectedStoreLocation(),as=N(tH),ao=!!(!ev&&tX),au=tK&&tK.length>0,ac=t4&&!(0,R.ac)(t4.status),ad=tG&&!(0,R.ac)(tG.status),ah=!tY||!tY.length,am=!(!tQ||ev||ac||ad),ap=[],ag=eP.value("config.country-codes");ag&&(ap=ag.split(",").filter(Boolean));let av=(0,E.o)(tH.type),af=tG&&tG.isStoreSpecific,ay=af?ej.store:(em=av,eF&&eF.getSelectedStoreLocation()||(em&&ej.userLocation?ej.userLocation:eF&&eF.getLocationLabelInfo()||ej.userLocation)),{locationServiceData:ab}=(0,A.Z)(ep,ay,!0),aS=eD.getMainSiteUrlWithStageRootPath(e$.stageRootPath,eg?"/today/groups/event/":ev?"/today/confirmation/":"/today/event/"),aE=eg?S.q.GROUP_BOOKING_EVENT:ev?S.q.CONFIRMATION:S.q.EVENT,aN=(0,w.Vf)(eD.getPageRoute(aE),{courseSlug:tA,scheduleId:tz}),aR=eD.getMainSiteUrlWithStageRootPath(e$.stageRootPath,aN,{sn:tD}),ax=(0,R.hR)(tG),aw=eg?eD.getPageRoute(S.q.GROUP_BOOKING_EVENT):eD.getPageRoute(S.q.EVENT),a_=ev&&(0,w.LV)((0,w.Vf)(aw,{...ep,stageRootPath:(0,w.$r)(eD,e$.stageRootPath),courseSlug:tH.urlTitle,scheduleId:tz}),tZ.storeNum),aC=eg&&(null==t4?void 0:t4.role)===S.GD.COORDINATOR,aO=t1&&eg?"".concat(t1.firstName," ").concat(t1.lastName):"",aT={stageRootPath:(0,w.$r)(eD,e$.stageRootPath)},ak=ax&&ax.eventHasEnded||eg&&t2&&!aC,aL=m()("section-content","section-detail",{"section-detail-no-dropdown-list":!tY||!tY.length}),aj=m()(as&&"show-privacy-statement",am?"visible-group-booking-details":"hidden-group-booking-details",au?"visible-talent-information":"hidden-talent-information",ao?"visible-more-about":"hidden-more-about",ah?"visible-single-session":"hidden-single-session",e1?"visible-registration-form":"hidden-registration-form",ev?"confirmation-page":""),aI="more-about-event-page-heading",aA="more-about-event-page-link",aD="".concat(aI," ").concat(aA);tX&&(tX.description=tX.longDescription,tT=(()=>{let{type:e}=tX||{};return"CAMP"===e?eD.getPageRoute(S.q.CAMP):eD.getPageRoute(tG&&tG.isStoreSpecific?S.q.STORE_COLLECTION:S.q.COLLECTION).replace(":collectionSlug",(null==tX?void 0:tX.collId)||"")})()),(0,g.useEffect)(()=>{let e,t=!1,a=ep.scheduleId,l=(0,O.O)(e$.stageRootPath,null==ab?void 0:ab.userLocation),n=!!((null==ab?void 0:ab.userLocation)&&!a),r=!!((null==ab?void 0:ab.userLocation)&&a),i=tH&&(0,E.o)(tH.type),s=n||r&&i&&!l;async function o(){var l,n,i,o;let u=await tM(eD,e$.stageRootPath,s?null==ab?void 0:ab.userLocation:null,{courseSlug:tA,...e},!1,!1,{redirect:e=>{eB.push(e)}});!r&&a&&a!==(null==u?void 0:null===(l=u.schedule)||void 0===l?void 0:l.id)&&(u={...u,...(0,x.H4)(a,null!==(n=null==u?void 0:u.schedule)&&void 0!==n?n:{},null!==(i=null==u?void 0:u.dropdownSchedules)&&void 0!==i?i:[],null!==(o=null==u?void 0:u.nearbySchedules)&&void 0!==o?o:[])}),!t&&u&&(eI(u),ey(!0))}return eg?eg&&ey(!0):n?o():r?i&&!l?(e={scheduleId:a},o()):ey(!0):(null==ab?void 0:ab.selectedStore)&&!(null==ab?void 0:ab.nearby)?(e={selectedStore:null==ab?void 0:ab.selectedStore},o()):(null==ab?void 0:ab.selectedStore)&&(null==ab?void 0:ab.nearby)?(e={nearby:(null==ab?void 0:ab.nearby)?null==ab?void 0:ab.nearby.toString():void 0,selectedStore:null==ab?void 0:ab.selectedStore},o()):(null==ab?void 0:ab.marketSlug)&&(e={marketSlug:null==ab?void 0:ab.marketSlug,scheduleId:a},o()),()=>{t=!0}},[eD,eB,tA,e$,eg,null==ab?void 0:ab.marketSlug,null==ab?void 0:ab.nearby,null==ab?void 0:ab.selectedStore,null==ab?void 0:ab.userLocation,ep.scheduleId,eI]),(0,g.useEffect)(()=>(ly(),aF(),aV(),window.onpopstate=()=>{eB.refresh()},()=>{window.onpopstate=null,eF.getSms()&&eF.removeSms(),eF.getSMSFormErrorData()&&eF.removeSMSFormErrorData()}),[]),(0,g.useEffect)(()=>{if(ef){let e=tH.type===S.tw.CAMPS?"camp session":"session",t=eg?"groups":e,a=ev?"confirmation":"detail";eY(ej.userLocation),eq("today - ".concat(t," ").concat(a),{eVar80:tG.storeNum,eVar81:tH.prefix,eVar82:tH.name,eVar83:tG.startTime&&new Date(tG.startTime).toUTCString()})}},[tH.name,tH.prefix,tH.type,ev,ej.userLocation,ef,tG.startTime,tG.storeNum,eq,eg,eY]),(0,g.useEffect)(()=>{if(!ef)return;let e=t9&&tG&&!b()(t9,tG);if(lu())lc();else if(e&&(aU(tG),tG)){var t;a$(aG(null!==(t=tG.id)&&void 0!==t?t:"",t7))}},[ef,null==tG?void 0:tG.id,null==tG?void 0:tG.status]);let aP=e=>{eI(t=>({...t,...e}))},aM=async()=>{if(ev)!ep.scheduleId&&!av||!Object.keys(tG).length||tG.status===S.N3.CLOSED||tG.status===S.N3.CANCELLED||lp(tG)?(lS((0,H.fX)(S.Jr.CONFIRMATION_ERROR)),eR(!0)):lS((0,H.fX)(S.Jr.CONFIRMED));else if(tG&&Object.keys(tG).length){var e,t,a;if(tz&&tz!==tG.id)return;if(lr()){let e=(0,w.d5)();aU(tG),e===w.K.SESSION_NOT_FOUND&&lS((0,H.fX)(S.Jr.THIS_SESSION_NOT_AVAILABLE_TRY_ANOTHER))}let{status:l,reservations:n}=await a2();if((null==l?void 0:l.numberOfPlusOnesAvailable)&&tg(null!==(e=l.numberOfPlusOnesAvailable)&&void 0!==e?e:0),!l){lS((0,H.fX)(S.Jr.GENERIC_ERROR));return}if(aB(l.workshopId,null!==(t=l.numberOfPlusOnesAvailable)&&void 0!==t?t:0),tU.windowScrollToY(0,{withAnimation:!1}),null==tS?void 0:tS.validateReservationRedirect(null!=tz?tz:"",e0.get(G.cf.AUTH_TOKEN)||""))aJ(!0);else{aP({isUserLoggedIn:null!==n}),n&&t5(n);let e=aG(null!==(a=tG.id)&&void 0!==a?a:"",null!=n?n:[]);if(e){aY(e);return}a$(null!=e?e:{});let t=t4&&t4.status,r=l&&l.eventStatus||null,i=r;switch(t){case S.Jr.RESERVED:case S.Jr.WAITLIST:r===S.Jr.FULL&&(i=t);break;case S.Jr.HOLD_WAITLIST_FULL:i=t}if(aP({schedule:{...tG,status:i}}),i&&!(0,R.ac)(i)){a$(null!=e?e:{});return}}}else aQ()||lS((0,H.fX)(S.Jr.NO_AVAILABLE_SESSIONS_FOR_COURSE));eL(!0)},aU=e=>{if(!f()(e)&&!(ev&&!ep.scheduleId)){let t=(0,w.Vf)(eD.getPageRoute(aE),{...ep,...aT,scheduleId:e.id}),a=(0,w.LV)(t,e.storeNum,new URLSearchParams(document.location.search));window.history.replaceState({},"",a)}},aB=(e,t)=>{let a=null==tJ?void 0:tJ[e];if(a&&null!=t&&t!==a.numberOfPlusOnesAvailable){let l={...a,numberOfPlusOnesAvailable:t},n={...tJ,[e]:l};aP({schedule:l,schedules:n})}},aF=async()=>{if("true"===(0,w.ce)(w.az.AUTH)){let{reservations:e}=await tN.initiateWorkflow(a4()),t=(0,w.ZC)(w.az.AUTH);window.history.replaceState({},"",t),e||tS.redirectToIDMS("",!0,!0)}},aV=()=>{"true"===(0,w.ce)(w.az.SMS)&&(async()=>{let{reservations:e}=await tN.initiateWorkflow(a4());return e})().then(e=>{if(0===(e?e.filter(e=>e.workshopId===tG.id):[]).length){let e=(0,w.ZC)(w.az.SMS),t=aV.name;e&&(0,w.Eo)(e,eU,t),e6(!1)}else e6(!0)})},aH=async e=>{var t,a,l,n,r,i;let{scheduleId:s,schedule:o,dropdownSchedules:u,nearbySchedules:c}=(0,x.H4)(e,null!==(t=ej.schedule)&&void 0!==t?t:{},null!==(a=ej.dropdownSchedules)&&void 0!==a?a:[],null!==(l=ej.nearbySchedules)&&void 0!==l?l:[]),d=(0,x.hx)(e,null!==(n=ej.schedules)&&void 0!==n?n:{},null!==(r=ej.stores)&&void 0!==r?r:{}),h=(null==t4?void 0:t4.isGuestRegistration)?null!=t4?t4:{}:null!==(i=aG(e,t7))&&void 0!==i?i:{};aP({scheduleId:s,schedule:o,dropdownSchedules:u,nearbySchedules:c,store:d}),lS(h);let m=new URLSearchParams(document.location.search);m.delete("resToken");let p=(0,w.Vf)(eD.getPageRoute(aE),{...ep,stageRootPath:(0,w.$r)(eD,e$.stageRootPath),scheduleId:e}),g=(0,w.LV)(p,null==o?void 0:o.storeNum,m);window.history.pushState({},"",g)},aG=(e,t)=>{if(t&&t.length)return t.find(t=>t.workshopId===e)},az=async()=>{eC(!0);let e=await a2();if(e&&e.reservations)await a8(e);else if(li(tH,!!tq)){e2(!0);let e=tf.current;if(e){if(ls()){let t=eF.getGuestRegistrationEmail();t&&e.setValueFor(o.EMAIL,t)}else{let t=eF.getGuestRegistrationCountryCode();t&&e.setValueFor(o.COUNTRY_CODE,t);let a=eF.getGuestRegistrationPhone();a&&e.setValueFor(o.PHONE,a)}setTimeout(()=>{e.focusFirstField(!1)},1250)}}else await a8(e);eC(!1)},aJ=async(e,t)=>{let a=tH.type,{reservations:l,status:n}=t||await a2();if(!n){lS((0,H.fX)(S.Jr.GENERIC_ERROR));return}if(aP({isUserLoggedIn:null!=l}),l)t5(l);else{e||tS.redirectToIDMS(null!=tz?tz:"");return}let r=l.find(e=>e.workshopId===tz);if(r&&r.status===S.Jr.RESERVED){aY(r);return}if(n.eventStatus===S.Jr.FULL){lS((0,H.fX)(S.Jr.FULL));return}if(!(0,R.ac)(n.eventStatus)){aP({schedule:{...tG,status:n.eventStatus}}),lS((0,H.fX)(n.eventStatus));return}let i=(0,E.o)(tH.type);if(i&&lg(tG)||!i&&lp(tG)){lS((0,H.fX)(S.Jr.THIS_SESSION_NOT_AVAILABLE_TRY_ANOTHER));return}if(a===S.tw.CAMPS)(0,R.cK)(null==tG?void 0:tG.status,n.eventStatus)?tb(ew.Lo.RSVP_FULL):lf();else{let e=!0;e:if(al){let t=await a6();if(void 0===t)return;if(!t)break e;e9(!0),tr(lo(n)),e=await a7()}lo(n)&&e&&(ts(!0),e=await a7()),e&&await aZ()}},aZ=async()=>{let{reservation:e}=await tN.createReservation({userLocation:ay,legalConsentAccepted:td.current,...a4()});aK(e,t7)},aW=async(e,t)=>{let a={...a4(),numberOfPlusOnes:e,legalConsentAccepted:td.current},{reservation:l,reservations:n,isPLusOneOverflowError:r,numberOfPlusOnesAvailable:i}=await tN.createReservation(a);r?aB(null!=tz?tz:"",null!=i?i:0):(await aK(l,n),e2(!1),null==t||t(),lh(!0))},aX=async()=>{try{let{workshopId:e,numberOfPlusOnesAvailable:t}=await tE.getWorkshopStatus(a4());aB(e,null!=t?t:0)}catch(e){eU.error("Error occurred: RegistrationDataService -> getWorkshopStatus")}},aK=(e,t)=>{if(null!==e&&e.status&&e.status!==S.Jr.ALREADY_RESERVED)lS(e),t5(t=>(null==t?void 0:t.concat(e))||[e]),e2(!1);else{let e=null==t?void 0:t.find(e=>e.workshopId===(null==tG?void 0:tG.id));e&&(lS(e),e2(!1))}a3()},aq=new eJ.nN({allLocales:eQ,configManager:eD,i18n:eP,logger:eU,pageName:S.q.EVENT,sessionStorage:eF,actions:{updatePageData:eI},match:{...ep,scheduleId:tG&&tG.id}}),aY=e=>{let t=tH.type,{eventHasEnded:a,eventInSession:l}=(0,R.hR)(tG),n=!!a||e.status===S.Jr.CANCELLED;t4&&t4.workshopId===(null==tG?void 0:tG.id)&&(e={...t4,...e}),e.status!==S.Jr.RESERVED||t===S.tw.CAMPS||e.role||(e={...e,status:S.Jr.ALREADY_RESERVED,iCalLink:e.iCalLink||(null==tG?void 0:tG.icalUrl)}),e.role===S.GD.PARTICIPANT&&e.status===S.Jr.RESERVED&&(e={...e,status:S.Jr.PARTICIPANT_ALREADY_RESERVED,iCalLink:e.iCalLink||(null==tG?void 0:tG.icalUrl)}),e.role===S.GD.COORDINATOR&&(e={...e,status:t2?S.Jr.COORDINATOR_CONFIRMED_YOUTH:S.Jr.COORDINATOR_CONFIRMED}),l&&(e.status===S.Jr.RESERVED||e.status===S.Jr.ALREADY_RESERVED||e.status===S.Jr.PARTICIPANT_ALREADY_RESERVED)&&(e={...e,status:S.Jr.IN_PROGRESS_ATTENDEE}),n&&a0()?lS((0,H.fX)(S.Jr.HAS_ENDED)):n&&!a0()?lS((0,H.fX)(S.Jr.HAS_ENDED_NO_MORE_SESSIONS)):lS(e)},a$=e=>{let{eventHasEnded:t,eventInSession:a}=(0,R.hR)(null!=tG?tG:{}),l=(0,R.ac)(null==tG?void 0:tG.status);aQ()?!tG||e&&0!==Object.keys(e).length||(a&&!a0()?lS((0,H.fX)(S.Jr.IN_PROGRESS_NO_MORE_SESSIONS)):a&&a0()?lS((0,H.fX)(S.Jr.IN_PROGRESS)):t&&!a0()?lS((0,H.fX)(S.Jr.HAS_ENDED_NO_MORE_SESSIONS)):t&&a0()?lS((0,H.fX)(S.Jr.HAS_ENDED)):tG.status===S.N3.FULL?t2||lS((0,H.fX)(S.Jr.FULL)):tG.status===S.N3.CANCELLED?lS((0,H.fX)(S.Jr.CANCELLED)):l?(0,w.ce)(w.az.ERROR)===w.EI.SESSION_NOT_FOUND?lS((0,H.fX)(S.Jr.THIS_SESSION_NOT_AVAILABLE_TRY_ANOTHER)):lS(void 0):lS((0,H.fX)(S.Jr.GENERIC_ERROR))):lS((0,H.fX)(S.Jr.NO_AVAILABLE_SESSIONS_FOR_SELECTED_LOCALE_AND_COURSE))},aQ=()=>tz&&tJ&&Object.keys(tJ).length>0,a0=()=>tz&&tY&&Object.values(tY).filter(e=>e.id!==tz&&(0,R.ac)(e.status)).length>0,a1=async()=>{let e=e$.stageRootPath;try{await tR.getMyIpLookup(!1,e)}catch(e){eU.error("MapKit Error -> Event -> checkNewData: ".concat(e))}let t=eg?tO:tC,a=eF.getUserLocation();return await t.getPageData({...ep,scheduleId:tG&&tG.id,stageRootPath:e},{},{...a})},a2=async()=>{let{reservations:e,status:t}=await tN.initiateWorkflow(a4());if(t){var a;tg(Number(null!==(a=t.numberOfPlusOnesAvailable)&&void 0!==a?a:0))}return{reservations:e,status:t}},a4=()=>({storeInfo:tZ,schedule:tG,course:tH,localeId:e$.id}),a8=async e=>{lo(e&&e.status)||ln("event360"),await aJ(!1,e)},a3=()=>{td.current=!1,th.current=!1},a6=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=await a1()||null;if(null==a?void 0:a.error){lS((0,H.fX)(S.Jr.THIS_SESSION_NOT_AVAILABLE_TRY_ANOTHER)),t&&lt();return}return(0,R.ac)(null==a?void 0:null===(e=a.schedule)||void 0===e?void 0:e.status)},a7=async()=>await new Promise(e=>{tm.current={resolve:e}}),a5=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];tl(e),tt(!1)},a9=async(e,t)=>{let a=!0;aa&&a&&(tt(!0),tl(e7),a=await a7());e:if(al&&a){let e=await a6(!0);if(void 0===e){a5();return}if(!e){a5();break e}aa?a5(!0):(e9(!0),tr(!1)),a=await a7()}a&&(eC(!0),await le(e,t),eC(!1))};(0,g.useEffect)(()=>{ta&&!te&&(e9(!0),tr(!1))},[ta,te]);let le=async(e,t)=>{var a,l,n;let{errorField:r,errorStatus:i,registration:s,errorKey:u,errorValue:c}=await tx.initCreateGuestRegistration(e,eQ.currentLocale.id,td.current,th.current,t),d=new V.bK().withTitle("Registration tracking").withProp3("t@a - submit guest reg").withEvar47(V.S6.GUEST).withEvar80(tG.storeNum).withEvar81(tH.prefix).withEvar82(tH.name).withEvar83(new Date(null!==(a=null==tG?void 0:tG.startTime)&&void 0!==a?a:Date.now()).toUTCString());null!=t&&d.withEvar51(t),null==eW||eW.trackEvent(d.trackers);let h=tf.current;if(h){if(r){if(h&&(r===o.NUMBER_OF_PLUS_ONES&&(h.setIsAfterErrorNumberOfPlusOnes(!0),aB(null!==(l=null==tG?void 0:tG.id)&&void 0!==l?l:"",null!=c?c:0)),h.showErrorFor(r,t),h.focusFirstField(!0)),r===o.NUMBER_OF_PLUS_ONES){let e=new V.bK().withTitle("Registration tracking").withEvar47(V.S6.GUEST).addPropToTrackers("eVar152",null!=u?u:"");null==eW||eW.trackEvent(e.trackers)}}else if(i)lS((0,H.fX)(i)),ln("",i),lt();else if(s){let{guardianFirstName:e,guardianLastName:t,reservationId:a,storeNumber:l,sessionId:r,templateId:i,...u}=s;if(h.fields.has(o.EMAIL)){let i={sessionId:r,reservationId:a,storeNumber:l,firstName:e,lastName:t,email:null!==(n=h.getStringValue(o.EMAIL))&&void 0!==n?n:""};eF.setSms(i)}lS({...t4,courseId:i,guardianFirstName:e,guardianLastName:t,reservationId:a,storeNumber:l,workshopId:r,...u}),ln("event356"),lt()}}},lt=e=>{eF.removeGuestRegistrationEmail(),eF.removeGuestRegistrationCountryCode(),eF.removeGuestRegistrationPhone(),e2(!1),eC(!1),a3(),null==e||e()},la=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tr(a),a&&e9(!1),td.current=t,null==tm||null===(e=tm.current)||void 0===e||e.resolve(t),tm.current=null,t||a3(),e9(!1),!1},ll=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return th.current=t,null==tm||null===(e=tm.current)||void 0===e||e.resolve(t),tm.current=null,al&&t||tt(!1),t||a3(),!1},ln=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l={title:"Registration tracking",...t&&{events:t},eVar80:null==tG?void 0:tG.storeNum,eVar81:tH.prefix,eVar82:tH.name,eVar83:new Date(null!==(e=null==tG?void 0:tG.startTime)&&void 0!==e?e:Date.now()).toUTCString(),...a&&{prop3:"t@a reg error ".concat(a)}};null==eW||eW.trackEvent({...l})},lr=()=>{if(eg)return!1;let e=(0,w.Vf)(eD.getPageRoute(aE),{...ep,stageRootPath:(0,w.$r)(eD,ep.stageRootPath),scheduleId:tz});return window.location.pathname!==e||f()(tG)},li=(e,t)=>!!(e.type!==S.tw.CAMPS&&!(0,E.o)(e.type)&&e.guestRegistration&&!t),ls=()=>!("TRUE"===eP.value("config.guest-registration-phone-enabled")&&(null==ap?void 0:ap.length)>0),lo=e=>{var t;let a=(e&&e.numberOfPlusOnesAvailable||0)>0;return!!(!eg&&(null===(t=ej.course)||void 0===t?void 0:t.plusOneBookingEnabled)&&a)},lu=()=>lr()&&tG&&tG.status===S.N3.FULL,lc=()=>{let e=ld();(null==e?void 0:e.id)&&aH(e.id),eS(!0)},ld=()=>(null!=t$?t$:[]).find(e=>e.status===S.N3.RSVP),lh=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ts(!1),null==tm||null===(e=tm.current)||void 0===e||e.resolve(t),tm.current=null,lm()},lm=async()=>{let{reservations:e,status:{eventStatus:t}}=await a2();if(null!==e){let t=null==e?void 0:e.find(e=>e.workshopId===tz);if(t&&t.status===S.Jr.RESERVED)return}t&&!(0,R.ac)(t)&&(lb(t),lS((0,H.fX)(t)),ts(!1))},lp=e=>{var t,a;let l=(0,R.rk)(null!==(t=e.startTime)&&void 0!==t?t:Date.now(),null!==(a=e.endTime)&&void 0!==a?a:Date.now());return(null==l?void 0:l.eventInSession)||(null==l?void 0:l.eventHasEnded)},lg=e=>{var t,a,l;return null===(t=(0,R.rk)(null!==(a=e.startTime)&&void 0!==a?a:Date.now(),null!==(l=e.endTime)&&void 0!==l?l:Date.now()))||void 0===t?void 0:t.eventHasEnded},lv=e=>{eF.setGuestRegistrationCountryCode(e)},lf=()=>{let e=eD.getPageRoute(S.q.CAMP_REGISTRATION),t=(0,w.Vf)(e,{courseSlug:tA,scheduleId:tz,stageRootPath:e$.urlStageRootPath});eB.push(t)},ly=()=>{"online-registration-unavailable"===(0,w.ce)(w.az.ERROR)&&tb(ew.Lo.GENERIC_ERROR)},lb=e=>{eI(t=>({...t,schedule:{...tG,status:e}}))},lS=e=>{t8(e),t6(Date.now())},lE=(0,g.useRef)(null),lN=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{schedule:t}=ej,{eventHasEnded:a}=(0,R.hR)(t);a?lS((0,H.fX)(S.Jr.HAS_ENDED)):_(C(e,window.location.href,"online-registration-unavailable"))},lR=()=>{if(!(null!==t4&&(null==t4?void 0:t4.isGuestRegistration)!==void 0)&&"true"!==(0,w.ce)(w.az.SMS)){let e=new URL(window.location.href),t=lR.name;e.searchParams.set(w.az.SMS,"true"),(0,w.Eo)(e.href,eU,t)}e8(!0),e6(!0)},lx=()=>{if((0,w.ce)(w.az.SMS)){let e=(0,w.ZC)(w.az.SMS),t=lx.name;e&&(0,w.Eo)(e,eU,t)}e8(!1),e6(!1)},lw=(0,tj.N)(ez.i),l_=(()=>{let e=[S.Jr.CONFIRMED,S.Jr.COORDINATOR_CONFIRMED,S.Jr.COORDINATOR_CONFIRMED_YOUTH,S.Jr.ALREADY_RESERVED,S.Jr.PARTICIPANT_ALREADY_RESERVED,S.Jr.RESERVED],t=null!==t4&&(null==t4?void 0:t4.isGuestRegistration)!==void 0,a=!!(null!==t4&&(null==t4?void 0:t4.status)&&e.includes(t4.status));return("/cn"!==e$.stageRootPath||!t)&&!1!==a})();return(0,g.useEffect)(()=>{let e=lu();ef&&(!e||eb)&&aM()},[ef,eb]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:aj,children:[(0,d.jsx)(t_.t,{pageName:aE,schedule:tG,course:tH,schedules:tJ,socialLinks:tW,reservation:t4,reservationUpdateTime:t3||null,location:ej.userLocation,storeInfo:tZ,scheduleType:tH.type,showBusinessSection:tH.promoType===tI.RS.BUSINESS,components:{getLocationSelector:()=>lE},pageUrl:aR,clickHandlers:{onNewReservationClick:az,onJoinNowClick:lN},className:ev?"confirmation-status":"",groupBookingInformation:{isGroupBooking:eg,isYouth:t2},coordinator:t1,openSMSModal:lR,smsParamFound:e3,currentLocale:e$,configManager:eD,i18n:eP,analyticsService:eW}),!eE&&ek&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tF,{heroGalleryData:an,forceImages:ev,disableLink:!0,autoPlay:!0,wrapAround:!0}),(0,d.jsx)(ex,{siteURL:eD.getMainSiteUrl(e$.stageRootPath),data:{stageRootPath:e$.stageRootPath,pageTitle:null===(i=ej.metaData)||void 0===i?void 0:i.title,backgroundImage:"",description:null===(s=ej.metaData)||void 0===s?void 0:s.description,pageUrl:"".concat(aS).concat(tA,"/"),courseSlug:tA,store:ej.store,schedule:ej.schedule}}),(0,d.jsxs)("section",{className:aL,children:[(0,d.jsx)(eH,{name:null!==(h=tH.name)&&void 0!==h?h:"",collectionName:!eg&&tH.collectionName?tH.collectionName:""}),!tH.isLocationSelectionDisabled&&!ev&&!eg&&!av&&(0,d.jsx)("div",{className:"row location-selector",children:(0,d.jsx)("div",{className:"column large-8 large-offset-1 medium-9 small-10 typography-intro location-button-wrapper",children:(0,d.jsx)(lw,{resetAccessibilityFocusTargetId:"#current-location-button",resetFocusTabIndexToZero:!0,disabled:e1||af,shouldConcreteStoreBeSelected:ai,isStoreSpecific:af,userLocation:ay,locationUpdateStrategy:aq,controlsVisibility:{country:!1},ref:lE})})}),tG.id&&(0,d.jsx)(eN,{isLoading:!ef,schedule:null!==(v=ej.schedule)&&void 0!==v?v:{},scheduleId:null!==(y=null===(u=ej.schedule)||void 0===u?void 0:u.id)&&void 0!==y?y:"",nearbySchedules:null!==(J=ej.nearbySchedules)&&void 0!==J?J:[],course:null!==(Z=ej.course)&&void 0!==Z?Z:{},historyReservations:null!=t7?t7:[],reservation:null!=t4?t4:{},disabled:e1||ev,disableTimeSelectorViolator:!!(eg&&t2||t4&&t4.id&&(0,R.Yg)(t4.status)),dropdownSchedules:null!==(X=ej.dropdownSchedules)&&void 0!==X?X:[],changeSchedule:aH,isConfirmationPage:ev,isGroupBooking:eg,isGuestRegistrationFormDisplayed:e1}),eg&&!aC&&(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"column large-offset-1 large-7 medium-10 small-10",children:(0,d.jsx)("p",{className:"group-booking-event-page-coordinator ".concat(t2?"is-youth":""),children:t2?eP.compileValue("details.group-booking-invitee-youth",{coordinator:aO}):eP.compileValue("details.group-booking-invitee-adults",{coordinator:aO})})})}),tG.id&&!ev&&ef&&(0,d.jsxs)(eK,{hideRsvpButton:ak,isGuestRegistrationForm:ar,isGuestRegistrationFormDisplayed:e1,children:[(0,d.jsx)(et.MX,{onClick:az,schedule:tG,eventType:tH.type,reservation:t4,analyticsAttr:tB,analyticsData:{scheduleName:null!==(K=tH.title)&&void 0!==K?K:"",programName:null!==(q=tH.prefix)&&void 0!==q?q:"",storeNum:null!==(ea=null==tG?void 0:tG.storeNum)&&void 0!==ea?ea:"",sessionTime:new Date(null!==(el=null==tG?void 0:tG.startTime)&&void 0!==el?el:Date.now()).toUTCString()},buttonRef:tv,disabled:e_||to}),!aC&&(0,d.jsx)(eA,{defaultCountryCode:tk,doAppleIDReservation:a8,doGuestRegistration:a9,cancelGuestRegistration:()=>{lt(()=>{let e=tv.current;e&&e.focus({preventScroll:!0})})},countryCodes:ap,hideGuestNumberField:!tH.plusOneBookingEnabled||!!eg,isEmailForm:ls(),onCountryCodeChange:e=>lv(String(e)),onFlowFieldValidation:(e,t,a)=>{e===o.EMAIL&&(a?eF.setGuestRegistrationEmail(t):eF.removeGuestRegistrationEmail()),e===o.PHONE&&(a?eF.setGuestRegistrationPhone(t):eF.removeGuestRegistrationPhone())},ref:tf,schedule:tG,onFormExpanded:()=>{ln("event355")},isGuestRegistrationFormDisplayed:e1,numberOfPlusOnesAvailable:tp,isModalDisplayed:to,updateReservation:e=>aP({reservation:e}),getSummaryData:a2})]}),(0,d.jsx)(e5,{isConfirmationPage:ev,isGroupBooking:eg,course:tH,schedule:tG,store:tZ,sessionUrl:a_,routeParams:aT,social:null==tW?void 0:tW.default,pageUrl:aR,pageName:aE,talents:tK})]}),am&&(()=>{let{courseId:e,groupBookingEntryPoint:t,store:a}=ej;return(0,d.jsx)("section",{className:"section section-group-booking-details",children:(0,d.jsx)("div",{className:"section-content",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"column large-10 large-offset-1 small-10 border-top"}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"column large-8 large-offset-1 medium-9 small-10",children:(0,d.jsx)(eO,{title:null==t?void 0:t.title,description:null==t?void 0:t.description,courseId:e,store:a,routeParams:aT})})})]})})})})(),!ev&&tX&&(0,d.jsx)(eZ.u,{heading:{id:aI,text:eP.compileValue("details.more-about-title",tX)},info:{...tX,analyticsInfo:{prop3:"t@a - collection: "+tX.collId}},link:{id:aA,url:tT,text:eP.value("details.cta-program-learn-more"),ariaLabelledBy:aD},routeParams:aT,isEventPage:!0}),!ev&&t0&&t0.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"section-more-in-collection","data-analytics-activitymap-region-id":"you might also like",children:(0,d.jsx)(eT.O,{title:eP.value("details.related-component-title"),spotlightGalleryData:t0,isMultiLanguage:eM.isMultiLanguage(),forceImages:!0,hideCollectionName:eg,page:S.q.EVENT})}),(0,d.jsx)(eX,{routeParams:aT})]})]}),(0,d.jsxs)(es.tC.Provider,{value:{...tu,setModalContext:e=>{e&&tc(t=>({...t,standBy:e}))}},children:[!ev&&!eg&&(0,d.jsx)(ew.M6,{status:ty,errorMapping:{...ew.rW.getMappings(),[ew.Lo.RSVP_FULL]:{label:"error.camp-session-full",buttons:[{text:"global.cta-yes",callback:()=>{lb(S.N3.WAITLIST),lf(),null==eW||eW.trackEvent({title:"Waitlist attempt",events:"event256"})}},{text:"global.cta-no"}]}},redirectOnErrorCallback:()=>{let e=eD.getPageRoute(S.q.DISCOVER),t=(0,w.Vf)(e,{stageRootPath:e$.urlStageRootPath});eB.push(t)},onClose:()=>{tb(null)}}),(0,d.jsx)(eV,{i18n:eP,analyticsService:eW,course:tH,handleNumberOfPlusOnes:aW,isOpened:ti,numberOfPlusOnesAvailable:tp,onClose:lh,updateSchedule:aX,schedule:tG,onLetMeGoBackClick:lm,onConfirmExit:()=>{lh(),a3()},getSummaryData:a2}),at&&(0,d.jsx)(tL,{showAgreement:te,analyticsData:{programName:null!==(en=tH.name)&&void 0!==en?en:"",storeNum:null!==(er=null==tG?void 0:tG.storeNum)&&void 0!==er?er:"",sessionTime:new Date(null!==(ei=null==tG?void 0:tG.startTime)&&void 0!==ei?ei:Date.now()).toUTCString()},updateConsent:ll,shouldStandBy:ta}),ae&&(0,d.jsx)(eG.C,{legal:null!==(eo=tH.legalConsent)&&void 0!==eo?eo:{},showLegal:e7,analyticsData:{programName:null!==(eu=tH.name)&&void 0!==eu?eu:"",storeNum:null!==(ec=null==tG?void 0:tG.storeNum)&&void 0!==ec?ec:"",sessionTime:new Date(null!==(ed=null==tG?void 0:tG.startTime)&&void 0!==ed?ed:Date.now()).toUTCString()},updateConsent:la,shouldStandBy:tn}),l_&&(0,d.jsx)(tw,{type:es.w8.STANDARD,isOpened:e4,onClose:lx,...a4(),guestRegistrationDataService:tx,sessionStorage:eF,registrationDataService:tE,analyticsData:{programName:tH&&tH.name||"",storeNum:tG&&tG.storeNum||"",sessionTime:new Date(tG&&tG.startTime||"").toUTCString()}})]})]})})}},42847:function(e,t,a){"use strict";a.d(t,{f:function(){return h}});var l=a(57437),n=a(2265),r=a(84772),i=a.n(r),s=a(92926),o=a(63910);let u=()=>new o.Z,c=e=>{let{asset:t,labelledByClassname:a}=e,r=(0,n.useId)(),s="dl-asset-".concat(r);return(0,l.jsxs)("a",{"aria-labelledby":i()(s,a),href:t.source,className:"asset-link icon-wrapper","data-analytics-title":t.description,children:[(0,l.jsx)("span",{id:s,className:"icon-copy",children:t.description}),(0,l.jsx)("span",{className:"icon icon-after icon-downloadcircle","aria-hidden":"true"})]})};a(77100);let d=()=>!0===u().getFeatureSupport("browser","safari")?755:734,h=e=>{let{materials:t}=e,a=(0,n.useId)(),r="downloadable-materials-label-".concat(a),o=(0,s.l)(),u=d(),[h,m]=(0,n.useState)(!1),p=(0,n.useRef)(null),g=(0,n.useRef)(null),v=(null==t?void 0:t.assets)&&t.assets.length>0,f=e=>e.getBoundingClientRect().width+parseFloat(window.getComputedStyle(e).marginRight),y=(0,n.useCallback)(e=>{var t;if(!v)return;if(o<=u){m(!1);return}let a=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect().width,l=!1;for(let t of e)if((a=(a||0)-f(t.getElementsByTagName("a")[0]))<0){m(!1),l=!0;break}l||m(!0)},[v,u,o]),b=(0,n.useCallback)(e=>{e.length>2?m(!1):y(e)},[y]);if((0,n.useEffect)(()=>{if(g.current&&(null==t?void 0:t.assets)){var e;b(null===(e=g.current)||void 0===e?void 0:e.getElementsByTagName("li"))}},[null==t?void 0:t.assets,b]),!t||Object.keys(t).length<1)return null;let S=(e,t)=>(0,l.jsx)("li",{className:"asset",children:(0,l.jsx)(c,{labelledByClassname:r,asset:e})},"".concat(e.source,"-DownloadableMaterialAsset"));return(0,l.jsx)(l.Fragment,{children:v&&(0,l.jsxs)("div",{ref:p,className:"downloadable-materials","data-analytics-activitymap-region-id":"downloads",children:[(0,l.jsx)("h2",{id:r,className:"downloadable-materials-label typography-headline-description",children:t.title}),(0,l.jsx)("ul",{ref:g,className:i()("assets",h?"links-inline":"links-stacked"),children:t.assets.map((e,t)=>S(e,t))})]})})}},31341:function(e,t,a){"use strict";a.d(t,{rW:function(){return u},M6:function(){return s},Lo:function(){return o.L}});var l=a(57437),n=a(50403),r=a(40125),i=a(17346);a(83669);let s=e=>{let t=(0,i.Z)(),{status:a,errorMapping:s,onClose:o}=e,u=s&&a&&s[a],c=!!(a&&u),{copy:d,label:h,buttons:m}=u||{};return(0,l.jsx)(n.u_,{type:n.w8.STANDARD,classList:["event-warning-modal"],isOpened:c,onClose:o,ariaLabel:u?t.value(u.label):"",children:c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"typography-headline-reduced error-headline",children:t.value(h||"")}),d&&(0,l.jsx)("p",{className:"typography-body error-copy",children:t.value(d)}),(0,l.jsx)("div",{className:"button-bar",children:null==m?void 0:m.map((a,n)=>(0,l.jsx)(r.zx,{size:r.Ph.large,onClick:()=>{o(),setTimeout(()=>{a.callback&&a.callback(e)},0)},children:t.value(a.text)},n))})]})})};var o=a(41923);class u{static getMappings(){return{[o.L.GENERIC_ERROR]:{label:"error.session-join-failure-title",copy:"error.session-join-failure-description",buttons:[u.REDIRECT_ON_ERROR_BUTTON]}}}}u.REDIRECT_ON_ERROR_BUTTON={text:"global.cta-ok",callback:e=>{let{redirectOnErrorCallback:t}=e;t&&t()}}},41923:function(e,t,a){"use strict";var l,n;a.d(t,{L:function(){return l}}),(n=l||(l={})).SESSION_WARNING="SESSION_WARNING",n.RSVP="RSVP",n.RESERVED="RESERVED",n.CANCELLED="CANCELLED",n.NON_RSVP="NON_RSVP",n.ALREADY_RESERVED="ALREADY_RESERVED",n.LIMIT="LIMIT",n.FULL="FULL",n.UNAVAILABLE="UNAVAILABLE",n.RSVP_FULL="RSVP_FULL",n.WAITLIST_FULL="WAITLIST_FULL",n.HOLD_SESSION_FULL="HOLD_SESSION_FULL",n.HOLD_WAITLIST_FULL="HOLD_WAITLIST_FULL",n.FORBIDDEN="FORBIDDEN",n.GENERIC_ERROR="GENERIC_ERROR",n.NOT_GUEST_RESERVABLE="NOT_GUEST_RESERVABLE",n.REQUEST_REJECTED="REQUEST_REJECTED",n.WAITLIST="WAITLIST",n.IN_PROGRESS="IN_PROGRESS",n.CLOSED="CLOSED",n.SESSION_LIMIT="SESSION_LIMIT"},30290:function(e,t,a){"use strict";a.d(t,{F:function(){return c}});var l=a(57437),n=a(84772),r=a.n(n),i=a(93213),s=a(41428),o=a(50403);a(38038);let u=e=>[i.ET.SMALL,i.ET.XSMALL].includes(e),c=e=>{let{title:t,isOpened:a,onClose:n,classList:i=[],renderList:c,...d}=e,h=(0,s.J)(),m=["generic-list-modal-close",...i],p="generic-list-modal-title",g=r()(p,"generic-list-modal-close","typography-body-reduced",{"generic-list-modal-title-small-view":u(h.viewport)});return(0,l.jsx)(o.u_,{modalAttr:{id:"generic-list-modal"},isOpened:a,onClose:n,classList:m,ariaLabelledBy:p,retainScrollPosition:!0,...d,children:(0,l.jsxs)("div",{className:"generic-list-modal-content",children:[(0,l.jsx)("h2",{id:p,className:g,children:t}),c()]})})}},69091:function(e,t,a){"use strict";a.d(t,{u:function(){return o}});var l=a(57437),n=a(84772),r=a.n(n),i=a(31642),s=a(83543);a(67726);let o=e=>{let{info:t,link:a,heading:n,classes:o={},routeParams:u,isEventPage:c=!1}=e,{type:d,description:h,analyticsInfo:m}=t,{heading:p,info:g,link:v}=o;p=p||("Business"===d?"typography-label":"more-about-title typography-body-reduced"),g=g||"description typography-body",v=r()(v,"more");let f={"data-analytics-title":(null==m?void 0:m.prop3)||""},y=a&&a.url instanceof Object?a.url.href:a&&a.url;return(0,l.jsx)("section",{className:c?"section section-about-banner event":"section section-about-banner",children:(0,l.jsx)("div",{className:c?"section-content event":"section-content",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"column large-8 large-offset-2 small-12 small-offset-0",children:[(0,l.jsx)("h2",{className:p,id:n.id,children:(0,l.jsx)("strong",{children:n.text})}),(0,l.jsx)(s.p,{data:h||"",classNames:g}),a&&["CAMP","COLLECTION","BUSINESS","FORCE_SHOW_CUSTOM_LINK"].includes(d||"")&&(0,l.jsx)("p",{children:(0,l.jsx)(i.N,{id:a.id,ariaLabelledBy:a.ariaLabelledBy,href:y,className:v,tagProps:f,routeParams:u,includeLocationParameter:!0,children:a.text})})]})})})})};o.displayName="MoreAboutBanner"},35477:function(e,t,a){"use strict";a.d(t,{T:function(){return r}});var l=a(57437),n=a(2265);a(36492);class r extends n.Component{componentDidMount(){let{listener:e}=this.props;this.initialTextSize=this.currentTextSize=this.getTextSize(),e(this),this.beginZoomDetection()}render(){return(0,l.jsx)("span",{className:"text-zoom-detector",ref:this.spanRef,children:"\xa0"})}componentWillUnmount(){window.clearInterval(this.intervalID||void 0),this.intervalID=null}getTextSize(){return this.spanRef.current?this.spanRef.current.offsetHeight:-1}beginZoomDetection(){this.intervalID||(this.intervalID=window.setInterval(this.detectZoom,this.intervalDelay))}constructor(...e){super(...e),this.spanRef=(0,n.createRef)(),this.initialTextSize=-1,this.currentTextSize=-1,this.intervalDelay=200,this.intervalID=null,this.detectZoom=()=>{let e=this.getTextSize();if(e!==this.currentTextSize){let{listener:t}=this.props;this.currentTextSize=e,t(this)}}}}},8593:function(e,t,a){"use strict";a.d(t,{O:function(){return u},A:function(){return E}});var l=a(57437),n=a(2265),r=a(58878),i=a(35477),s=a(87769),o=a(41428);function u(e){let{title:t,spotlightGalleryData:a,hideCollectionName:u,forceImages:c,isMultiLanguage:d,navType:h=r.LR.NONE,page:m=""}=e,p=(0,n.useRef)(null),g=(0,o.J)(),v=[],f=a.map((e,t)=>{let a=(0,n.createRef)();return v.push(a),(0,l.jsx)(E,{spotlightGalleryData:e,slideNumber:t,hideCollectionName:u,forceImages:c,isMultiLanguage:d,autoplay:0===t,itemRef:a},t)}),y=a.map(e=>e.title||"");return(0,n.useEffect)(()=>{if(p.current){let e=v.map(e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.offsetHeight});p.current.style.height="".concat(Math.max(...e),"px")}},[g,v]),(0,l.jsxs)("section",{className:m?"spotlight__section ".concat(m):"spotlight__section",children:[(0,l.jsx)(i.T,{listener:e=>{window.dispatchEvent(new Event("resize"))}}),(0,l.jsx)("h2",{className:"spotlight__title",children:t}),(0,l.jsx)("div",{className:m?"spotlight__gallery ".concat(m):"spotlight__gallery",children:(0,l.jsx)(r.qX,{slides:f,slideLabels:y,galleryId:"spotlight-gallery",label:t,navType:h,slideDuration:.5,containerRef:p,isSpotlightGallery:!0},(0,s.u)())})]})}a(44899);var c=a(66638),d=a(62790),h=a(31642),m=a(45786),p=a(93213),g=a(82099),v=a(17346),f=a(24809);a(61368);var y=a(38452),b=a(84772),S=a.n(b);function E(e){let{spotlightGalleryData:t,slideNumber:a,hideCollectionName:n,forceImages:r,isMultiLanguage:i,itemRef:s,autoplay:o=!0}=e,u=(0,g.Z)(),b=(0,v.Z)(),{currentLocale:E}=(0,f.Z)(),N=u.getPageRoute(p.q.EVENT),R=(0,m.o)(t.type),{backgroundMedia:x,collectionName:w,title:_,displayDate:C,storeTitle:O,id:T,urlTitle:k,prefix:L,storeNum:j}=t;if(!t)return null;let I={courseSlug:k,scheduleId:T,stageRootPath:(0,y.$r)(u,E.stageRootPath)},A=new URLSearchParams;j&&A.set(y.az.STORE_NUMBER,j);let D="".concat((0,y.Vf)(N,I),"?").concat(A.toString()),P=S()("spotlight__info--store","typography-body-reduced",{"spotlight__info--online":R}),M={"data-analytics-title":"Tell me more about ".concat(_," - ").concat(a+1)};return(0,l.jsx)("div",{className:"spotlight-item-container",ref:s,children:(0,l.jsxs)(h.N,{className:"spotlight__item row",href:D,tagProps:M,children:[(0,l.jsx)("span",{className:"spotlight-item__outline"}),x&&(0,l.jsx)("div",{className:x.ambientVideo?"spotlight__video":"spotlight_image",children:(0,l.jsx)(c.TC,{mediaData:x,imageConfig:{imageClasses:"spotlight__image"},loadOnDemand:!1,videoConfig:{className:"spotlight__video",autoplay:!0,loop:!1},loadImages:!0,forceImage:r,viewportImageOrientationMappings:d.Ev,playOnHover:!0})}),(0,l.jsx)("div",{className:"spotlight__info__wrapper",children:(0,l.jsxs)("div",{className:"spotlight__info column large-11 large-offset-1 small-10 small-offset-1",children:[!n&&w&&(0,l.jsx)("p",{className:"spotlight__info--collection typography-body-reduced",children:w}),(0,l.jsx)("h3",{className:"spotlight__info--prefix typography-eyebrow",children:L}),(0,l.jsxs)("p",{className:"spotlight__info--title typography-eyebrow",children:[_,i&&t.lang&&(0,l.jsxs)(l.Fragment,{children:[" "+b.value("global.delivery-language-open-punctuation"),(0,l.jsx)("span",{className:"delivery-language",children:b.value("language.".concat(t.lang))}),b.value("global.delivery-language-close-punctuation")]})]}),null==C?void 0:C.map((e,t)=>{let{dateTime:a}=e;return(0,l.jsx)("p",{className:"spotlight__info--date-time typography-body-reduced",children:a},t)}),(0,l.jsx)("p",{className:P,children:R?b.value("global.online"):O})]})})]})})}},62678:function(e,t,a){"use strict";var l,n,r;a.d(t,{RS:function(){return n}}),a(26167),(r=l||(l={})).production="prod",r.development="dev",r.stage="stage",r.test="test",r.uat="uat",(n||(n={})).BUSINESS="BUSINESS",a(62998)},92926:function(e,t,a){"use strict";a.d(t,{l:function(){return r}});var l=a(2265),n=a(44521);let r=()=>{let[e,t]=(0,l.useState)(0),a=()=>{t(window.innerWidth)};return(0,l.useEffect)(()=>{if((0,n.j)())return window.addEventListener("resize",a),t(window.innerWidth||0),()=>window.removeEventListener("resize",a)},[]),(0,l.useEffect)(()=>{a()},[e]),e}},47878:function(){},68273:function(){},44126:function(){},77100:function(){},83669:function(){},11066:function(){},38038:function(){},52861:function(){},87501:function(){},50580:function(){},42067:function(){},49695:function(){},70642:function(){},67726:function(){},28528:function(){},60944:function(){},67340:function(){},32644:function(){},36492:function(){},68860:function(){},44899:function(){},61368:function(){},54420:function(){}}]);